<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ICARUS</title>
  
  
  <link href="http://lucylcarus.github.io/atom.xml" rel="self"/>
  
  <link href="http://lucylcarus.github.io/"/>
  <updated>2024-11-06T10:43:14.052Z</updated>
  <id>http://lucylcarus.github.io/</id>
  
  <author>
    <name>ICARUS</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ren&#39;py 存档读档界面修改</title>
    <link href="http://lucylcarus.github.io/posts/39e7251c.html"/>
    <id>http://lucylcarus.github.io/posts/39e7251c.html</id>
    <published>2024-10-31T12:14:39.000Z</published>
    <updated>2024-11-06T10:43:14.052Z</updated>
    
    <content type="html"><![CDATA[<p><strong>本文主要修改的文件为<code>screens.rpy</code>，次要修改文件为<code>gui.rpy</code></strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li>大佬教程<br> <a href="https://www.renpy.cn/forum.php?mod=viewthread&amp;tid=847">添加描述</a></li><li>文档链接<br><a href="https://doc.renpy.cn/zh-CN/other.html#last_say">最近发言</a><br><a href="https://doc.renpy.cn/zh-CN/screen_actions.html#FileSlotName">存档编号</a><br><a href="https://doc.renpy.cn/zh-CN/screen_actions.html#FileNewest">最新存档</a><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1></li></ol><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1WYSHYeECU&cid=26552764189&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h1><p>打开<code>screens.rpy</code>文件，你可以在564行看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 读取和保存屏幕 #####################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这些屏幕负责让用户保存游戏并能够再次读取。由于它们几乎完全一样，因此这两个屏</span></span><br><span class="line"><span class="comment">## 幕都是以第三个屏幕 file_slots 来实现的。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://doc.renpy.cn/zh-CN/screen_special.html#save https://doc.renpy.cn/zh-</span></span><br><span class="line"><span class="comment">## CN/screen_special.html#load</span></span><br><span class="line"><span class="comment">## 存档界面</span></span><br><span class="line">screen save():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    use file_slots(_(<span class="string">&quot;保存&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## 读档界面</span></span><br><span class="line">screen load():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    use file_slots(_(<span class="string">&quot;读取游戏&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## 调用的界面</span></span><br><span class="line">screen file_slots(title):</span><br><span class="line"><span class="comment">## 当前页数，非必须</span></span><br><span class="line">    default page_name_value = FilePageNameInputValue(pattern=_(<span class="string">&quot;第 &#123;&#125; 页&quot;</span>), auto=_(<span class="string">&quot;自动存档&quot;</span>), quick=_(<span class="string">&quot;快速存档&quot;</span>))</span><br><span class="line">    <span class="comment">## 调用game_menu界面，非必须</span></span><br><span class="line">    use game_menu(title):</span><br><span class="line"></span><br><span class="line">        fixed:</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 此代码确保输入控件在任意按钮执行前可以获取 enter 事件。</span></span><br><span class="line">            order_reverse <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">## 页面名称，可以通过单击按钮进行编辑。</span></span><br><span class="line">            button:</span><br><span class="line">                style <span class="string">&quot;page_label&quot;</span></span><br><span class="line"></span><br><span class="line">                key_events <span class="literal">True</span></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                action page_name_value.Toggle()</span><br><span class="line">                <span class="comment">## 可通过点击第几页实现页面跳转，非必须</span></span><br><span class="line">                <span class="built_in">input</span>:</span><br><span class="line">                    style <span class="string">&quot;page_label_text&quot;</span></span><br><span class="line">                    value page_name_value</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 存档位网格。</span></span><br><span class="line">            grid gui.file_slot_cols gui.file_slot_rows:</span><br><span class="line">                style_prefix <span class="string">&quot;slot&quot;</span></span><br><span class="line"></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">                spacing gui.slot_spacing</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line"></span><br><span class="line">                    $ slot = i + <span class="number">1</span></span><br><span class="line">                    <span class="comment">## 存档按钮</span></span><br><span class="line">                    button:</span><br><span class="line">                        action FileAction(slot)<span class="comment">## 执行正确的行为，如果在存档界面则为存档，如果在读档界面则为读档</span></span><br><span class="line"></span><br><span class="line">                        has vbox<span class="comment">## vbox的另一种写法，省略了缩进</span></span><br><span class="line"></span><br><span class="line">                        add FileScreenshot(slot) xalign <span class="number">0.5</span><span class="comment">## 添加屏幕快照</span></span><br><span class="line">                        <span class="comment">## 存档时间，empty为空存档的名称</span></span><br><span class="line">                        text FileTime(slot, <span class="built_in">format</span>=_(<span class="string">&quot;&#123;#file_time&#125;%Y-%m-%d %H:%M&quot;</span>), empty=_(<span class="string">&quot;空存档位&quot;</span>)):</span><br><span class="line">                            style <span class="string">&quot;slot_time_text&quot;</span></span><br><span class="line">                        <span class="comment">## 返回存档文件保存时的save_name，如果文件不存在则返回empty。</span></span><br><span class="line">                        text FileSaveName(slot):</span><br><span class="line">                            style <span class="string">&quot;slot_name_text&quot;</span></span><br><span class="line">                        <span class="comment">## 键盘delete键删除存档</span></span><br><span class="line">                        key <span class="string">&quot;save_delete&quot;</span> action FileDelete(slot)</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 用于访问其他页面的按钮。</span></span><br><span class="line">            vbox:</span><br><span class="line">                style_prefix <span class="string">&quot;page&quot;</span></span><br><span class="line"></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                yalign <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">                hbox:</span><br><span class="line">                    xalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">                    spacing gui.page_spacing</span><br><span class="line"></span><br><span class="line">                    textbutton _(<span class="string">&quot;&lt;&quot;</span>) action FilePagePrevious() <span class="comment">## 上一页</span></span><br><span class="line">                    key <span class="string">&quot;save_page_prev&quot;</span> action FilePagePrevious() <span class="comment">## 键盘上一页翻页</span></span><br><span class="line">                    <span class="comment">## 自动存档页</span></span><br><span class="line">                    <span class="keyword">if</span> config.has_autosave:</span><br><span class="line">                        textbutton _(<span class="string">&quot;&#123;#auto_page&#125;A&quot;</span>) action FilePage(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line">                    <span class="comment">## 快速存档页</span></span><br><span class="line">                    <span class="keyword">if</span> config.has_quicksave:</span><br><span class="line">                        textbutton _(<span class="string">&quot;&#123;#quick_page&#125;Q&quot;</span>) action FilePage(<span class="string">&quot;quick&quot;</span>)</span><br><span class="line">                    <span class="comment">## 普通存档页页数</span></span><br><span class="line">                    <span class="comment">## range(1, 10) 给出 1 到 9 之间的数字。</span></span><br><span class="line">                    <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">                        textbutton <span class="string">&quot;[page]&quot;</span> action FilePage(page)</span><br><span class="line"></span><br><span class="line">                    textbutton _(<span class="string">&quot;&gt;&quot;</span>) action FilePageNext() <span class="comment">## 下一页</span></span><br><span class="line">                    key <span class="string">&quot;save_page_next&quot;</span> action FilePageNext() <span class="comment">## 键盘下一页翻页</span></span><br><span class="line">                <span class="comment">## 上传下载存档，非必须</span></span><br><span class="line">                <span class="keyword">if</span> config.has_sync:</span><br><span class="line">                    <span class="keyword">if</span> CurrentScreenName() == <span class="string">&quot;save&quot;</span>:</span><br><span class="line">                        textbutton _(<span class="string">&quot;上传同步&quot;</span>):</span><br><span class="line">                            action UploadSync()</span><br><span class="line">                            xalign <span class="number">0.5</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        textbutton _(<span class="string">&quot;下载同步&quot;</span>):</span><br><span class="line">                            action DownloadSync()</span><br><span class="line">                            xalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档读档界面所需样式</span></span><br><span class="line">style page_label <span class="keyword">is</span> gui_label</span><br><span class="line">style page_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line">style page_button <span class="keyword">is</span> gui_button</span><br><span class="line">style page_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line"></span><br><span class="line">style slot_button <span class="keyword">is</span> gui_button</span><br><span class="line">style slot_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line">style slot_time_text <span class="keyword">is</span> slot_button_text</span><br><span class="line">style slot_name_text <span class="keyword">is</span> slot_button_text</span><br><span class="line"></span><br><span class="line">style page_label:</span><br><span class="line">    xpadding <span class="number">75</span></span><br><span class="line">    ypadding <span class="number">5</span></span><br><span class="line"></span><br><span class="line">style page_label_text:</span><br><span class="line">    textalign <span class="number">0.5</span></span><br><span class="line">    layout <span class="string">&quot;subtitle&quot;</span></span><br><span class="line">    hover_color gui.hover_color</span><br><span class="line"></span><br><span class="line">style page_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style page_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>由于存档界面和读档界面并无太大差别，所以在Ren’py中，存档界面和读档界面都是调用第三个界面——<code>file_slots</code>来实现的，各部分的详细作用请查看上述注释</p><h1 id="初步自定义"><a href="#初步自定义" class="headerlink" title="初步自定义"></a>初步自定义</h1><p>现在我们删去不必要的部分，添加些背景图像，并为存档添加描述，参考代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 读取和保存屏幕 #####################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这些屏幕负责让用户保存游戏并能够再次读取。由于它们几乎完全一样，因此这两个屏</span></span><br><span class="line"><span class="comment">## 幕都是以第三个屏幕 file_slots 来实现的。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">##引入必要模块</span></span><br><span class="line"></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment">#存档界面</span></span><br><span class="line">screen save():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    <span class="comment">#存档界面背景图</span></span><br><span class="line">    add <span class="string">&quot;save_load_bg&quot;</span></span><br><span class="line">    <span class="comment">#存档界面logo</span></span><br><span class="line">    add <span class="string">&quot;gui/button/save.png&quot;</span> zoom <span class="number">1.5</span> yoffset <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    fixed:</span><br><span class="line">        <span class="comment">## 此语句确保输入控件在任意按钮执行前可以获取“enter”事件。</span></span><br><span class="line">        order_reverse <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">## 存档位网格。</span></span><br><span class="line">        grid gui.file_slot_cols gui.file_slot_rows:</span><br><span class="line">            style_prefix <span class="string">&quot;slot&quot;</span> <span class="comment">#该语句不可省略</span></span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            align (<span class="number">0.7</span>, <span class="number">0.5</span>)</span><br><span class="line">            xoffset -<span class="number">10</span></span><br><span class="line">            yoffset <span class="number">25</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line"></span><br><span class="line">                $ slot = i + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">                button:</span><br><span class="line">                    </span><br><span class="line">                    action FileAction(slot)</span><br><span class="line">                    <span class="comment">#存档按钮背景图</span></span><br><span class="line">                    background <span class="string">&quot;gui/button/slot_idle_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#存档按钮悬停图</span></span><br><span class="line">                    hover_background <span class="string">&quot;gui/button/slot_hover_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#添加屏幕快照缩略图</span></span><br><span class="line">                    add FileScreenshot(slot) xysize(<span class="number">231</span>,<span class="number">130</span>) xoffset -<span class="number">3</span> yoffset <span class="number">62</span></span><br><span class="line">                    </span><br><span class="line">                    vbox:</span><br><span class="line">                        <span class="comment">#时间</span></span><br><span class="line">                        text FileTime(slot, <span class="built_in">format</span>=_(<span class="string">&quot;&#123;#file_time&#125;%Y-%m-%d %H:%M&quot;</span>), empty=_(<span class="string">&quot;空存档&quot;</span>)):</span><br><span class="line">                            style <span class="string">&quot;slot_time_text&quot;</span></span><br><span class="line">                            size <span class="number">30</span></span><br><span class="line">                        </span><br><span class="line">                        frame:</span><br><span class="line">                            background <span class="literal">None</span></span><br><span class="line">                            xysize(<span class="number">210</span>,<span class="number">110</span>)</span><br><span class="line">                            xoffset <span class="number">230</span></span><br><span class="line">                            yoffset <span class="number">20</span></span><br><span class="line">                            <span class="comment">#存档描述</span></span><br><span class="line">                            text FileSaveName(slot):</span><br><span class="line">                                size <span class="number">25</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">#添加存档描述，正则表达式，该语句只可用于存档界面</span></span><br><span class="line">                    <span class="comment">#(大佬给出的代码为固定的快速存档，会导致普通存档无法正常存档，将其修改为FileAction(slot)，执行正确的操作)</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(_last_say_what) &gt;<span class="number">15</span>:</span><br><span class="line">                        action [SetVariable(<span class="string">&quot;save_name&quot;</span>, re.sub(<span class="string">&#x27;(\&#123;.*?\&#125;)|(\\\w)|\s&#x27;</span>, <span class="string">&#x27;&#x27;</span>, _last_say_what[:<span class="number">15</span>])+<span class="string">&quot;...&quot;</span>),FileAction(slot) ]</span><br><span class="line">                    <span class="keyword">elif</span> <span class="built_in">len</span>(_last_say_what) &gt; <span class="number">0</span>:</span><br><span class="line">                        action [SetVariable(<span class="string">&quot;save_name&quot;</span>, re.sub(<span class="string">&#x27;(\&#123;.*?\&#125;)|(\\\w)|\s&#x27;</span>, <span class="string">&#x27;&#x27;</span>, _last_say_what)),FileAction(slot) ]</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        action FileAction(slot)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## 用于访问其他页面的按钮。</span></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;page&quot;</span></span><br><span class="line"></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">0.1</span></span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            <span class="keyword">if</span> config.has_autosave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#auto_page&#125;A&quot;</span>) action FilePage(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> config.has_quicksave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#quick_page&#125;Q&quot;</span>) action FilePage(<span class="string">&quot;quick&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page1.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">1</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page2.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">2</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page3.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">3</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page4.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">4</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page5.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">5</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page6.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">6</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page7.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">7</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page8.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">8</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page9.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.05</span>, <span class="number">0.95</span>)</span><br><span class="line">        text_color <span class="string">&quot;#000&quot;</span></span><br><span class="line">        text_size <span class="number">50</span></span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line"><span class="comment">#读档界面</span></span><br><span class="line">screen load():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    <span class="comment">#读档界面背景图</span></span><br><span class="line">    add <span class="string">&quot;save_load_bg&quot;</span></span><br><span class="line">    <span class="comment">#读档界面logo</span></span><br><span class="line">    add <span class="string">&quot;gui/button/load.png&quot;</span> zoom <span class="number">1.5</span> yoffset <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    fixed:</span><br><span class="line">        <span class="comment">## 此语句确保输入控件在任意按钮执行前可以获取“enter”事件。</span></span><br><span class="line">        order_reverse <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        <span class="comment">## 存档位网格。</span></span><br><span class="line">        grid gui.file_slot_cols gui.file_slot_rows:</span><br><span class="line">            style_prefix <span class="string">&quot;slot&quot;</span> <span class="comment">#该语句不可省略</span></span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            align (<span class="number">0.7</span>, <span class="number">0.5</span>)</span><br><span class="line">            xoffset -<span class="number">10</span></span><br><span class="line">            yoffset <span class="number">25</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line"></span><br><span class="line">                $ slot = i + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">                button:</span><br><span class="line">                    </span><br><span class="line">                    action FileAction(slot)</span><br><span class="line">                    <span class="comment">#存档按钮背景图</span></span><br><span class="line">                    background <span class="string">&quot;gui/button/slot_idle_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#存档按钮悬停图</span></span><br><span class="line">                    hover_background <span class="string">&quot;gui/button/slot_hover_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#添加屏幕快照缩略图</span></span><br><span class="line">                    add FileScreenshot(slot) xysize(<span class="number">231</span>,<span class="number">130</span>) xoffset -<span class="number">3</span> yoffset <span class="number">62</span></span><br><span class="line">                    </span><br><span class="line">                    vbox:</span><br><span class="line">                        <span class="comment">#时间</span></span><br><span class="line">                        text FileTime(slot, <span class="built_in">format</span>=_(<span class="string">&quot;&#123;#file_time&#125;%Y-%m-%d %H:%M&quot;</span>), empty=_(<span class="string">&quot;空存档&quot;</span>)):</span><br><span class="line">                            style <span class="string">&quot;slot_time_text&quot;</span></span><br><span class="line">                            size <span class="number">30</span></span><br><span class="line">                        </span><br><span class="line">                        frame:</span><br><span class="line">                            background <span class="literal">None</span></span><br><span class="line">                            xysize(<span class="number">210</span>,<span class="number">110</span>)</span><br><span class="line">                            xoffset <span class="number">230</span></span><br><span class="line">                            yoffset <span class="number">20</span></span><br><span class="line">                            <span class="comment">#存档描述</span></span><br><span class="line">                            text FileSaveName(slot):</span><br><span class="line">                                size <span class="number">25</span></span><br><span class="line">                    <span class="comment">#从标题界面进入读档界面无法获取_last_say_what,游戏会报错，因此将其删除</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">## 用于访问其他页面的按钮。</span></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;page&quot;</span></span><br><span class="line"></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">0.1</span></span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            <span class="keyword">if</span> config.has_autosave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#auto_page&#125;A&quot;</span>) action FilePage(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> config.has_quicksave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#quick_page&#125;Q&quot;</span>) action FilePage(<span class="string">&quot;quick&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page1.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">1</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page2.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">2</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page3.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">3</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page4.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">4</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page5.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">5</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page6.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">6</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page7.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">7</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page8.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">8</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page9.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.05</span>, <span class="number">0.95</span>)</span><br><span class="line">        text_color <span class="string">&quot;#000&quot;</span></span><br><span class="line">        text_size <span class="number">50</span></span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style page_label <span class="keyword">is</span> gui_label</span><br><span class="line">style page_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line">style page_button <span class="keyword">is</span> gui_button</span><br><span class="line">style page_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line"></span><br><span class="line">style slot_button <span class="keyword">is</span> gui_button</span><br><span class="line">style slot_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line">style slot_time_text <span class="keyword">is</span> slot_button_text</span><br><span class="line">style slot_name_text <span class="keyword">is</span> slot_button_text</span><br><span class="line"></span><br><span class="line">style page_label:</span><br><span class="line">    xpadding <span class="number">75</span></span><br><span class="line">    ypadding <span class="number">5</span></span><br><span class="line"></span><br><span class="line">style page_label_text:</span><br><span class="line">    textalign <span class="number">0.5</span></span><br><span class="line">    layout <span class="string">&quot;subtitle&quot;</span></span><br><span class="line">    hover_color gui.hover_color</span><br><span class="line"></span><br><span class="line">style page_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style page_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br></pre></td></tr></table></figure></p><div class="note info modern"><p>由于我是将存档界面和读档界面分开编写的，所以这部分代码仅供参考，如果你想沿用源代码，请自行修改</p></div><h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1><p>其实到上一步我们的自定义就已经差不多完成了，但我们还可以在完善一下</p><h2 id="存档编号"><a href="#存档编号" class="headerlink" title="存档编号"></a>存档编号</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#存档编号</span></span><br><span class="line">text <span class="string">&quot;NO.&quot;</span>+FileSlotName(slot, gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line">    align (<span class="number">1.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    size <span class="number">30</span></span><br></pre></td></tr></table></figure><h2 id="最新存档标识"><a href="#最新存档标识" class="headerlink" title="最新存档标识"></a>最新存档标识</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#最新存档标识(只记录普通存档页)</span></span><br><span class="line"><span class="keyword">if</span> FileNewest(slot):</span><br><span class="line">    add <span class="string">&quot;gui/button/newest.png&quot;</span> align (<span class="number">0.75</span>, <span class="number">0.0</span>)</span><br></pre></td></tr></table></figure><div class="note info modern"><p>可添加一个transform组件，使最新存档标识连续闪烁</p></div><h2 id="删除存档按钮"><a href="#删除存档按钮" class="headerlink" title="删除存档按钮"></a>删除存档按钮</h2><p>源代码中使用键盘delete键删除存档并不具备标识度，我们将其改为更明显的图像按钮，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除存档</span></span><br><span class="line">imagebutton:</span><br><span class="line">    xysize(<span class="number">120</span>,<span class="number">30</span>)</span><br><span class="line">    align((<span class="number">1.0</span>, <span class="number">1.0</span>))</span><br><span class="line">    idle <span class="string">&quot;gui/button/delate.png&quot;</span></span><br><span class="line">    hove<span class="string">r&quot;gui/button/delate_hover.png&quot;</span></span><br><span class="line">    action FileDelete(slot)</span><br></pre></td></tr></table></figure></p><h1 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h1><p>别忘了修改<code>gui.rpy</code>文件中220行左右如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 存档按钮 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 存档按钮是一种特殊的按钮。它包含一个缩略图和描述该存档内容的文本。存档使用</span></span><br><span class="line"><span class="comment">## gui/button 中的图像文件，就像其他类型的按钮一样。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档位按钮。</span></span><br><span class="line">define gui.slot_button_width = <span class="number">475</span></span><br><span class="line">define gui.slot_button_height = <span class="number">227</span></span><br><span class="line">define gui.slot_button_borders = Borders(<span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>)</span><br><span class="line">define gui.slot_button_text_size = <span class="number">21</span></span><br><span class="line">define gui.slot_button_text_xalign = <span class="number">0.5</span></span><br><span class="line">define gui.slot_button_text_idle_color = gui.idle_small_color</span><br><span class="line">define gui.slot_button_text_selected_idle_color = gui.selected_color</span><br><span class="line">define gui.slot_button_text_selected_hover_color = gui.hover_color</span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档所用缩略图的宽度和高度。</span></span><br><span class="line">define config.thumbnail_width = <span class="number">384</span></span><br><span class="line">define config.thumbnail_height = <span class="number">216</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档网格中的列数和行数。</span></span><br><span class="line">define gui.file_slot_cols = <span class="number">3</span></span><br><span class="line">define gui.file_slot_rows = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 定位和间距 #######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这些变量控制各种用户界面元素的位置和间距。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 导航按钮左侧相对于屏幕左侧的位置。</span></span><br><span class="line">define gui.navigation_xpos = <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 快进指示器的垂直位置。</span></span><br><span class="line">define gui.skip_ypos = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 通知界面的垂直位置。</span></span><br><span class="line">define gui.notify_ypos = <span class="number">68</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 菜单选项之间的间距。</span></span><br><span class="line">define gui.choice_spacing = <span class="number">33</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标题菜单和游戏菜单的导航部分中的按钮。</span></span><br><span class="line">define gui.navigation_spacing = <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 控制设置项目之间的间隔量。</span></span><br><span class="line">define gui.pref_spacing = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 控制设置按钮之间的间距。</span></span><br><span class="line">define gui.pref_button_spacing = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档页面按钮之间的间距。</span></span><br><span class="line">define gui.page_spacing = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档按钮之间的间距。</span></span><br><span class="line">define gui.slot_spacing = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标题菜单文本的位置。</span></span><br><span class="line">define gui.main_menu_text_xalign = <span class="number">1.0</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">Ren&#39;py引擎中存档读档界面的一些修改，包括添加存档描述，删除存档等。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="视频教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Ren&#39;py" scheme="http://lucylcarus.github.io/tags/Ren-py/"/>
    
    <category term="GALGAME引擎" scheme="http://lucylcarus.github.io/tags/GALGAME%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>Ren&#39;py自制插件</title>
    <link href="http://lucylcarus.github.io/posts/3447be97.html"/>
    <id>http://lucylcarus.github.io/posts/3447be97.html</id>
    <published>2024-10-25T07:31:00.000Z</published>
    <updated>2024-10-28T15:12:30.050Z</updated>
    
    <content type="html"><![CDATA[<h1 id="立绘动画效果"><a href="#立绘动画效果" class="headerlink" title="立绘动画效果"></a>立绘动画效果</h1><p>包含十余种通用动画效果和两种特殊动画效果<br><a href="https://github.com/lucylcarus/Plug-ins/archive/refs/heads/master.zip">点我下载</a></p>]]></content>
    
    
    <summary type="html">Ren&#39;py引擎中一些实用插件，不定期更新。</summary>
    
    
    
    <category term="插件" scheme="http://lucylcarus.github.io/categories/%E6%8F%92%E4%BB%B6/"/>
    
    
    <category term="Ren&#39;py" scheme="http://lucylcarus.github.io/tags/Ren-py/"/>
    
    <category term="GALGAME引擎" scheme="http://lucylcarus.github.io/tags/GALGAME%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>Ren&#39;py say界面修改</title>
    <link href="http://lucylcarus.github.io/posts/9312ffd8.html"/>
    <id>http://lucylcarus.github.io/posts/9312ffd8.html</id>
    <published>2024-10-20T12:14:39.000Z</published>
    <updated>2024-11-03T14:10:11.972Z</updated>
    
    <content type="html"><![CDATA[<p><strong>本文所有配置均位于<code>screns.rpy</code>文件中</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://doc.renpy.cn/zh-CN/screen_actions.html#tooltips">悬停提示</a></p><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1jpykYPEuW&cid=26444760861&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="底部菜单自定义"><a href="#底部菜单自定义" class="headerlink" title="底部菜单自定义"></a>底部菜单自定义</h1><p>打开<code>screens.rpy</code>文件，你会在228行左右看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line"></span><br><span class="line">            xalign <span class="number">0.5</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;回退&quot;</span>) action Rollback()</span><br><span class="line">            textbutton _(<span class="string">&quot;历史&quot;</span>) action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;快进&quot;</span>) action Skip() alternate Skip(fast=<span class="literal">True</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;自动&quot;</span>) action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;保存&quot;</span>) action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;快存&quot;</span>) action QuickSave()</span><br><span class="line">            textbutton _(<span class="string">&quot;快读&quot;</span>) action QuickLoad()</span><br><span class="line">            textbutton _(<span class="string">&quot;设置&quot;</span>) action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>这里是游戏内的底部菜单，也可以称为快捷菜单，我们对该界面的修改基本只是将<code>textbutton</code>替换为<code>imagebutton</code>，<code>action</code>行为可以不用修改，下面给出示例代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line">            <span class="comment">#存档按钮</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/save.png&quot;</span></span><br><span class="line">                <span class="comment">#可自行添加hover等属性</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">            <span class="comment">#读档按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/load.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;load&#x27;</span>)</span><br><span class="line">            <span class="comment">#快速存档    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qsave.png&quot;</span></span><br><span class="line">                action QuickSave()</span><br><span class="line">            <span class="comment">#快速读档    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qload.png&quot;</span></span><br><span class="line">                action QuickLoad()</span><br><span class="line">            <span class="comment">#设置按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                yoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;gui/set.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">            <span class="comment">#自动按钮</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/auto.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">            <span class="comment">#快进按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/skip.png&quot;</span></span><br><span class="line">                action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">            <span class="comment">#历史按钮   </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/his.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">            <span class="comment">#隐藏对话框和底部菜单按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/hide.png&quot;</span></span><br><span class="line">                action Call(<span class="string">&quot;_hide_windows&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line">                </span><br></pre></td></tr></table></figure><br>相比于源代码，我们添加了隐藏对话框和底部菜单的按钮，删除了用处不大的回退功能，并优化了底部菜单的位置和间距等属性</p><h1 id="底部菜单优化"><a href="#底部菜单优化" class="headerlink" title="底部菜单优化"></a>底部菜单优化</h1><h2 id="悬停提示"><a href="#悬停提示" class="headerlink" title="悬停提示"></a>悬停提示</h2><p>其实到上一步我们的自定义就已经做的差不多了，但我们还可以做一些悬停提示的优化，使用<code>tooltip</code>我们可以很轻松地达到该效果，示例代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/save.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/load.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;load&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qsave.png&quot;</span></span><br><span class="line">                action QuickSave()</span><br><span class="line">                tooltip <span class="string">&quot;快速存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qload.png&quot;</span></span><br><span class="line">                action QuickLoad()</span><br><span class="line">                tooltip <span class="string">&quot;快速读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                yoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;gui/set.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;设置&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/auto.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;自动&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/skip.png&quot;</span></span><br><span class="line">                action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">                tooltip <span class="string">&quot;快进&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/his.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;回顾&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/hide.png&quot;</span></span><br><span class="line">                action Call(<span class="string">&quot;_hide_windows&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;隐藏对话框&quot;</span></span><br><span class="line"></span><br><span class="line">            $ tooltip = GetTooltip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> tooltip:</span><br><span class="line"></span><br><span class="line">        nearrect:</span><br><span class="line">            focus <span class="string">&quot;tooltip&quot;</span></span><br><span class="line">            prefer_top <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">            frame:</span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                text tooltip</span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br></pre></td></tr></table></figure></p><h2 id="美化-amp-动画"><a href="#美化-amp-动画" class="headerlink" title="美化&amp;动画"></a>美化&amp;动画</h2><p>虽然最后呈现的效果是不错，但默认效果还是有点太过单调，同时，快进按钮没有区分可用/不可用状态，我们稍微修改一下代码，优化一下表现效果，代码示例如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/save.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/load.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;load&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qsave.png&quot;</span></span><br><span class="line">                action QuickSave()</span><br><span class="line">                tooltip <span class="string">&quot;快速存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qload.png&quot;</span></span><br><span class="line">                action QuickLoad()</span><br><span class="line">                tooltip <span class="string">&quot;快速读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                yoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;gui/set.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;设置&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/auto.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;自动&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/skip.png&quot;</span></span><br><span class="line">                insensitive <span class="string">&quot;gui/skip_off.png&quot;</span><span class="comment">#修改图像，将其不透明度改为50%</span></span><br><span class="line">                action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">                tooltip <span class="string">&quot;快进&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/his.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;回顾&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/hide.png&quot;</span></span><br><span class="line">                action Call(<span class="string">&quot;_hide_windows&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;隐藏对话框&quot;</span></span><br><span class="line"></span><br><span class="line">            $ tooltip = GetTooltip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> tooltip:</span><br><span class="line"></span><br><span class="line">        nearrect:</span><br><span class="line">            focus <span class="string">&quot;tooltip&quot;</span></span><br><span class="line">            prefer_top <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="literal">None</span></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                text tooltip at tip size <span class="number">25</span> color <span class="string">&quot;#fff&quot;</span> outlines [(<span class="number">2</span>,<span class="string">&quot;#35ceff&quot;</span>,<span class="number">0</span>,<span class="number">0</span>)] </span><br><span class="line">            </span><br><span class="line">transform tip:</span><br><span class="line">    yoffset <span class="number">10</span></span><br><span class="line">    alpha <span class="number">0.0</span></span><br><span class="line">    parallel:</span><br><span class="line">        easein <span class="number">0.5</span> yoffset <span class="number">5</span></span><br><span class="line">    parallel:</span><br><span class="line">        easein <span class="number">0.5</span> alpha <span class="number">1.0</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br></pre></td></tr></table></figure></p><h1 id="对话框-textbox-和姓名框-namebox"><a href="#对话框-textbox-和姓名框-namebox" class="headerlink" title="对话框(textbox)和姓名框(namebox)"></a>对话框(textbox)和姓名框(namebox)</h1><p>打开<code>gui</code>文件夹，我们可以在这里看到对话框<code>textbox</code>和姓名框<code>namebox</code>两张图像，建议先拷贝一份留作备用，将我们的素材导入该文件夹进行同名替换即可</p><h2 id="问题1-对话框尺寸不合适"><a href="#问题1-对话框尺寸不合适" class="headerlink" title="问题1: 对话框尺寸不合适"></a>问题1: 对话框尺寸不合适</h2><p>解答：请鼠标右击-&gt;属性，修改对话框分辨率，建议与原对话框尺寸保持一致</p><h2 id="问题2-姓名框表现效果不佳"><a href="#问题2-姓名框表现效果不佳" class="headerlink" title="问题2: 姓名框表现效果不佳"></a>问题2: 姓名框表现效果不佳</h2><p>解答: 修改<code>namebox</code>的样式和<code>text</code>显示位置</p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>以我的代码为例，你可以在<code>screens.rpy</code>文件的85行左右看到相关代码，修改后代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">## 游戏内屏幕</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 对话屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 对话屏幕用于向用户显示对话。它需要两个参数，who 和 what，分别是叙述角色的名字</span></span><br><span class="line"><span class="comment">## 和所叙述的文本。（如果没有名字，参数 who 可以是 None。）</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 此屏幕必须创建一个 id 为 what 的文本可视控件，因为 Ren&#x27;Py 使用它来管理文本显</span></span><br><span class="line"><span class="comment">## 示。它还可以创建 id 为 who 和 id 为 window 的可视控件来应用样式属性。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://www.renpy.cn/doc/screen_special.html#say</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">screen say(who, what):</span><br><span class="line">    style_prefix <span class="string">&quot;say&quot;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    window:</span><br><span class="line">        <span class="built_in">id</span> <span class="string">&quot;window&quot;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> who <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">            window:</span><br><span class="line">                <span class="built_in">id</span> <span class="string">&quot;namebox&quot;</span></span><br><span class="line">                style <span class="string">&quot;namebox&quot;</span></span><br><span class="line">                text who <span class="built_in">id</span> <span class="string">&quot;who&quot;</span> xoffset <span class="number">45</span> yoffset -<span class="number">8</span> </span><br><span class="line">                <span class="comment">#由于角色名字会从namebox的左上角展示，为让其适应namebox的表现效果，对文字进行位置调整</span></span><br><span class="line">        </span><br><span class="line">        text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 如果有对话框头像，会将其显示在文本之上。请不要在手机界面下显示这个，因为</span></span><br><span class="line">    <span class="comment">## 没有空间。</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> renpy.variant(<span class="string">&quot;small&quot;</span>):</span><br><span class="line">        add SideImage() xalign <span class="number">0.0</span> yalign <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 通过 Character 对象使名称框可用于样式化。</span></span><br><span class="line">init python:</span><br><span class="line">    config.character_id_prefixes.append(<span class="string">&#x27;namebox&#x27;</span>)</span><br><span class="line"></span><br><span class="line">style window <span class="keyword">is</span> default</span><br><span class="line">style say_label <span class="keyword">is</span> default</span><br><span class="line">style say_dialogue <span class="keyword">is</span> default</span><br><span class="line">style say_thought <span class="keyword">is</span> say_dialogue</span><br><span class="line"></span><br><span class="line">style namebox <span class="keyword">is</span> default</span><br><span class="line">style namebox_label <span class="keyword">is</span> say_label</span><br><span class="line"></span><br><span class="line"><span class="comment">#对话框样式</span></span><br><span class="line">style window:</span><br><span class="line">    xalign <span class="number">0.5</span></span><br><span class="line">    xfill <span class="literal">True</span></span><br><span class="line">    yalign gui.textbox_yalign</span><br><span class="line">    ysize gui.textbox_height</span><br><span class="line"></span><br><span class="line">    background Image(<span class="string">&quot;gui/textbox.png&quot;</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">1.0</span>)</span><br><span class="line"><span class="comment">#姓名框样式</span></span><br><span class="line"><span class="comment">#由于namebox的pos被占用，我们使用offest来调整namebox的位置，同时将namebox的size改为固定，防止其自适应角色名字长短变化</span></span><br><span class="line">style namebox:</span><br><span class="line">    xpos gui.name_xpos</span><br><span class="line">    xanchor gui.name_xalign</span><br><span class="line">    xsize <span class="number">238</span></span><br><span class="line">    ypos gui.name_ypos</span><br><span class="line">    yoffset -<span class="number">60</span></span><br><span class="line">    ysize <span class="number">72</span></span><br><span class="line"></span><br><span class="line">    background Frame(<span class="string">&quot;gui/namebox.png&quot;</span>, gui.namebox_borders, tile=gui.namebox_tile, xalign=gui.name_xalign)</span><br><span class="line">    padding gui.namebox_borders.padding</span><br><span class="line"></span><br><span class="line">style say_label:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;name&quot;</span>, accent=<span class="literal">True</span>)</span><br><span class="line">    xalign gui.name_xalign</span><br><span class="line">    yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">style say_dialogue:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;dialogue&quot;</span>)</span><br><span class="line"></span><br><span class="line">    xpos gui.dialogue_xpos</span><br><span class="line">    xsize gui.dialogue_width</span><br><span class="line">    ypos gui.dialogue_ypos</span><br><span class="line"></span><br><span class="line">    adjust_spacing <span class="literal">False</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">Ren&#39;py引擎中底部菜单和对话框的一些修改，包括样式修改，添加动画等。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="视频教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Ren&#39;py" scheme="http://lucylcarus.github.io/tags/Ren-py/"/>
    
    <category term="GALGAME引擎" scheme="http://lucylcarus.github.io/tags/GALGAME%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>MySQL语法使用(三)</title>
    <link href="http://lucylcarus.github.io/posts/4921db1e.html"/>
    <id>http://lucylcarus.github.io/posts/4921db1e.html</id>
    <published>2024-10-16T08:27:09.000Z</published>
    <updated>2024-11-04T12:13:04.422Z</updated>
    
    <content type="html"><![CDATA[<h1 id="单关系数据查询"><a href="#单关系数据查询" class="headerlink" title="单关系数据查询"></a>单关系数据查询</h1><h2 id="单关系数据查询结构"><a href="#单关系数据查询结构" class="headerlink" title="单关系数据查询结构"></a>单关系数据查询结构</h2><p>数据查询是数据库中最常用的操作。SQL提供<code>SELECT</code>语句，用户通过查询操作可得到所需的信息<br>关系表的<code>SELECT</code>语句一般语法如下<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>] <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">AS</span> 别名] [&#123;,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">AS</span> 别名]&#125;]</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [[<span class="keyword">AS</span>] 表别名]</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>检索条件<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]]</span><br><span class="line">[LIMIT子句]</span><br></pre></td></tr></table></figure><br><code>SELECT</code>子句从列的角度进行投影操作，指定要在查询结果中显示的字段名。用户也可以用关键字<code>AS</code>为字段名指定别名<br>关键字<code>ALL</code>表示所有元组，关键字<code>DISTINCT</code>表示消除查询结果中的重复元组<br><code>FROM</code>子句指定要查询的表明或视图名，如果有多个，应用逗号隔开<br><code>WHERE</code>子句从行的角度进行选取操作，只有满足条件的元组才会出现在查询结果中<br><code>GROUP BY</code>子句将查询结果按照其后的<code>&lt;字段名&gt;</code>的值进行分组<br><code>HAVING</code>子句不能单据存在，必须跟在<code>GROUP BY</code>子句后面<br><code>ORDER BY</code>子句用于对查询结果进行排序，<code>ASC</code>为升序，<code>DESC</code>为降序<br><code>LIMIT</code>子句限制查询结果行数</p><h2 id="无条件查询"><a href="#无条件查询" class="headerlink" title="无条件查询"></a>无条件查询</h2><p>无条件查询只包含<code>SELECT……FROM……</code>语句</p><h3 id="查询表中指定字段名"><a href="#查询表中指定字段名" class="headerlink" title="查询表中指定字段名"></a>查询表中指定字段名</h3><blockquote><p>例:查询student表中学生姓名<br>SELECT sname AS 学生姓名<br>FROM student;</p></blockquote><h3 id="查询表中全部字段名"><a href="#查询表中全部字段名" class="headerlink" title="查询表中全部字段名"></a>查询表中全部字段名</h3><blockquote><p>例:查询student表中全部字段名<br>SELECT *<br>FROM student;</p></blockquote><h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p>条件查询需要用到<code>WHERE</code>子句指定查询条件<br>查询条件中，字段名与字段名之间，或字段名与常数之间，通常使用比较运算符连接<br>常用比较运算符如下</p><div class="table-container"><table><thead><tr><th>运算符</th><th>含义</th></tr></thead><tbody><tr><td>=、&gt;、&lt;、&gt;=、&lt;=、!=、&lt;&gt;</td><td>比较大小</td></tr><tr><td>AND、OR、NOT</td><td>多重条件</td></tr><tr><td>BETWEEN AND、NOT BETWEEN AND</td><td>确定范围</td></tr><tr><td>IN、NOT IN</td><td>确定集合</td></tr><tr><td>LIKE、NOT LIKE</td><td>字符匹配</td></tr><tr><td>IS NULL、IS NOT NULL</td><td>空值</td></tr></tbody></table></div><div class="note info modern"><p>比较大小中<code>!=</code>和<code>&lt;&gt;</code>表示不等于<br>多重条件中，<code>AND</code>可表示为<code>&amp;&amp;</code>，<code>OR</code>可表示为<code>||</code>，<code>NOT</code>可表示为<code>!</code></p></div><h3 id="比较大小"><a href="#比较大小" class="headerlink" title="比较大小"></a>比较大小</h3><blockquote><p>例:查询student表中已成年学生<br>SELECT *<br>FROM student<br>WHERE age&gt;=18;</p></blockquote><h3 id="多重条件"><a href="#多重条件" class="headerlink" title="多重条件"></a>多重条件</h3><blockquote><p>例:查询student表中已成年且性别为女的学生<br>SELECT *<br>FROM student<br>WHERE age&gt;=18 AND sex=”女”;</p></blockquote><h3 id="确定范围"><a href="#确定范围" class="headerlink" title="确定范围"></a>确定范围</h3><blockquote><p>例:查询student表中年龄段在18-20的学生<br>SELECT *<br>FROM student<br>WHERE age EBETWEEN 18 AND 20;</p></blockquote><h3 id="确定集合"><a href="#确定集合" class="headerlink" title="确定集合"></a>确定集合</h3><blockquote><p>例:查询student表中所学专业为计算机的学生<br>SELECT *<br>FROM student<br>WHERE major=”计算机”;</p></blockquote><h3 id="字符匹配"><a href="#字符匹配" class="headerlink" title="字符匹配"></a>字符匹配</h3><p>利用通配符，可以进行模糊查询<br>常用通配符如下</p><div class="table-container"><table><thead><tr><th>通配符</th><th>功能</th></tr></thead><tbody><tr><td>%</td><td>代表0个或多个字符</td></tr><tr><td>_</td><td>代表一个字符</td></tr><tr><td>[ ]</td><td>表示在某一范围的字符</td></tr><tr><td>[^]</td><td>表示不在某一范围的字符</td></tr></tbody></table></div><blockquote><p>例:查询student表中学号带有数字7的学生<br>SELECT *<br>FROM student<br>WHERE sno LIKE “%7%”;</p></blockquote><h3 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h3><blockquote><p>例:查询student表中未选定专业的学生<br>SELECT *<br>FROM student<br>WHERE major IS NULL;</p></blockquote><h2 id="聚合函数查询"><a href="#聚合函数查询" class="headerlink" title="聚合函数查询"></a>聚合函数查询</h2><p>SQL提供了许多使用的聚合函数，常用聚合函数如下</p><div class="table-container"><table><thead><tr><th>函数名称</th><th>功能</th></tr></thead><tbody><tr><td>AVG</td><td>按列计算平均值</td></tr><tr><td>SUM</td><td>按列计算值的总和</td></tr><tr><td>MAX</td><td>求一列中的最大值</td></tr><tr><td>MIN</td><td>求一列中的最小值</td></tr><tr><td>COUNT</td><td>按列值统计个数</td></tr></tbody></table></div><blockquote><p>例:查询student表中年龄最小的学生<br>SELECT MIN(age)<br>FROM student;</p></blockquote><h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><blockquote><p>例:查询student表中已成年的学生，按性别分组<br>SELECT *<br>FROM student<br>WHERE age&gt;=18<br>GROUP BY sex;</p></blockquote><h2 id="查询结果排序"><a href="#查询结果排序" class="headerlink" title="查询结果排序"></a>查询结果排序</h2><blockquote><p>例:查询student表中已成年的学生，按年龄大小降序排列<br>SELECT *<br>FROM student<br>WHERE age&gt;=18<br>ORDER BY age DESC;</p></blockquote><h2 id="限制查询结果数量"><a href="#限制查询结果数量" class="headerlink" title="限制查询结果数量"></a>限制查询结果数量</h2><blockquote><p>例:查询student表中已成年的学生，按年龄大小降序排列，只显示前三人<br>SELECT *<br>FROM student<br>WHERE age&gt;=18<br>ORDER BY age DESC<br>LIMIT 3;</p></blockquote>]]></content>
    
    
    <summary type="html">MySQL是最流行的关系型数据库管理系统，在WEB应用方面MySQL是最好的关系数据库管理系统应用软件之一。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="数据库" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="http://lucylcarus.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Ren&#39;py 标题菜单界面</title>
    <link href="http://lucylcarus.github.io/posts/e6e80026.html"/>
    <id>http://lucylcarus.github.io/posts/e6e80026.html</id>
    <published>2024-10-13T12:14:39.000Z</published>
    <updated>2024-10-17T08:21:11.208Z</updated>
    
    <content type="html"><![CDATA[<p><strong>本文主要修改的文件为<code>screens.rpy</code>，次要修改文件为<code>gui.rpy</code>以及<code>script.rpy</code></strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://zhuanlan.zhihu.com/p/346838182">被诅咒的章鱼大佬的Ren’py教程</a></p><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1QryAYmE6C&cid=26326863249&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="背景图修改"><a href="#背景图修改" class="headerlink" title="背景图修改"></a>背景图修改</h1><p>打开<code>gui.rpy</code>，在86行左右可以看到标题菜单界面，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 标题和游戏菜单 #####################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标题菜单和游戏菜单使用的图像。</span></span><br><span class="line">define gui.main_menu_background = <span class="string">&quot;gui/main_menu.png&quot;</span></span><br><span class="line">define gui.game_menu_background = <span class="string">&quot;gui/game_menu.png&quot;</span></span><br></pre></td></tr></table></figure><br>打开<code>screens.rpy</code>,在335行左右可以看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 标题菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 用于在 Ren&#x27;Py 启动时显示标题菜单。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://www.renpy.cn/doc/screen_special.html#main-menu</span></span><br><span class="line"></span><br><span class="line">screen main_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 此语句可确保替换掉任何其他菜单屏幕。</span></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    add gui.main_menu_background</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 此空框可使标题菜单变暗。</span></span><br><span class="line">    frame:</span><br><span class="line">        style <span class="string">&quot;main_menu_frame&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## use 语句将其他的屏幕包含进此屏幕。标题屏幕的实际内容在导航屏幕中。</span></span><br><span class="line">    use navigation</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> gui.show_name:</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            style <span class="string">&quot;main_menu_vbox&quot;</span></span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;[config.name!t]&quot;</span>:</span><br><span class="line">                style <span class="string">&quot;main_menu_title&quot;</span></span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;[config.version]&quot;</span>:</span><br><span class="line">                style <span class="string">&quot;main_menu_version&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style main_menu_frame <span class="keyword">is</span> empty</span><br><span class="line">style main_menu_vbox <span class="keyword">is</span> vbox</span><br><span class="line">style main_menu_text <span class="keyword">is</span> gui_text</span><br><span class="line">style main_menu_title <span class="keyword">is</span> main_menu_text</span><br><span class="line">style main_menu_version <span class="keyword">is</span> main_menu_text</span><br><span class="line"></span><br><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    background <span class="string">&quot;gui/overlay/main_menu.png&quot;</span></span><br><span class="line"></span><br><span class="line">style main_menu_vbox:</span><br><span class="line">    xalign <span class="number">1.0</span></span><br><span class="line">    xoffset -<span class="number">30</span></span><br><span class="line">    xmaximum <span class="number">1200</span></span><br><span class="line">    yalign <span class="number">1.0</span></span><br><span class="line">    yoffset -<span class="number">30</span></span><br><span class="line"></span><br><span class="line">style main_menu_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;main_menu&quot;</span>, accent=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">style main_menu_title:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;title&quot;</span>)</span><br><span class="line"></span><br><span class="line">style main_menu_version:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;version&quot;</span>)</span><br></pre></td></tr></table></figure><br>另外在<code>screens.rpy</code>文件中,在396行左右可以看到游戏菜单界面，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 游戏菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 此屏幕列出了游戏菜单的基本共同结构。可使用屏幕标题调用，并显示背景、标题和导</span></span><br><span class="line"><span class="comment">## 航菜单。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## scroll 参数可以是 None，也可以是 viewport 或 vpgrid。此屏幕旨在与一个或多个子</span></span><br><span class="line"><span class="comment">## 屏幕同时使用，这些子屏幕将被嵌入（放置）在其中。</span></span><br><span class="line"></span><br><span class="line">screen game_menu(title, scroll=<span class="literal">None</span>, yinitial=<span class="number">0.0</span>, spacing=<span class="number">0</span>):</span><br><span class="line"></span><br><span class="line">    style_prefix <span class="string">&quot;game_menu&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> main_menu:</span><br><span class="line">        add gui.main_menu_background</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        add gui.game_menu_background</span><br><span class="line"></span><br><span class="line">    frame:</span><br><span class="line">        style <span class="string">&quot;game_menu_outer_frame&quot;</span></span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 导航部分的预留空间。</span></span><br><span class="line">            frame:</span><br><span class="line">                style <span class="string">&quot;game_menu_navigation_frame&quot;</span></span><br><span class="line"></span><br><span class="line">            frame:</span><br><span class="line">                style <span class="string">&quot;game_menu_content_frame&quot;</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> scroll == <span class="string">&quot;viewport&quot;</span>:</span><br><span class="line"></span><br><span class="line">                    viewport:</span><br><span class="line">                        yinitial yinitial</span><br><span class="line">                        scrollbars <span class="string">&quot;vertical&quot;</span></span><br><span class="line">                        mousewheel <span class="literal">True</span></span><br><span class="line">                        draggable <span class="literal">True</span></span><br><span class="line">                        pagekeys <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        side_yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        vbox:</span><br><span class="line">                            spacing spacing</span><br><span class="line"></span><br><span class="line">                            transclude</span><br><span class="line"></span><br><span class="line">                <span class="keyword">elif</span> scroll == <span class="string">&quot;vpgrid&quot;</span>:</span><br><span class="line"></span><br><span class="line">                    vpgrid:</span><br><span class="line">                        cols <span class="number">1</span></span><br><span class="line">                        yinitial yinitial</span><br><span class="line"></span><br><span class="line">                        scrollbars <span class="string">&quot;vertical&quot;</span></span><br><span class="line">                        mousewheel <span class="literal">True</span></span><br><span class="line">                        draggable <span class="literal">True</span></span><br><span class="line">                        pagekeys <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        side_yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        spacing spacing</span><br><span class="line"></span><br><span class="line">                        transclude</span><br><span class="line"></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">                    transclude</span><br><span class="line"></span><br><span class="line">    use navigation</span><br><span class="line"></span><br><span class="line">    textbutton _(<span class="string">&quot;返回&quot;</span>):</span><br><span class="line">        style <span class="string">&quot;return_button&quot;</span></span><br><span class="line"></span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line">    label title</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> main_menu:</span><br><span class="line">        key <span class="string">&quot;game_menu&quot;</span> action ShowMenu(<span class="string">&quot;main_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style game_menu_outer_frame <span class="keyword">is</span> empty</span><br><span class="line">style game_menu_navigation_frame <span class="keyword">is</span> empty</span><br><span class="line">style game_menu_content_frame <span class="keyword">is</span> empty</span><br><span class="line">style game_menu_viewport <span class="keyword">is</span> gui_viewport</span><br><span class="line">style game_menu_side <span class="keyword">is</span> gui_side</span><br><span class="line">style game_menu_scrollbar <span class="keyword">is</span> gui_vscrollbar</span><br><span class="line"></span><br><span class="line">style game_menu_label <span class="keyword">is</span> gui_label</span><br><span class="line">style game_menu_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line"></span><br><span class="line">style return_button <span class="keyword">is</span> navigation_button</span><br><span class="line">style return_button_text <span class="keyword">is</span> navigation_button_text</span><br><span class="line"></span><br><span class="line">style game_menu_outer_frame:</span><br><span class="line">    bottom_padding <span class="number">45</span></span><br><span class="line">    top_padding <span class="number">180</span></span><br><span class="line"></span><br><span class="line">    background <span class="string">&quot;gui/overlay/game_menu.png&quot;</span></span><br><span class="line"></span><br><span class="line">style game_menu_navigation_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style game_menu_content_frame:</span><br><span class="line">    left_margin <span class="number">60</span></span><br><span class="line">    right_margin <span class="number">30</span></span><br><span class="line">    top_margin <span class="number">15</span></span><br><span class="line"></span><br><span class="line">style game_menu_viewport:</span><br><span class="line">    xsize <span class="number">1380</span></span><br><span class="line"></span><br><span class="line">style game_menu_vscrollbar:</span><br><span class="line">    unscrollable gui.unscrollable</span><br><span class="line"></span><br><span class="line">style game_menu_side:</span><br><span class="line">    spacing <span class="number">15</span></span><br><span class="line"></span><br><span class="line">style game_menu_label:</span><br><span class="line">    xpos <span class="number">75</span></span><br><span class="line">    ysize <span class="number">180</span></span><br><span class="line"></span><br><span class="line">style game_menu_label_text:</span><br><span class="line">    size gui.title_text_size</span><br><span class="line">    color gui.accent_color</span><br><span class="line">    yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">style return_button:</span><br><span class="line">    xpos gui.navigation_xpos</span><br><span class="line">    yalign <span class="number">1.0</span></span><br><span class="line">    yoffset -<span class="number">45</span></span><br></pre></td></tr></table></figure></p><div class="note info modern"><p><code>screens.rpy</code>文件中，<code>style</code>的部分为样式，一般情况下我们不需要修改，如需修改，会特别指示</p></div><p>对比两个文件，我们可以发现<code>gui.rpy</code>文件中的两句代码对应<code>screens.rpy</code>文件中如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#标题菜单界面</span></span><br><span class="line">add gui.main_menu_background</span><br><span class="line"><span class="comment">#游戏菜单界面</span></span><br><span class="line"><span class="keyword">if</span> main_menu:</span><br><span class="line">        add gui.main_menu_background</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        add gui.game_menu_background</span><br></pre></td></tr></table></figure><br>由此我们可以了解到，<code>define gui.main_menu_background = &quot;gui/main_menu.png&quot;</code>为标题界面背景，<code>define gui.game_menu_background = &quot;gui/game_menu.png&quot;</code>为游戏菜单背景，不过，在游戏菜单界面中，还加了当前界面的判断语句，如果是标题菜单界面就展示标题菜单背景，否则就展示游戏菜单界面</p><div class="note warning modern"><p>一般情况下，我们会为各个界面设定单独的背景图，所以游戏菜单界面功能用处不大，当然，如果想设定一致背景图，该功能还是很方便的</p></div><p>我们打开其所对应的文件夹，可以看到两张图片是一样的<br><img src="https://img.picui.cn/free/2024/10/17/6710a787d8ec7.png" alt=""><br>修改代码指向文件，如下所示<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define gui.main_menu_background = <span class="string">&quot;gui/main.png&quot;</span></span><br><span class="line"></span><br><span class="line">define gui.game_menu_background = <span class="string">&quot;gui/game.png&quot;</span></span><br></pre></td></tr></table></figure><br><img src="https://img.picui.cn/free/2024/10/17/6710ac9dba0c6.png" alt=""><br>运行游戏，可以发现背景图已经更换<br><img src="https://img.picui.cn/free/2024/10/17/6710a88ec2955.png" alt=""><br>但我们可以发现，游戏的侧边栏会遮挡部分背景图，让视觉体验大打折扣，这时我们继续查看<code>screens.rpy</code>文件中有关标题菜单界面的代码，可以发现在该样式中，额外添加了<code>background</code>属性<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    background <span class="string">&quot;gui/overlay/main_menu.png&quot;</span></span><br></pre></td></tr></table></figure><br>我们打开其所指定文件夹，即可发现问题所在<br><img src="https://img.picui.cn/free/2024/10/17/6710aab328807.png" alt=""><br>将该样式中的<code>background</code>属性改为<code>None</code>或直接删除该行代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    background <span class="literal">None</span></span><br><span class="line"><span class="comment">######或改成如下样式</span></span><br><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br>再次运行游戏，即可发现侧边栏消失了</p><p><img src="https://img.picui.cn/free/2024/10/17/6710ac1483693.png" alt=""></p><h1 id="按钮按键修改"><a href="#按钮按键修改" class="headerlink" title="按钮按键修改"></a>按钮按键修改</h1><p>该部分比较简单，如果想轻松点可以直接修改<code>screens.rpy</code>文件中280行左右代码，也就是navigation，导航菜单界面，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 导航屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 该屏幕包含在标题菜单和游戏菜单中，并提供导航到其他菜单，以及启动游戏。</span></span><br><span class="line"></span><br><span class="line">screen navigation():</span><br><span class="line"></span><br><span class="line">    vbox:</span><br><span class="line">        style_prefix <span class="string">&quot;navigation&quot;</span></span><br><span class="line"></span><br><span class="line">        xpos gui.navigation_xpos</span><br><span class="line">        yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">        spacing gui.navigation_spacing</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> main_menu:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;开始游戏&quot;</span>) action Start()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;历史&quot;</span>) action ShowMenu(<span class="string">&quot;history&quot;</span>)</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;保存&quot;</span>) action ShowMenu(<span class="string">&quot;save&quot;</span>)</span><br><span class="line"></span><br><span class="line">        textbutton _(<span class="string">&quot;读取游戏&quot;</span>) action ShowMenu(<span class="string">&quot;load&quot;</span>)</span><br><span class="line"></span><br><span class="line">        textbutton _(<span class="string">&quot;设置&quot;</span>) action ShowMenu(<span class="string">&quot;preferences&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> _in_replay:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;结束回放&quot;</span>) action EndReplay(confirm=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> <span class="keyword">not</span> main_menu:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;标题菜单&quot;</span>) action MainMenu()</span><br><span class="line"></span><br><span class="line">        textbutton _(<span class="string">&quot;关于&quot;</span>) action ShowMenu(<span class="string">&quot;about&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.variant(<span class="string">&quot;pc&quot;</span>) <span class="keyword">or</span> (renpy.variant(<span class="string">&quot;web&quot;</span>) <span class="keyword">and</span> <span class="keyword">not</span> renpy.variant(<span class="string">&quot;mobile&quot;</span>)):</span><br><span class="line"></span><br><span class="line">            <span class="comment">## “帮助”对移动设备来说并非必需或相关。</span></span><br><span class="line">            textbutton _(<span class="string">&quot;帮助&quot;</span>) action ShowMenu(<span class="string">&quot;help&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.variant(<span class="string">&quot;pc&quot;</span>):</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 退出按钮在 iOS 上是被禁止使用的，在安卓和网页上也不是必要的。</span></span><br><span class="line">            textbutton _(<span class="string">&quot;退出&quot;</span>) action Quit(confirm=<span class="keyword">not</span> main_menu)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style navigation_button <span class="keyword">is</span> gui_button</span><br><span class="line">style navigation_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line"></span><br><span class="line">style navigation_button:</span><br><span class="line">    size_group <span class="string">&quot;navigation&quot;</span></span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;navigation_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style navigation_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;navigation_button&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>基本上将<code>textbutton</code>更改为<code>imagebutton</code>即可，位置、大小、间距和横竖排列请自行更改<br>如果想更贴合标题背景，推荐删除标题菜单界面如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## use 语句将其他的屏幕包含进此屏幕。标题屏幕的实际内容在导航屏幕中。</span></span><br><span class="line">use navigation</span><br></pre></td></tr></table></figure><br>之后添加按钮代码，action行为可以从navigation界面获取，代码参考如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">hbox:</span><br><span class="line">    align (<span class="number">0.2</span>, <span class="number">0.85</span>)</span><br><span class="line">    spacing <span class="number">50</span></span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/new_game.png&quot;</span></span><br><span class="line">        action Start()</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/load_game.png&quot;</span></span><br><span class="line">        action ShowMenu(<span class="string">&quot;load&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/extra.png&quot;</span></span><br><span class="line">        action ShowMenu(<span class="string">&quot;extra&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/setting.png&quot;</span></span><br><span class="line">        action ShowMenu(<span class="string">&quot;preferences&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/end_game.png&quot;</span></span><br><span class="line">        action Quit(confirm=<span class="keyword">not</span> main_menu)</span><br></pre></td></tr></table></figure><br>表现效果如下<br><img src="https://img.picui.cn/free/2024/10/17/6710b6f39de8f.png" alt=""></p><h1 id="背景图切换"><a href="#背景图切换" class="headerlink" title="背景图切换"></a>背景图切换</h1><p>一般情况下，GALGAME的标题背景图会随游戏内容的推进而切换，在Ren’py中，我们可以使用解锁画廊的条件，也就是<code>persistent.unlock</code>达到该效果<br>在<code>script.rpy</code>文件中添加如下代码初始化<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_1 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_1 ==<span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_2 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_2 ==<span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_3 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_3 ==<span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_4 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_4 ==<span class="literal">False</span></span><br></pre></td></tr></table></figure><br>之后在结局内添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局一</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局二</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局三</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局四</span></span><br></pre></td></tr></table></figure><br>通常情况下，标题界面的背景图在更换后不会切换回原背景图，我们需要修改如下代码<br><code>gui.rpy</code>文件中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define gui.main_menu_background = <span class="string">&quot;gui/main.png&quot;</span></span><br><span class="line">define gui.main_menu_background1 = <span class="string">&quot;gui/main1.png&quot;</span></span><br><span class="line">define gui.main_menu_background2 = <span class="string">&quot;gui/main2.png&quot;</span></span><br><span class="line">define gui.main_menu_background3 = <span class="string">&quot;gui/main3.png&quot;</span></span><br></pre></td></tr></table></figure><br><code>screens.rpy</code>文件中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> persistent.unlock_1:</span><br><span class="line">    add gui.main_menu_background1</span><br><span class="line"><span class="keyword">elif</span> persistent.unlock_2:</span><br><span class="line">    add gui.main_menu_background2</span><br><span class="line"><span class="keyword">elif</span> persistent.unlock_3:</span><br><span class="line">    add gui.main_menu_background3</span><br><span class="line"><span class="keyword">elif</span> persistent.unlock_4:</span><br><span class="line">    add gui.main_menu_background4</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    add gui.main_menu_background</span><br></pre></td></tr></table></figure><br>如果你想恢复原背景图，可以使用如下代码<br><code>script.rpy</code>文件中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入新游戏，中途返回即可恢复原背景图</span></span><br><span class="line"></span><br><span class="line">label start:</span><br><span class="line">    <span class="comment">#清空持久化数据</span></span><br><span class="line">    $ persistent._clear(progress=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">####更推荐使用如下代码</span></span><br><span class="line">label start:</span><br><span class="line">    <span class="comment">#将解锁条件改为false，解锁条件不可与画廊解锁条件一致</span></span><br><span class="line">    $ persistent.unlock_1 =<span class="literal">False</span></span><br><span class="line">    $ persistent.unlock_2 =<span class="literal">False</span></span><br><span class="line">    $ persistent.unlock_3 =<span class="literal">False</span></span><br><span class="line">    $ persistent.unlock_4 =<span class="literal">False</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><div class="note danger modern"><p><code>persistent._clear(progress=True)</code><br>该语句只允许出现在开发阶段</p></div></p><h1 id="动画效果"><a href="#动画效果" class="headerlink" title="动画效果"></a>动画效果</h1><p>使用transform函数，我们可以添加动画效果<br>首先，我们需要定义一个动画效果<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#delay为延迟时间</span></span><br><span class="line">transform main_menu_transform(delay):</span><br><span class="line">    alpha <span class="number">0.0</span></span><br><span class="line">    on start:</span><br><span class="line">        time delay</span><br><span class="line">        easein <span class="number">2.0</span> alpha <span class="number">1.0</span></span><br></pre></td></tr></table></figure><br>之后使用at语句添加动画效果(以按钮为例)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">hbox:</span><br><span class="line">    align (<span class="number">0.2</span>, <span class="number">0.85</span>)</span><br><span class="line">    spacing <span class="number">50</span></span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/new_game.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">0.4</span>)</span><br><span class="line">        action Start()</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/load_game.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">0.8</span>)</span><br><span class="line">        action ShowMenu(<span class="string">&quot;load&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/extra.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">1.2</span>)</span><br><span class="line">        action ShowMenu(<span class="string">&quot;extra&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/setting.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">1.6</span>)</span><br><span class="line">        action ShowMenu(<span class="string">&quot;preferences&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/end_game.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">2.0</span>)</span><br><span class="line">        action Quit(confirm=<span class="keyword">not</span> main_menu)</span><br></pre></td></tr></table></figure><br><div class="note info modern"><p>+所在行表示所添加的代码</p></div></p><h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1><p><code>screens.rpy</code>文件中，如下代码分别表示游戏名字，版本号<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> gui.show_name:</span><br><span class="line"></span><br><span class="line">    vbox:</span><br><span class="line">        style <span class="string">&quot;main_menu_vbox&quot;</span></span><br><span class="line"></span><br><span class="line">        text <span class="string">&quot;[config.name!t]&quot;</span>:</span><br><span class="line">            style <span class="string">&quot;main_menu_title&quot;</span></span><br><span class="line"></span><br><span class="line">        text <span class="string">&quot;[config.version]&quot;</span>:</span><br><span class="line">            style <span class="string">&quot;main_menu_version&quot;</span></span><br></pre></td></tr></table></figure><br>如果不想显示，可以在<code>options.rpy</code>文件中找到如下代码，并将其改为<code>False</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 决定上面给出的标题是否显示在标题界面屏幕。设置为 False 来隐藏标题。</span></span><br><span class="line"></span><br><span class="line">define gui.show_name = <span class="literal">True</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">Ren&#39;py引擎中标题菜单界面的自定义修改，包括背景的切换，按钮的动画效果等。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="视频教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Ren&#39;py" scheme="http://lucylcarus.github.io/tags/Ren-py/"/>
    
    <category term="GALGAME引擎" scheme="http://lucylcarus.github.io/tags/GALGAME%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>Ren&#39;py 鉴赏空间</title>
    <link href="http://lucylcarus.github.io/posts/b576c088.html"/>
    <id>http://lucylcarus.github.io/posts/b576c088.html</id>
    <published>2024-10-06T12:14:39.000Z</published>
    <updated>2024-10-13T09:33:57.867Z</updated>
    
    <content type="html"><![CDATA[<p><strong>若无特殊说明，默认是在<code>script.rpy</code>文件中进行编写</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>Ren’py官方文档相关链接:</p><ol><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#music-room">音乐空间</a></li><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#image-gallery">画廊</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1ef19YwEAH&cid=26155682972&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><p>之前编写的<code>init python</code>代码，基本不用修改。</p><h2 id="音乐空间相关"><a href="#音乐空间相关" class="headerlink" title="音乐空间相关"></a>音乐空间相关</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#音乐空间背景</span></span><br><span class="line">image music_background:</span><br><span class="line">    <span class="string">&quot;music_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#音乐列表</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="comment">#淡入淡出</span></span><br><span class="line">    mr = MusicRoom(fadein = <span class="number">1.0</span> , fadeout = <span class="number">1.0</span>)</span><br><span class="line">    <span class="comment">#音乐列表，第一个用于主界面bgm，设为默认解锁</span></span><br><span class="line">    mr.add(<span class="string">&quot;bgm01.ogg&quot;</span>,always_unlocked = <span class="literal">True</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多音乐请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#时长参数</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_duration</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        duration = renpy.music.get_duration(channel)</span><br><span class="line">        <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(duration))</span><br><span class="line">        </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_position</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        music_pos = renpy.music.get_pos(channel)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> music_pos:</span><br><span class="line">            <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(music_pos))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;00:00&quot;</span></span><br><span class="line">    <span class="comment">#时间转换</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">convert_format</span>(<span class="params">second</span>):</span><br><span class="line">        minute = second // <span class="number">60</span></span><br><span class="line">        second = second % <span class="number">60</span></span><br><span class="line">        result = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#可用于59分59秒内音乐</span></span><br><span class="line">        <span class="keyword">if</span> minute:</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> minute &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result =<span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result = <span class="built_in">str</span>(minute) + <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                       </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="画廊相关"><a href="#画廊相关" class="headerlink" title="画廊相关"></a>画廊相关</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#画廊/CG鉴赏</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#背景图片</span></span><br><span class="line">image gallery_background:</span><br><span class="line">    <span class="string">&quot;gallery_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#前提条件</span></span><br><span class="line">init python:</span><br><span class="line"></span><br><span class="line">    g = Gallery()</span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;bg&quot;</span>)<span class="comment">#类似于标签</span></span><br><span class="line">    g.image(<span class="string">&quot;bg01.png&quot;</span>)<span class="comment">#真正的图片</span></span><br><span class="line">    g.unlock_image(<span class="string">&quot;bg03.png&quot;</span>)<span class="comment">#差分</span></span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;cg&quot;</span>)</span><br><span class="line">    g.condition(<span class="string">&quot;persistent.unlock_1&quot;</span>)<span class="comment">#解锁限制</span></span><br><span class="line">    g.image(<span class="string">&quot;cg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#未解锁</span></span><br><span class="line">    g.button(<span class="string">&quot;unlock&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多图像请自行添加</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 图像切换使用的转场。</span></span><br><span class="line">    g.transition = dissolve</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="界面编写"><a href="#界面编写" class="headerlink" title="界面编写"></a>界面编写</h1><p>由于空间有限，我们舍弃掉画廊的快速定位功能，同时为避免产生歧义，CG鉴赏采取翻页效果，音乐鉴赏采取滚动条效果，具体代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#音乐列表顶部底部按钮定位</span></span><br><span class="line">default extra_music_pos = ui.adjustment()</span><br><span class="line"></span><br><span class="line"><span class="comment">#鉴赏空间界面</span></span><br><span class="line">screen extra(cg_page=<span class="number">0</span>):</span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;extra_bg.jpg&quot;</span> </span><br><span class="line">    text <span class="string">&quot;EXTRA&quot;</span> size <span class="number">80</span> color <span class="string">&quot;#000000&quot;</span> align (<span class="number">0.05</span>, <span class="number">0.1</span>) <span class="comment">#调整大小，颜色，位置</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#######画廊部分</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#CG列表</span></span><br><span class="line">    viewport:</span><br><span class="line"></span><br><span class="line">        xysize (<span class="number">1044</span>, <span class="number">690</span>)</span><br><span class="line">        align (<span class="number">0.1</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            <span class="comment">#间距</span></span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">#页数判断</span></span><br><span class="line">            <span class="keyword">if</span> (cg_page == <span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">3</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    <span class="comment">#解锁判断，后续判断请自行添加</span></span><br><span class="line">                    <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                        add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                        add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                        add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)  </span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)         </span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (cg_page == <span class="number">1</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">3</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (cg_page == <span class="number">2</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">3</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">    <span class="comment">#翻页按钮</span></span><br><span class="line">    hbox:</span><br><span class="line">        xalign <span class="number">0.2</span> yalign <span class="number">0.85</span></span><br><span class="line">        spacing <span class="number">60</span></span><br><span class="line">        <span class="keyword">if</span> cg_page &lt; <span class="number">2</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=(cg_page+<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">        textbutton <span class="string">&quot;1&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=<span class="number">0</span>)</span><br><span class="line">        textbutton <span class="string">&quot;2&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=<span class="number">1</span>)</span><br><span class="line">        textbutton <span class="string">&quot;3&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> cg_page &gt; <span class="number">0</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=(cg_page-<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action NullAction()</span><br><span class="line">                </span><br><span class="line">    </span><br><span class="line">    <span class="comment">######音乐部分</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#更新renpy.music.get_position()和get_music_duration()</span></span><br><span class="line">    timer <span class="number">0.1</span>:</span><br><span class="line">        action [SetVariable(<span class="string">&#x27;duration&#x27;</span>,get_audio_duration()),SetVariable(<span class="string">&#x27;music_pos&#x27;</span>,get_audio_position())]</span><br><span class="line">        repeat <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#音乐列表</span></span><br><span class="line">    viewport <span class="built_in">id</span> <span class="string">&quot;MUSIC_list&quot;</span>:</span><br><span class="line">        mousewheel <span class="literal">True</span> <span class="comment">#垂直滚动</span></span><br><span class="line">        xysize (<span class="number">500</span>, <span class="number">600</span>)</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.4</span>)</span><br><span class="line">        draggable <span class="literal">True</span>  <span class="comment">#鼠标拖动可滚动视口</span></span><br><span class="line">        yadjustment extra_music_pos <span class="comment">#快速定位</span></span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            </span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line"></span><br><span class="line">            textbutton <span class="string">&quot;bgm01&quot;</span> action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">#解锁判断</span></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm02.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm02&quot;</span> action mr.Play(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm03.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm03&quot;</span> action mr.Play(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#顶部底部按钮</span></span><br><span class="line">    vbox:</span><br><span class="line">        align (<span class="number">0.95</span>, <span class="number">0.4</span>)</span><br><span class="line">        textbutton <span class="string">&quot;顶部&quot;</span> action Function(extra_music_pos.change,<span class="number">0</span>)</span><br><span class="line">        vbar:</span><br><span class="line">            xysize (<span class="number">10</span>, <span class="number">500</span>)</span><br><span class="line">            align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">            value YScrollValue(<span class="string">&quot;MUSIC_list&quot;</span>)</span><br><span class="line">        <span class="comment">#如果不想算，只需保证该值足够大</span></span><br><span class="line">        textbutton <span class="string">&quot;底部&quot;</span> action Function(extra_music_pos.change,<span class="number">500000</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#功能按钮</span></span><br><span class="line">    hbox:</span><br><span class="line"></span><br><span class="line">        align (<span class="number">0.85</span>, <span class="number">0.85</span>)</span><br><span class="line">        spacing <span class="number">40</span></span><br><span class="line">        textbutton <span class="string">&quot;下一首&quot;</span> action mr.Next()</span><br><span class="line">        imagebutton:</span><br><span class="line">            </span><br><span class="line">            idle <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            selected_idle <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            selected_hover <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> renpy.music.is_playing() <span class="keyword">and</span> <span class="keyword">not</span> renpy.music.get_pause():</span><br><span class="line">                action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                action PauseAudio(channel=<span class="string">&quot;music&quot;</span>,value=<span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                </span><br><span class="line">        textbutton <span class="string">&quot;上一首&quot;</span> action mr.Previous()</span><br><span class="line">        textbutton <span class="string">&quot;随机播放&quot;</span> action mr.RandomPlay()</span><br><span class="line"></span><br><span class="line">    vbox:</span><br><span class="line">        xpos <span class="number">0.5</span></span><br><span class="line">        ypos <span class="number">0.2</span></span><br><span class="line">        python:</span><br><span class="line">            duration = get_audio_duration()</span><br><span class="line">            music_pos = get_audio_position()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#音量调节，可有可无</span></span><br><span class="line">    hbox:</span><br><span class="line">        text <span class="string">&quot;音量&quot;</span></span><br><span class="line">        align (<span class="number">0.85</span>, <span class="number">0.12</span>)</span><br><span class="line">        bar:</span><br><span class="line">            value Preference(<span class="string">&quot;music volume&quot;</span>)</span><br><span class="line">            thumb <span class="string">&quot;dot.png&quot;</span></span><br><span class="line">            thumb_offset <span class="number">3</span></span><br><span class="line">            xysize (<span class="number">400</span>, <span class="number">5</span>)</span><br><span class="line">            align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#进度条，时长显示</span></span><br><span class="line">    hbox:</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">        bar:</span><br><span class="line">            value AudioPositionValue(channel=<span class="string">&#x27;music&#x27;</span>, update_interval=<span class="number">0.1</span>)</span><br><span class="line">            xysize (<span class="number">400</span>,<span class="number">5</span>)</span><br><span class="line">            align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">            thumb <span class="string">&quot;dot.png&quot;</span></span><br><span class="line">            thumb_offset <span class="number">3</span></span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            text music_pos</span><br><span class="line">            text <span class="string">&quot;/&quot;</span></span><br><span class="line">            text duration</span><br><span class="line">  </span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.05</span>, <span class="number">0.95</span>)</span><br><span class="line">        text_color <span class="string">&quot;#000&quot;</span></span><br><span class="line">        text_size <span class="number">50</span></span><br><span class="line">        action [Return(), Play(<span class="string">&quot;music&quot;</span>, <span class="string">&quot;bgm01.ogg&quot;</span>)]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="周目解锁"><a href="#周目解锁" class="headerlink" title="周目解锁"></a>周目解锁</h1><p>添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">init python:</span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_1 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_1 ==<span class="literal">False</span></span><br><span class="line">    <span class="comment">#更多条件限制请自行添加</span></span><br></pre></td></tr></table></figure><p>在某一结局内添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解锁条件1</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span></span><br><span class="line"><span class="comment">#更多周目请自行添加</span></span><br></pre></td></tr></table></figure><h1 id="添加入口"><a href="#添加入口" class="headerlink" title="添加入口"></a>添加入口</h1><p>完成上述操作后，我们还需要添加主界面进入按钮，打开<code>screens.rpy</code>，找到<code>screen navigation()</code>(287行左右)，在合适位置添加下面的代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textbutton <span class="string">&quot;EXTRA&quot;</span> action ShowMenu(<span class="string">&quot;extra&quot;</span>)</span><br></pre></td></tr></table></figure><p>现在运行游戏，即可在主界面看到鉴赏空间进入按钮，请检查各功能是否可用。</p>]]></content>
    
    
    <summary type="html">Ren&#39;py引擎中画廊和音乐空间二合一效果，由于空间有限，无法支持全部功能，会有些许缺失，请自行考虑使用。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="视频教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Ren&#39;py" scheme="http://lucylcarus.github.io/tags/Ren-py/"/>
    
    <category term="GALGAME引擎" scheme="http://lucylcarus.github.io/tags/GALGAME%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>Ren&#39;py 画廊</title>
    <link href="http://lucylcarus.github.io/posts/b5b066b2.html"/>
    <id>http://lucylcarus.github.io/posts/b5b066b2.html</id>
    <published>2024-09-29T08:27:09.000Z</published>
    <updated>2024-10-12T11:55:34.877Z</updated>
    
    <content type="html"><![CDATA[<p><strong>若无特殊说明，默认是在<code>script.rpy</code>文件中进行编写</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>Ren’py官方文档相关链接:</p><ol><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#image-gallery">画廊</a></li><li><a href="https://doc.renpy.cn/zh-CN/displaying_images.html#renpy.seen_image">常规解锁判断</a></li><li><a href="https://doc.renpy.cn/zh-CN/persistent.html#persistent-data">周目解锁判断</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><h2 id="基础部分"><a href="#基础部分" class="headerlink" title="基础部分"></a>基础部分</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1JGtyeDEcX&cid=25949438659&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h2 id="进阶操作"><a href="#进阶操作" class="headerlink" title="进阶操作"></a>进阶操作</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1XLxqemE8h&cid=26050103049&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><p>同音乐空间一样，想要实现画廊需要一些前提条件，详见下述代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#画廊/CG鉴赏</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#背景图片</span></span><br><span class="line">image gallery_background:</span><br><span class="line">    <span class="string">&quot;gallery_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#前提条件</span></span><br><span class="line">init python:</span><br><span class="line"></span><br><span class="line">    g = Gallery()</span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;bg&quot;</span>)<span class="comment">#类似于标签</span></span><br><span class="line">    g.image(<span class="string">&quot;bg01.png&quot;</span>)<span class="comment">#真正的图片</span></span><br><span class="line">    g.unlock_image(<span class="string">&quot;bg03.png&quot;</span>)<span class="comment">#差分</span></span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;cg&quot;</span>)</span><br><span class="line">    g.condition(<span class="string">&quot;persistent.unlock_1&quot;</span>)<span class="comment">#解锁限制</span></span><br><span class="line">    g.image(<span class="string">&quot;cg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#未解锁</span></span><br><span class="line">    g.button(<span class="string">&quot;unlock&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多图像请自行添加</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 图像切换使用的转场。</span></span><br><span class="line">    g.transition = dissolve</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果选择翻页功能可以不加</span></span><br><span class="line">default p = ui.adjustment()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="界面编写"><a href="#界面编写" class="headerlink" title="界面编写"></a>界面编写</h1><p>前提条件编写完成后，我们就可以着手编写画廊界面了，这里我提供了滚动条样式和翻页样式两种常用形式，请自行选择你想要那种效果</p><h2 id="滚动条式界面-推荐"><a href="#滚动条式界面-推荐" class="headerlink" title="滚动条式界面(推荐)"></a>滚动条式界面(推荐)</h2><p>以下代码适用于滚动条式界面，请选择好你想要的效果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#鉴赏界面</span></span><br><span class="line"></span><br><span class="line">screen gallery:</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;gallery_background&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#可拖动条</span></span><br><span class="line">    vbar:</span><br><span class="line">        xysize (<span class="number">10</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.5</span>)</span><br><span class="line">        value YScrollValue(<span class="string">&quot;cg_list&quot;</span>)   </span><br><span class="line"></span><br><span class="line">    viewport <span class="built_in">id</span> <span class="string">&quot;cg_list&quot;</span>:</span><br><span class="line">        mousewheel <span class="literal">True</span> <span class="comment">#垂直滚动</span></span><br><span class="line">        xysize (<span class="number">1500</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">        draggable <span class="literal">True</span> <span class="comment">#鼠标拖动可滚动视口</span></span><br><span class="line">        yadjustment p <span class="comment">#快速定位</span></span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            <span class="comment">#间距</span></span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;角色1&quot;</span> size <span class="number">40</span> </span><br><span class="line">            </span><br><span class="line">            <span class="comment">#网格布局</span></span><br><span class="line">            grid <span class="number">4</span> <span class="number">3</span> <span class="built_in">id</span> <span class="string">&quot;bg&quot;</span>:</span><br><span class="line">                spacing <span class="number">60</span></span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">                <span class="comment">#判断是否解锁</span></span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg05&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment">#由于全加判断语句导致代码太长，以下暂不添加判断</span></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;角色2&quot;</span> size <span class="number">40</span></span><br><span class="line"></span><br><span class="line">            grid <span class="number">4</span> <span class="number">3</span> <span class="built_in">id</span> <span class="string">&quot;cg&quot;</span>:</span><br><span class="line">                spacing <span class="number">60</span></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多图像请自行添加</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#快速定位选项</span></span><br><span class="line">    vbox:</span><br><span class="line">        <span class="comment">#请自行根据图像高度和间距计算数值</span></span><br><span class="line">        textbutton <span class="string">&quot;角色1&quot;</span> action Function(p.change,<span class="number">0</span>)</span><br><span class="line">        textbutton <span class="string">&quot;角色2&quot;</span> action Function(p.change,<span class="number">799</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#更多角色请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.0</span>, <span class="number">0.98</span>)</span><br><span class="line">        action Return()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="翻页式界面"><a href="#翻页式界面" class="headerlink" title="翻页式界面"></a>翻页式界面</h2><p>以下代码适用于翻页式界面，请选择好你想要的效果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">screen gallery(page=<span class="number">0</span>):</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;gallery_background&quot;</span></span><br><span class="line">    </span><br><span class="line">    viewport:    </span><br><span class="line">        xysize (<span class="number">1500</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line">            <span class="comment">#页数判断</span></span><br><span class="line">            <span class="keyword">if</span> (page == <span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    <span class="comment">#由于全部添加会导致代码很长，以下只展示三张图片，请自行添加判断语句</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)          </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (page == <span class="number">1</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (page == <span class="number">2</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多页面请自行添加</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#底部按钮</span></span><br><span class="line">    hbox:</span><br><span class="line">        xalign <span class="number">0.5</span> yalign <span class="number">0.9</span></span><br><span class="line">        spacing <span class="number">60</span></span><br><span class="line">        <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">        <span class="keyword">if</span> page &lt; <span class="number">2</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=(page+<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">        textbutton <span class="string">&quot;1&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=<span class="number">0</span>)</span><br><span class="line">        textbutton <span class="string">&quot;2&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=<span class="number">1</span>)</span><br><span class="line">        textbutton <span class="string">&quot;3&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> page &gt; <span class="number">0</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=(page-<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.0</span>, <span class="number">0.98</span>)</span><br><span class="line">        action Return()  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果想添加快速定位功能，请进一步定义<code>角色名_page</code>，并修改为以下代码(只显示需要修改的代码)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入画廊默认界面</span></span><br><span class="line">screen gallery(角色1_page=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">viewport:    </span><br><span class="line">        xysize (<span class="number">1500</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line">            <span class="comment">#页数判断</span></span><br><span class="line">            <span class="keyword">if</span> (角色1_page == <span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    <span class="comment">#由于全部添加会导致代码很长，以下只展示三张图片，请自行添加判断语句</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)          </span><br><span class="line">                vbox:</span><br><span class="line">                    <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">                    textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page+<span class="number">1</span>))</span><br><span class="line">                    textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page-<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (角色1_page == <span class="number">1</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                vbox:</span><br><span class="line">                    <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">                    textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page+<span class="number">1</span>))</span><br><span class="line">                    textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page-<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (角色2_page=<span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                vbox:</span><br><span class="line">                    <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">                    textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色2_page=(角色2_page+<span class="number">1</span>))</span><br><span class="line">                    textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色2_page=(角色2_page-<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多页面请自行添加</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#添加快速定位选项</span></span><br><span class="line">vbox:</span><br><span class="line">    textbutton <span class="string">&quot;角色1&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=<span class="number">0</span>)</span><br><span class="line">    textbutton <span class="string">&quot;角色2&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色2_page=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多角色请自行添加</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="周目解锁"><a href="#周目解锁" class="headerlink" title="周目解锁"></a>周目解锁</h1><p>添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">init python:</span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_1 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_1 ==<span class="literal">False</span></span><br><span class="line">    <span class="comment">#更多条件限制请自行添加</span></span><br></pre></td></tr></table></figure><p>在某一结局内添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解锁条件1</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span></span><br><span class="line"><span class="comment">#更多周目请自行添加</span></span><br></pre></td></tr></table></figure><h1 id="添加入口"><a href="#添加入口" class="headerlink" title="添加入口"></a>添加入口</h1><p>完成上述操作后，我们还需要添加主界面进入按钮，打开<code>screens.rpy</code>，找到<code>screen navigation()</code>(287行左右)，在合适位置添加下面的代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textbutton <span class="string">&quot;画廊&quot;</span> action ShowMenu(<span class="string">&quot;gallery&quot;</span>)</span><br></pre></td></tr></table></figure></p><p>现在运行游戏，即可在主界面看到画廊进入按钮，请检查各功能是否可用。</p>]]></content>
    
    
    <summary type="html">Ren&#39;py引擎中画廊的实现方法，包括快速定位，翻页功能和滚动条两种选择。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="视频教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Ren&#39;py" scheme="http://lucylcarus.github.io/tags/Ren-py/"/>
    
    <category term="GALGAME引擎" scheme="http://lucylcarus.github.io/tags/GALGAME%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>Ren&#39;py 音乐空间</title>
    <link href="http://lucylcarus.github.io/posts/90ea59ad.html"/>
    <id>http://lucylcarus.github.io/posts/90ea59ad.html</id>
    <published>2024-09-25T08:27:09.000Z</published>
    <updated>2024-10-11T09:26:00.014Z</updated>
    
    <content type="html"><![CDATA[<p><strong>若无特殊说明，默认是在<code>script.rpy</code>文件中进行编写</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>本文参考Ren’py中文论坛文章:<br><a href="https://www.renpy.cn/thread-740-1-1.html">[原创] [教程]音乐进度条显示，全长和已播放进度，附加播放/暂停</a></p><p>Ren’py官方文档相关链接:</p><ol><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#music-room">音乐空间</a></li><li><a href="https://doc.renpy.cn/zh-CN/audio.html#functions">时长位置</a></li><li><a href="https://doc.renpy.cn/zh-CN/screens.html#timer">更新时长</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><h2 id="基础部分"><a href="#基础部分" class="headerlink" title="基础部分"></a>基础部分</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV19ZpueeE1M&cid=25752374369&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h2 id="进阶操作"><a href="#进阶操作" class="headerlink" title="进阶操作"></a>进阶操作</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1zL4bezE5h&cid=25870731371&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><p>想要实现音乐空间需要一些前提条件，详见下述代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#音乐空间背景</span></span><br><span class="line">image music_background:</span><br><span class="line">    <span class="string">&quot;music_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#音乐列表</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="comment">#淡入淡出</span></span><br><span class="line">    mr = MusicRoom(fadein = <span class="number">1.0</span> , fadeout = <span class="number">1.0</span>)</span><br><span class="line">    <span class="comment">#音乐列表，第一个用于主界面bgm，设为默认解锁</span></span><br><span class="line">    mr.add(<span class="string">&quot;bgm01.ogg&quot;</span>,always_unlocked = <span class="literal">True</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多音乐请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#时长参数</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_duration</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        duration = renpy.music.get_duration(channel)</span><br><span class="line">        <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(duration))</span><br><span class="line">        </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_position</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        music_pos = renpy.music.get_pos(channel)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> music_pos:</span><br><span class="line">            <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(music_pos))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;00:00&quot;</span></span><br><span class="line">    <span class="comment">#时间转换</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">convert_format</span>(<span class="params">second</span>):</span><br><span class="line">        minute = second // <span class="number">60</span></span><br><span class="line">        second = second % <span class="number">60</span></span><br><span class="line">        result = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#可用于59分59秒内音乐</span></span><br><span class="line">        <span class="keyword">if</span> minute:</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> minute &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result =<span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result = <span class="built_in">str</span>(minute) + <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                       </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><h1 id="界面编写"><a href="#界面编写" class="headerlink" title="界面编写"></a>界面编写</h1><p>前提条件编写完成后，我们就可以着手编写音乐空间界面了，详见下述代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#音乐空间界面</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">screen music_room:</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更新renpy.music.get_position()和get_music_duration()</span></span><br><span class="line">    timer <span class="number">0.1</span>:</span><br><span class="line">        action [SetVariable(<span class="string">&#x27;duration&#x27;</span>,get_audio_duration()),SetVariable(<span class="string">&#x27;music_pos&#x27;</span>,get_audio_position())]</span><br><span class="line">        repeat <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    zorder <span class="number">2</span></span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;music_background&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#音乐列表</span></span><br><span class="line">    viewport <span class="built_in">id</span> <span class="string">&quot;music_list&quot;</span>:</span><br><span class="line">        mousewheel <span class="literal">True</span> <span class="comment">#垂直滚动</span></span><br><span class="line">        xysize (<span class="number">500</span>, <span class="number">500</span>)</span><br><span class="line">        align (<span class="number">0.3</span>, <span class="number">0.4</span>)</span><br><span class="line">        draggable <span class="literal">True</span> <span class="comment">#鼠标拖动可滚动视口</span></span><br><span class="line">        vbox:</span><br><span class="line">            </span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line"></span><br><span class="line">            textbutton <span class="string">&quot;bgm01&quot;</span> action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line">            <span class="comment">#判断bgm是否解锁</span></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm02.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm02&quot;</span> action mr.Play(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm03.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm03&quot;</span> action mr.Play(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多音乐请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#可拖动滑块</span></span><br><span class="line">    vbar:</span><br><span class="line">        xysize (<span class="number">10</span>, <span class="number">500</span>)</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.4</span>)</span><br><span class="line">        value YScrollValue(<span class="string">&quot;music_list&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#功能按键</span></span><br><span class="line">    hbox:</span><br><span class="line"></span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.8</span>)</span><br><span class="line">        spacing <span class="number">200</span></span><br><span class="line"></span><br><span class="line">        textbutton <span class="string">&quot;下一首&quot;</span> action mr.Next()</span><br><span class="line"></span><br><span class="line">        <span class="comment">#暂停/播放切换</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            </span><br><span class="line">            idle <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            selected_idle <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            selected_hover <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> renpy.music.is_playing() <span class="keyword">and</span> <span class="keyword">not</span> renpy.music.get_pause():</span><br><span class="line">                action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                action PauseAudio(channel=<span class="string">&quot;music&quot;</span>,value=<span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                </span><br><span class="line">        textbutton <span class="string">&quot;上一首&quot;</span> action mr.Previous()</span><br><span class="line">        textbutton <span class="string">&quot;随机播放&quot;</span> action mr.RandomPlay()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#显示时长</span></span><br><span class="line">    bar:</span><br><span class="line">        value AudioPositionValue(channel=<span class="string">&#x27;music&#x27;</span>, update_interval=<span class="number">0.1</span>)</span><br><span class="line">        xysize (<span class="number">800</span>,<span class="number">5</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.7</span>)</span><br><span class="line">        thumb <span class="string">&quot;dot.png&quot;</span></span><br><span class="line">        thumb_offset <span class="number">3</span></span><br><span class="line">  </span><br><span class="line">    vbox:</span><br><span class="line">        xpos <span class="number">0.5</span></span><br><span class="line">        ypos <span class="number">0.2</span></span><br><span class="line">        python:</span><br><span class="line">            duration = get_audio_duration()</span><br><span class="line">            music_pos = get_audio_position()</span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span></span><br><span class="line">        align (<span class="number">0.8</span>, <span class="number">0.7</span>)</span><br><span class="line">        text music_pos</span><br><span class="line">        text <span class="string">&quot;/&quot;</span></span><br><span class="line">        text duration</span><br><span class="line">        </span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.0</span>, <span class="number">0.98</span>)</span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 音乐空间的音乐播放入口。</span></span><br><span class="line">    on <span class="string">&quot;replace&quot;</span> action mr.Play()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 离开时恢复主菜单的音乐。</span></span><br><span class="line">    on <span class="string">&quot;replaced&quot;</span> action Play(<span class="string">&quot;music&quot;</span>, <span class="string">&quot;bgm01.ogg&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="添加入口"><a href="#添加入口" class="headerlink" title="添加入口"></a>添加入口</h1><p>完成上述操作后，我们还需要添加主界面进入按钮，打开<code>screens.rpy</code>，找到<code>screen navigation()</code>(287行左右)，在合适位置添加下面的代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textbutton <span class="string">&quot;音乐空间&quot;</span> action ShowMenu(<span class="string">&quot;music_room&quot;</span>)</span><br></pre></td></tr></table></figure></p><p>现在运行游戏，即可在主界面看到音乐空间进入按钮，请检查各功能是否可用。</p>]]></content>
    
    
    <summary type="html">Ren&#39;py引擎中音乐空间实现方法，包括播放暂停按钮切换，显示音乐时长等操作。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="视频教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Ren&#39;py" scheme="http://lucylcarus.github.io/tags/Ren-py/"/>
    
    <category term="GALGAME引擎" scheme="http://lucylcarus.github.io/tags/GALGAME%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>MySQL语法使用(二)</title>
    <link href="http://lucylcarus.github.io/posts/37d2fb35.html"/>
    <id>http://lucylcarus.github.io/posts/37d2fb35.html</id>
    <published>2024-09-20T08:27:09.000Z</published>
    <updated>2024-11-04T12:12:55.850Z</updated>
    
    <content type="html"><![CDATA[<h1 id="查看数据表"><a href="#查看数据表" class="headerlink" title="查看数据表"></a>查看数据表</h1><h2 id="查看已创建的数据表"><a href="#查看已创建的数据表" class="headerlink" title="查看已创建的数据表"></a>查看已创建的数据表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure><h2 id="查看数据表结构"><a href="#查看数据表结构" class="headerlink" title="查看数据表结构"></a>查看数据表结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span>(<span class="keyword">DESC</span>) <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例: 查看student数据表的结构(<code>USE</code>命令可以让我们来使用数据库)<br>USE test;<br>DESC student;<br>或<br>USE test;<br>SHOW CREATE TABLE student;</p></blockquote><h1 id="数据表中数据的操纵"><a href="#数据表中数据的操纵" class="headerlink" title="数据表中数据的操纵"></a>数据表中数据的操纵</h1><h2 id="向数据表中添加数据"><a href="#向数据表中添加数据" class="headerlink" title="向数据表中添加数据"></a>向数据表中添加数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>注：可使用逗号分隔添加多条数据，但不推荐使用</span><br><span class="line"><span class="keyword">INSERT</span> <span class="operator">|</span> REPLACE <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [(<span class="operator">&lt;</span>字段名<span class="number">1</span><span class="operator">&gt;</span> [, <span class="operator">&lt;</span>字段名<span class="number">2</span><span class="operator">&gt;</span> …… ])] <span class="keyword">VALUES</span>(<span class="operator">&lt;</span>值<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>例: 向student数据表中添加一条记录(可只选择部分添加)<br>INSERT INTO student(sno, sname, age, sex, major, department)<br>VALUES(‘123’, ‘张三’, ‘23’, ‘男’, ‘计算机’, ‘信息学院’);</p></blockquote><h2 id="修改数据表中数据"><a href="#修改数据表中数据" class="headerlink" title="修改数据表中数据"></a>修改数据表中数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATA <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SET</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>字段名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>]……</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure><blockquote><p>例: 在student数据表中将张三年龄增加一岁<br>UPDATE student<br>SET age=age+1<br>WHERE sname=”张三”;</p></blockquote><h2 id="删除表中数据"><a href="#删除表中数据" class="headerlink" title="删除表中数据"></a>删除表中数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure><blockquote><p>例: 在student数据表中将张三数据删除<br>DELETE<br>FROM student<br>WHERE sname=”张三”;</p></blockquote>]]></content>
    
    
    <summary type="html">MySQL软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型和大型网站的开发都选MySQL作为网站数据库。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="数据库" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="http://lucylcarus.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL语法使用(一)</title>
    <link href="http://lucylcarus.github.io/posts/ed03a884.html"/>
    <id>http://lucylcarus.github.io/posts/ed03a884.html</id>
    <published>2024-09-16T08:27:09.000Z</published>
    <updated>2024-11-04T12:12:40.343Z</updated>
    
    <content type="html"><![CDATA[<p>写在最前面：MySQL对字母大小写不敏感，因此<strong>不必在意大小写</strong></p><h1 id="数据库管理"><a href="#数据库管理" class="headerlink" title="数据库管理"></a>数据库管理</h1><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>在 MySQL 中，可以使用 CREATE DATABASE 语句创建数据库，语法格式如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>通常情况下只写第一句即可</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">&lt;</span>字符集名<span class="operator">&gt;</span>] </span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> <span class="operator">&lt;</span>校对规则名<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure></p><p><code>[ ]</code>中的内容是可选的。语法说明如下：</p><p><code>db_name</code>创建数据库的名称。MySQL 的数据存储区将以目录方式表示 MySQL 数据库，因此数据库名称必须符合操作系统的文件夹命名规则，不能以数字开头，尽量要有实际意义。</p><p><code>IF NOT EXISTS</code>在创建数据库之前进行判断，只有该数据库目前尚不存在时才能执行操作。此选项可以用来避免数据库已经存在而重复创建的错误。</p><p><code>[DEFAULT] CHARACTER SET</code>指定数据库的字符集。指定字符集的目的是为了避免在数据库中存储的数据出现乱码的情况。如果在创建数据库时不指定字符集，那么就使用系统的默认字符集。</p><p><code>[DEFAULT] COLLATE</code>指定字符集的默认校对规则。</p><blockquote><p>例：创建名为test的数据库<br>CREATE DATABASE test;</p></blockquote><h2 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE db_name;</span><br></pre></td></tr></table></figure><blockquote><p>例：查看名为test的数据库<br>SHOW CREATE DATABASE test;</p></blockquote><h2 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE<span class="operator">|</span>SCHEMA db_name</span><br><span class="line">[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> charset_name</span><br><span class="line">[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> collation_name;</span><br></pre></td></tr></table></figure><blockquote><p>例：修改名为test的数据库<br>ALTER DATABASE test<br>DEFAULT CHARACTER SET gbk<br>DEFAULT COLLATE gbk_chinese_ci;</p></blockquote><h2 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE [IF <span class="keyword">EXISTS</span>] db_name;</span><br></pre></td></tr></table></figure><blockquote><p>例：删除名为test的数据库<br>DROP DATABASE test;</p></blockquote><h1 id="数据库表的管理"><a href="#数据库表的管理" class="headerlink" title="数据库表的管理"></a>数据库表的管理</h1><h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [TEMPORARY] <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> EXIST] <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[([<span class="operator">&lt;</span>字段定义<span class="operator">&gt;</span>],……,<span class="operator">|</span>[<span class="operator">&lt;</span>索引定义<span class="operator">&gt;</span>])]</span><br><span class="line">[table_option] [selsct_statement];</span><br></pre></td></tr></table></figure><p><code>TEMPORARY</code> 若使用该关键字，则创建的是临时表</p><p><code>IF NOT EXIST</code> 用于判断数据库中是否已经存在同名的表。若不存在，则执行<code>CREATE TABLE</code>操作。若数据库中已存在同名表，创建数据表时会出错，为避免此种情况，可使用<code>IF NOT EXIST</code>进行判断</p><p><code>&lt;表名&gt;</code> 要创建的表名，最多可有64个字符，不允许重名，不能使用SQL中的关键字</p><p><code>&lt;字段定义&gt;</code> 的书写格式如下:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [<span class="keyword">DEFAULT</span>] [AUTO_INCREMENT] [COMMENT <span class="string">&#x27;String&#x27;</span>] [&#123;<span class="operator">&lt;</span>列约束<span class="operator">&gt;</span>&#125;]</span><br></pre></td></tr></table></figure><p><code>DEFAULT</code> 若某字段设置有默认值，则当该字段未被输入数据时，自动填充设置的默认值</p><p><code>AUTO_INCREMENT</code> 设置自增数值属性，只有整数型数据能够设置</p><p><code>COMMENT &#39;String&#39;</code> 注释字段名</p><p><code>&lt;列约束&gt;</code> 列约束是对某一个特定字段的约束，包含在字段定义中，直接跟在该字段的其他定义之后，用空格分隔，不必指定字段名</p><p><code>&lt;索引定义&gt;</code> 为表中相关字段指定索引</p><p><code>table_option</code> 表选项，存储引擎，字符集等</p><p><code>selsct_statement</code> 定义表的查询语句</p><blockquote><p>例：创建名为students的数据表并添加基本属性<br>CREATE TABLE “students” (<br>“sno” CHAR(10) NOT NULL COMMENT “学号”,<br>“sname” VARCHAR(45) NOT NULL COMMENT “姓名”,<br>“sex” ENUM(“男”,”女”) NOT NULL DEFAULT “男” COMMENT “性别”,<br>“age” INT NOT NULL COMMENT “年龄”,<br>“major” VARCHAR(45) NOT NULL COMMENT “专业”,<br>“department” VARCHAR(45) NOT NULL COMMENT “院系”,<br>PRIMARY KEY (“sno”)  //主码约束<br>)</p></blockquote><p>定义表的约束：</p><ol><li>非空约束(NULL/NOT NULL)</li><li>唯一约束(UNIQUE)</li><li>主码约束(PRIMARY KEY)</li><li>外码约束(FOREIGN KEY)</li><li>检查约束(CHECK) </li></ol><h2 id="修改表的数据"><a href="#修改表的数据" class="headerlink" title="修改表的数据"></a>修改表的数据</h2><h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ADD</span> [<span class="operator">&lt;</span>新字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="operator">&lt;</span>完整性约束定义<span class="operator">&gt;</span>] [<span class="keyword">FIRST</span><span class="operator">|</span>AFTER已有字段名]</span><br></pre></td></tr></table></figure><blockquote><p>例：在students数据表中添加学生班级属性<br>ALTER TABLE students<br>ADD class VARCHAR(6);</p></blockquote><h3 id="重命名表名"><a href="#重命名表名" class="headerlink" title="重命名表名"></a>重命名表名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">RENAME [<span class="keyword">TO</span>] <span class="operator">&lt;</span>新表名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>例：将students数据表重命名为student<br>ALTER TABLE students<br>RENAME student</p></blockquote><h3 id="修改表头"><a href="#修改表头" class="headerlink" title="修改表头"></a>修改表头</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">CHANGE <span class="operator">&lt;</span>旧表头<span class="operator">&gt;</span> <span class="operator">&lt;</span>新表头<span class="operator">&gt;</span> <span class="operator">&lt;</span>新数据类型<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>注：即使不需要修改数据类型也要加上新数据类型，保持一致即可</span><br></pre></td></tr></table></figure><blockquote><p>例：将student数据表中的sname修改为sn<br>ALTER TABLE student<br>CHANFE sname sn VARCHAR(45);</p></blockquote><h3 id="修改表头数据类型和字段排序"><a href="#修改表头数据类型和字段排序" class="headerlink" title="修改表头数据类型和字段排序"></a>修改表头数据类型和字段排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">MODIFY <span class="operator">&lt;</span>表头<span class="number">1</span><span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [<span class="keyword">FIRST</span><span class="operator">|</span>AFTER 表头<span class="number">2</span>];</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>注：数据类型不可省略</span><br></pre></td></tr></table></figure><blockquote><p>例：将student数据表中sn的数据类型修改为CHAR(30)<br>ALTER TABLE student<br>MODIFY sn CHAR(30);</p><p>例：将student数据表中年龄age插到性别sex之前<br>ALTER TABLE student<br>MODIFY sex ENUM(“男”,”女”) AFTER age;</p></blockquote><h3 id="修改数据表存储引擎"><a href="#修改数据表存储引擎" class="headerlink" title="修改数据表存储引擎"></a>修改数据表存储引擎</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">ENGINE<span class="operator">=</span><span class="operator">&lt;</span>修改后的存储引擎<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例:将存储引擎切换为MyISAM<br>ALTER TABLE student<br>ENGINE=MyISAM;</p></blockquote><h3 id="删除表头和完整性约束"><a href="#删除表头和完整性约束" class="headerlink" title="删除表头和完整性约束"></a>删除表头和完整性约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>旧表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="operator">&lt;</span>表头<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例:删除student数据表中class班级属性<br>ALTER TABLE students<br>DROP class;</p></blockquote><h2 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例:删除student数据表<br>DROP TABLE student;</p></blockquote>]]></content>
    
    
    <summary type="html">MySQL是一个关系型数据库管理系统,是最流行的关系型数据库管理系统之一，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    <category term="数据库" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="http://lucylcarus.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MarkDown语法使用</title>
    <link href="http://lucylcarus.github.io/posts/308ecbbe.html"/>
    <id>http://lucylcarus.github.io/posts/308ecbbe.html</id>
    <published>2024-09-14T08:27:09.000Z</published>
    <updated>2024-11-03T14:03:05.821Z</updated>
    
    <content type="html"><![CDATA[<h1 id="标题语法"><a href="#标题语法" class="headerlink" title="标题语法"></a>标题语法</h1><p>使用井号# 表示标题，井号# 的个数代表标题级数</p><blockquote><p>例：</p><pre><code># 一级标题 ## 二级标题 ### 三级标题</code></pre></blockquote><h1 id="段落语法"><a href="#段落语法" class="headerlink" title="段落语法"></a>段落语法</h1><ol><li><p>结尾添加一个空格换行<br>第二行</p></li><li><p>使用<code>&lt;br&gt;</code>标签换行<br></p></li><li><p>中间空一行切换段落</p></li></ol><h1 id="字体设置"><a href="#字体设置" class="headerlink" title="字体设置"></a>字体设置</h1><ol><li><p>使用一个星号*变为<em>斜体</em></p></li><li><p>使用两个星号**加粗<strong>字体</strong></p></li><li><p>使用三个星号***变为<strong><em>斜体+粗体</em></strong></p></li><li><p>使用两个波浪线~~表示<del>删除线</del></p></li></ol><h1 id="引用块"><a href="#引用块" class="headerlink" title="引用块"></a>引用块</h1><p>使用一个&gt;表示引用块</p><blockquote><p>引用块</p></blockquote><h1 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h1><p>代码前后使用三个反单引号```表示代码块(英文下的~)<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code</span><br></pre></td></tr></table></figure></p><h1 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h1><p>使用三个短横线—-表示分割线</p><hr><h1 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h1><p>使用数字加点表示有序列表(可嵌套)</p><ol><li>1</li><li>2</li><li>3<ol><li>3-1</li><li>3-2</li></ol></li><li>4</li></ol><h1 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h1><p>使用一个短横线表示无序列表(可嵌套)</p><ul><li>1</li><li>2</li><li>3<ul><li>3-1</li><li>3-2</li></ul></li><li>4</li></ul><h1 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h1><p>使用方括号[ ]表示显示的内容，其后接圆括号( )并在其中输入网址，此外还可以添加一段文字以供悬停查看</p><blockquote><p>例：<br> 这是一个链接 <a href="https://markdown.com.cn" title="最好的markdown教程">Markdown语法</a>。</p></blockquote><h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><p>使用感叹号！方括号[ ]和圆括号( )实现图片输出，方括号[ ]内可写入文字，圆括号( )内写入文件路径<br><img src="https://img.picui.cn/free/2024/09/18/66ea8743bfa09.png" alt="这是一张图片"></p><h1 id="表示为代码"><a href="#表示为代码" class="headerlink" title="表示为代码"></a>表示为代码</h1><p>使用一对反单引号``表示为代码</p><blockquote><p>例：<br> 这是代码<code>npm</code></p></blockquote>]]></content>
    
    
    <summary type="html">Markdown 是一种轻量级的标记语言，可用于在纯文本文档中添加格式化元素。它使用易读易写的纯文本格式编写文档，可与HTML混编，可导出 HTML、PDF 以及本身的 .md 格式的文件。因简洁、高效、易读、易写，Markdown被大量用于如Github、Wikipedia、简书等平台。</summary>
    
    
    
    <category term="使用教程" scheme="http://lucylcarus.github.io/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="MarkDown" scheme="http://lucylcarus.github.io/tags/MarkDown/"/>
    
  </entry>
  
</feed>
