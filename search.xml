<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux命令行(六)</title>
      <link href="/posts/b041290f.html"/>
      <url>/posts/b041290f.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文专业术语较多，建议搭配百度百科查看</strong></p><h1 id="存储结构与管理硬盘"><a href="#存储结构与管理硬盘" class="headerlink" title="存储结构与管理硬盘"></a>存储结构与管理硬盘</h1><h2 id="一切从-开始"><a href="#一切从-开始" class="headerlink" title="一切从/开始"></a>一切从<code>/</code>开始</h2><p>在Linux系统中，目录、字符设备、套接字、硬盘、光驱、打印机等都被抽象成文件形式，即一切都是文件<br>Linux系统中的一切文件都是从根目录<code>/</code>开始的，并按照文件系统层次标准(FHS)采用倒树状结构来存放文件，以及定义了常见目录的用途</p><div class="note danger morden flat"><p>在Linux系统中文件和目录名称是严格区分大小写的</p></div><p>Linux系统中文件存储的结构如下图所示<br><img src="https://www.helloimg.com/i/2024/11/11/67317327c4395.png" alt=""></p><p>在Linux系统中，最常见的目录以及所对应的存放内容如下表所示</p><div class="table-container"><table><thead><tr><th>目录名称</th><th>应放置文件的内容</th></tr></thead><tbody><tr><td>/boot</td><td>系统启动文件，如内核和启动菜单</td></tr><tr><td>/dev</td><td>设备文件，代表系统中的硬件设备</td></tr><tr><td>/etc</td><td>系统配置文件和启动脚本</td></tr><tr><td>/root</td><td>管理员的个人主目录</td></tr><tr><td>/home</td><td>用户的个人主目录</td></tr><tr><td>/bin</td><td>基本用户命令，可在单用户模式下使用</td></tr><tr><td>/lib</td><td>系统共享库，供/bin和/sbin命令使用</td></tr><tr><td>/sbin</td><td>系统管理命令，供管理员使用</td></tr><tr><td>/media</td><td>挂载点目录，用于可移动设备</td></tr><tr><td>/opt</td><td>第三方应用软件包</td></tr><tr><td>/srv</td><td>服务数据目录，存放网络服务数据</td></tr><tr><td>/tmp</td><td>临时文件目录，所有用户均可访问</td></tr><tr><td>/proc</td><td>虚拟文件系统，提供进程和内核信息</td></tr><tr><td>/usr/local</td><td>本地安装的软件和应用程序</td></tr><tr><td>/usr/sbin</td><td>系统管理员使用的非基本管理命令</td></tr><tr><td>/usr/share</td><td>共享数据，如文档和帮助文件</td></tr><tr><td>/var</td><td>动态数据，如日志文件和临时文件</td></tr><tr><td>/lost+found</td><td>文件系统恢复区，存放丢失的文件碎片</td></tr></tbody></table></div><p>在Linux系统中还有路径这一个重要概念，路径指的是如何定位到某个文件，分为绝对路径与相对路径</p><ol><li>绝对路径指的是从根目录(/)开始写起的文件或目录名称，如<code>/root/Desktop</code></li><li>相对路径则指的是相对于当前路径的写法，如当前位于<code>/root</code>目录，可直接写<code>Desktop</code></li></ol><h2 id="物理设备的命名规则"><a href="#物理设备的命名规则" class="headerlink" title="物理设备的命名规则"></a>物理设备的命名规则</h2><p>在Linux系统中一切都是文件，硬件设备也不例外。既然是文件，就必须有文件名称。系统内核中的<code>udev</code>设备管理器会自动把硬件名称规范起来，另外，<code>udev</code>设备管理器的服务会一直以守护进程的形式运行并侦听内核发出的信号来管理<code>/dev</code>目录下的设备文件</p><p>Linux系统中常见的硬件设备及其文件名称如下表所示</p><div class="table-container"><table><thead><tr><th>硬件设备</th><th>文件名称</th></tr></thead><tbody><tr><td><a href="https://baike.baidu.com/item/IDE%E8%AE%BE%E5%A4%87/5912868">IDE设备</a></td><td>/dev/hd[a-d]</td></tr><tr><td><a href="https://baike.baidu.com/item/NVM%20Express/22658188">NVMe设备</a></td><td>/dev/nvme[0-23]</td></tr><tr><td><a href="https://baike.baidu.com/item/scsi%E7%A1%AC%E7%9B%98/11015161">SCSI</a>/<a href="https://baike.baidu.com/item/SATA%E7%A1%AC%E7%9B%98/3947233">SATA</a>/<a href="https://baike.baidu.com/item/u%E7%9B%98/99846">U盘</a></td><td>/dev/sd[a-z]</td></tr><tr><td><a href="https://baike.baidu.com/item/Virtio/2997269">virtio设备</a></td><td>/dev/vd[a-z]</td></tr><tr><td><a href="https://baike.baidu.com/item/%E8%BD%AF%E7%9B%98%E9%A9%B1%E5%8A%A8%E5%99%A8">软驱</a></td><td>/dev/fd[0-1]</td></tr><tr><td><a href="https://baike.baidu.com/item/%E6%89%93%E5%8D%B0%E6%9C%BA">打印机</a></td><td>/dev/lp[0-15]</td></tr><tr><td><a href="https://baike.baidu.com/item/%E5%85%89%E9%A9%B1">光驱</a></td><td>/dev/cdrom</td></tr><tr><td><a href="https://baike.baidu.com/item/%E9%BC%A0%E6%A0%87/122323">鼠标</a></td><td>/dev/mouse</td></tr><tr><td><a href="https://baike.baidu.com/item/%E7%A3%81%E5%B8%A6%E6%9C%BA">磁带机</a></td><td>/dev/st0或/dev/ht0</td></tr></tbody></table></div><p>一般的硬盘设备都是以<code>/dev/sd</code>开头，一台主机上可以有多个硬盘，对应<code>a~z</code>,硬盘的分区编号详情如下</p><ol><li>主分区或扩展分区编号从<code>1</code>开始，到<code>4</code>结束</li><li>逻辑分区从编号<code>5</code>开始</li></ol><p>比如，<code>/dev/sda5</code>包含以下信息</p><ol><li><code>/dev</code>硬件设备文件所在的目录</li><li><code>/sd</code>存储设备，此为SCSI设备</li><li><code>a</code>硬盘顺序号，此为第一个被识别到的设备</li><li><code>5</code>分区顺序号，且为逻辑分区</li></ol><h2 id="文件系统与数据资料"><a href="#文件系统与数据资料" class="headerlink" title="文件系统与数据资料"></a>文件系统与数据资料</h2><p>用户在硬件存储设备中执行的文件建立、写入、读取、修改、转存与控制等操作都是依靠文件系统来完成的，文件系统的作用是合理规划硬盘，以保证用户正常的使用需求，Linux系统支持数十种文件系统，最常见的文件系统如下所示</p><ol><li><p><code>Ext2</code>：Linux系统的第一个商业级文件系统，基本沿袭了UNIX文件系统的设计标准，但由于不包含日志读写功能，数据丢失的可能性很大</p></li><li><p><code>Ext3</code>：是一款日志文件系统，它会把整个硬盘的每个写入动作的细节都预先记录下来，然后再进行实际操作，以便在发生异常宕机后能回溯追踪到被中断的部分，Ext3能够在系统异常宕机时避免文件系统资料丢失，并能自动修复数据的不一致与错误，然而，当硬盘容量较大时，所需的修复时间也会很长，而且也不能100%地保证资料不会丢失</p></li><li><p><code>Ext4</code>：Ext3的改进版本，作为RHEL 6系统中默认的文件管理系统，它支持的存储容量高达1EB<code>（1EB=1,073,741,824GB）</code>，且能够有无限多的子目录，另外，Ext4文件系统能够批量分配block（块），从而极大地提高了读写效率</p></li><li><p><code>XFS</code>：是一种高性能的日志文件系统，而且是RHEL 7/8中默认的文件管理系统，它的优势在发生意外宕机后尤其明显，即可以快速地恢复可能被破坏的文件，而且强大的日志功能只需花费极低的计算和存储性能</p></li></ol><h2 id="挂载硬件设备"><a href="#挂载硬件设备" class="headerlink" title="挂载硬件设备"></a>挂载硬件设备</h2><p>在拿到一块全新的硬盘存储设备后要先<a href="https://baike.baidu.com/item/%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA">分区</a>，然后<a href="https://baike.baidu.com/item/%E6%A0%BC%E5%BC%8F%E5%8C%96/650">格式化</a>，最后才能<a href="https://baike.baidu.com/item/%E6%8C%82%E8%BD%BD">挂载</a>并正常使用</p><h3 id="mount命令"><a href="#mount命令" class="headerlink" title="mount命令"></a><code>mount</code>命令</h3><p><code>mount</code>命令用于挂载文件系统，格式为<code>mount 文件系统 挂载目录</code>，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>作用</th><th>参数</th></tr></thead><tbody><tr><td>-a</td><td>挂载所有在<code>/etc/fstab</code>中定义的文件系统</td></tr><tr><td>-t</td><td>指定文件系统的类型</td></tr></tbody></table></div><div class="note info modern"><p>如果要挂载网络存储设备，推荐使用<code>UUID</code>（Universally Unique Identifier，通用唯一识别码）进行挂载操作。UUID是一串用于标识每块独立硬盘的字符串，具有唯一性及稳定性，特别适合用来挂载网络设备。<br>使用<code>blkid</code>命令可以显示设备的属性信息,语法格式为<code>blkid 设备名</code></p></div><p>执行完<code>mount</code>命令后就能使用文件系统了，但系统在重启后挂载就会失效，如果想让硬件设备和目录永久地进行自动关联，就必须把挂载信息按照指定的填写格式<code>设备文件 挂载目录 格式类型 权限选项 是否备份 是否自检</code>写入到<code>/etc/fstab</code>文件中，详见下表</p><div class="table-container"><table><thead><tr><th>字段</th><th>意义</th></tr></thead><tbody><tr><td>设备文件</td><td>一般为设备的路径+设备名称，也可以写唯一识别码(UUID)</td></tr><tr><td>挂载目录</td><td>指定要挂载到的目录，需在挂载前创建好</td></tr><tr><td>格式类型</td><td>指定文件系统的格式，比如<code>Ext3、Ext4、XFS、SWAP、iso9660</code>等</td></tr><tr><td>权限选项</td><td>若设置为<code>defaults</code>，则默认权限为：<code>rw, suid, dev, exec, auto, nouser, async</code></td></tr><tr><td>是否备份</td><td>若为<code>1</code>则开机后使用dump进行磁盘备份，为<code>0</code>则不备份</td></tr><tr><td>是否自检</td><td>若为<code>1</code>则开机后自动进行磁盘自检，为<code>0</code>则不自检</td></tr></tbody></table></div><div class="note info modern"><p>写入到<code>/etc/fstab</code>文件中的设备信息并不会立即生效，需要使用<code>mount -a</code>进行自动挂载</p></div><h3 id="df命令"><a href="#df命令" class="headerlink" title="df命令"></a><code>df</code>命令</h3><p><code>df</code>命令用于查看已挂载的磁盘空间使用情况，语法格式为<code>df -h</code></p><h3 id="unmout命令"><a href="#unmout命令" class="headerlink" title="unmout命令"></a><code>unmout</code>命令</h3><p><code>unmout</code>命令用于卸载设备或文件系统，语法格式为<code>umount [设备文件/挂载目录]</code></p><h3 id="lsblk命令"><a href="#lsblk命令" class="headerlink" title="lsblk命令"></a><code>lsblk</code>命令</h3><p><code>lsblk</code>命令用于查看已挂载的磁盘的空间使用情况</p><h2 id="添加硬盘设备"><a href="#添加硬盘设备" class="headerlink" title="添加硬盘设备"></a>添加硬盘设备</h2><ol><li><p>打开虚拟机，点击<code>编辑虚拟机设置</code></p></li><li><p>点击<code>添加</code>，选择<code>硬盘</code>，点击<code>下一步</code></p></li><li><p>选择虚拟硬盘的类型，单击<code>下一步</code></p></li><li><p>选中<code>创建新虚拟磁盘</code>单选按钮，点击<code>下一步</code></p></li><li><p>为磁盘配额，基本<code>保持默认</code>即可，点击<code>下一步</code></p></li><li><p>指定磁盘文件，继续采用<code>默认设置</code>即可，点击<code>完成</code></p></li><li><p>查看新硬盘是否添加成功，点击<code>确定</code>，重启虚拟机</p></li></ol><h3 id="fdisk命令"><a href="#fdisk命令" class="headerlink" title="fdisk命令"></a><code>fdisk</code>命令</h3><p><code>fdisk</code>命令用于新建、修改及删除磁盘的分区表信息，语法格式为<code>fdisk 磁盘名称</code></p><div class="table-container"><table><thead><tr><th>字段</th><th>意义</th></tr></thead><tbody><tr><td>参数</td><td>作用</td></tr><tr><td>m</td><td>查看全部可用的参数</td></tr><tr><td>n</td><td>添加新的分区</td></tr><tr><td>d</td><td>删除某个分区信息</td></tr><tr><td>l</td><td>列出所有可用的分区类型</td></tr><tr><td>t</td><td>改变某个分区的类型</td></tr><tr><td>p</td><td>查看分区表信息</td></tr><tr><td>w</td><td>保存并退出</td></tr><tr><td>q</td><td>不保存直接退出</td></tr></tbody></table></div><h3 id="du命令"><a href="#du命令" class="headerlink" title="du命令"></a><code>du</code>命令</h3><p><code>du</code>命令用查看分区或目录所占用的磁盘容量大小，语法格式为<code>du -sh目录名称</code></p><h2 id="添加交换分区"><a href="#添加交换分区" class="headerlink" title="添加交换分区"></a>添加交换分区</h2><p>交换分区是一种通过在硬盘中预先划分一定的空间，然后把内存中暂时不常用的数据临时存放到硬盘中，以便腾出物理内存空间让更活跃的程序服务来使用的技术，其设计目的是为了解决真实物理内存不足的问题，通俗来讲就是让硬盘帮内存分担压力，但由于交换分区是通过硬盘设备读写数据的，速度要比物理内存慢，所以只有当真实的物理内存耗尽后才会调用交换分区的资源</p><div class="note info modern"><p>交换分区的大小一般为真实物理内存的1.5～2倍</p></div><p><code>mkswap</code>命令用于对新设备进行交换分区格式化，语法格式为<code>mkswap 设备名称</code><br><code>swapon</code>命令用于激活新的交换分区设备，语法格式为<code>swapon 设备名称</code></p><h2 id="磁盘容量配额"><a href="#磁盘容量配额" class="headerlink" title="磁盘容量配额"></a>磁盘容量配额</h2><p>Linux系统的设计初衷就是让多人一起使用并执行各自的任务，从而成为多用户、多任务的操作系统，但是，硬件资源是固定且有限的，<code>root</code>管理员需要使用磁盘容量配额服务来限制某位用户或某个用户组针对特定文件夹可以使用的最大硬盘空间或最大文件个数，一旦达到这个最大值就不再允许继续使用，可以使用<code>quota</code>技术进行磁盘容量配额管理，从而限制用户的硬盘可用容量或所能创建的最大文件个数，<code>quota</code>技术还有软限制和硬限制的功能</p><ol><li>软限制(soft)：当达到软限制时会提示用户，但仍允许用户在限定的额度内继续使用</li><li>硬限制(hard)：当达到硬限制时会提示用户，且强制终止用户的操作</li></ol><h3 id="xfs-quota命令"><a href="#xfs-quota命令" class="headerlink" title="xfs_quota命令"></a><code>xfs_quota</code>命令</h3><p><code>xfs_quota</code>命令用于管理设备的磁盘容量配额，语法格式为<code>xfs_quota [参数] 配额 文件系统</code></p><ol><li><code>-c</code>参数用于以参数的形式设置要执行的命令</li><li><code>-x</code>参数是专家模式，让运维人员能够对<code>quota</code>服务进行更多复杂的配置</li></ol>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDown扩展语法</title>
      <link href="/posts/d8be4440.html"/>
      <url>/posts/d8be4440.html</url>
      
        <content type="html"><![CDATA[<h1 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h1><h2 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h2><p>使用<code>Markdown</code>语法来制作表格时，使用<code>|</code>来分隔不同的单元格，使用三个或多个<code>-</code>来分隔表头和其他行，如下所示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 表头 | 表头 |</span><br><span class="line">|------|------|</span><br><span class="line">| 第一行第一列 | 第一行第二列 |</span><br><span class="line">| 第二行第一列 | 第二行第二列 |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th>表头</th><th>表头</th></tr></thead><tbody><tr><td>第一行第一列</td><td>第一行第二列</td></tr><tr><td>第二行第一列</td><td>第二行第二列</td></tr></tbody></table></div><h2 id="对齐方式"><a href="#对齐方式" class="headerlink" title="对齐方式"></a>对齐方式</h2><p>通过在标题行中<code>-</code>左右侧添加<code>:</code>实现文本对齐</p><h3 id="左对齐"><a href="#左对齐" class="headerlink" title="左对齐"></a>左对齐</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 表头 | 表头 |</span><br><span class="line">|:------|:------|</span><br><span class="line">| 第一行第一列 | 第一行第二列 |</span><br><span class="line">| 第二行第一列 | 第二行第二列 |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th style="text-align:left">表头</th><th style="text-align:left">表头</th></tr></thead><tbody><tr><td style="text-align:left">第一行第一列</td><td style="text-align:left">第一行第二列</td></tr><tr><td style="text-align:left">第二行第一列</td><td style="text-align:left">第二行第二列</td></tr></tbody></table></div><h3 id="右对齐"><a href="#右对齐" class="headerlink" title="右对齐"></a>右对齐</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 表头 | 表头 |</span><br><span class="line">|------:|------:|</span><br><span class="line">| 第一行第一列 | 第一行第二列 |</span><br><span class="line">| 第二行第一列 | 第二行第二列 |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th style="text-align:right">表头</th><th style="text-align:right">表头</th></tr></thead><tbody><tr><td style="text-align:right">第一行第一列</td><td style="text-align:right">第一行第二列</td></tr><tr><td style="text-align:right">第二行第一列</td><td style="text-align:right">第二行第二列</td></tr></tbody></table></div><h3 id="居中对齐"><a href="#居中对齐" class="headerlink" title="居中对齐"></a>居中对齐</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 表头 | 表头 |</span><br><span class="line">|:------:|:------:|</span><br><span class="line">| 第一行第一列 | 第一行第二列 |</span><br><span class="line">| 第二行第一列 | 第二行第二列 |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th style="text-align:center">表头</th><th style="text-align:center">表头</th></tr></thead><tbody><tr><td style="text-align:center">第一行第一列</td><td style="text-align:center">第一行第二列</td></tr><tr><td style="text-align:center">第二行第一列</td><td style="text-align:center">第二行第二列</td></tr></tbody></table></div><h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><h3 id="添加超链接"><a href="#添加超链接" class="headerlink" title="添加超链接"></a>添加超链接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 网页 | 网址 |</span><br><span class="line">|------|------|</span><br><span class="line">| 百度官网 | [https://www.baidu.com](https://www.baidu.com) |</span><br><span class="line">| 博客首页 | [https://lucylcarus.github.io](https://lucylcarus.github.io) |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th>网页</th><th>网址</th></tr></thead><tbody><tr><td>百度官网</td><td><a href="https://www.baidu.com">https://www.baidu.com</a></td></tr><tr><td>博客首页</td><td><a href="https://lucylcarus.github.io">https://lucylcarus.github.io</a></td></tr></tbody></table></div><h3 id="显示为代码"><a href="#显示为代码" class="headerlink" title="显示为代码"></a>显示为代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 前端三大件 | 含义 |</span><br><span class="line">|------|------|</span><br><span class="line">| `HTML` | 全称HyperText Markup Language，超文本标记语言，是一种用于创建网页的标准标记语言 |</span><br><span class="line">| `CSS` | 全称Cascading Style Sheets，层叠样式表，是一种用来为结构化文档添加样式的计算机语言 |</span><br><span class="line">| `JS` | 全称JavaScript，是一种具有函数优先特性的轻量级、解释型或者说即时编译型的编程语言 |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th>前端三大件</th><th>含义</th></tr></thead><tbody><tr><td><code>HTML</code></td><td>全称HyperText Markup Language，超文本标记语言，是一种用于创建网页的标准标记语言</td></tr><tr><td><code>CSS</code></td><td>全称Cascading Style Sheets，层叠样式表，是一种用来为结构化文档添加样式的计算机语言</td></tr><tr><td><code>JS</code></td><td>全称JavaScript，是一种具有函数优先特性的轻量级、解释型或者说即时编译型的编程语言</td></tr></tbody></table></div><h3 id="单元格中显示"><a href="#单元格中显示" class="headerlink" title="单元格中显示|"></a>单元格中显示<code>|</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| 运算符 | 含义 |</span><br><span class="line">|------|------|</span><br><span class="line">| &amp;#124;&amp;#124; | 逻辑运算中的或 |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th>运算符</th><th>含义</th></tr></thead><tbody><tr><td>&#124;&#124;</td><td>逻辑运算中的或</td></tr></tbody></table></div><h3 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 符号 | 含义 |</span><br><span class="line">|------|------|</span><br><span class="line">| `*` | *斜体* |</span><br><span class="line">| `**` | **加粗** |</span><br><span class="line">| `***` | ***加粗斜体*** |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td><code>*</code></td><td><em>斜体</em></td></tr><tr><td><code>**</code></td><td><strong>加粗</strong></td></tr><tr><td><code>***</code></td><td><strong><em>加粗斜体</em></strong></td></tr></tbody></table></div><div class="note info modern"><p>添加反引号防止符号<code>*</code>被渲染</p></div><h3 id="单元格内换行"><a href="#单元格内换行" class="headerlink" title="单元格内换行"></a>单元格内换行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| HTML标签 | 含义 |</span><br><span class="line">|------|------|</span><br><span class="line">| `&lt;br&gt;`标签 | 换行&lt;br&gt;第二行 |</span><br><span class="line">| `&lt;a&gt;`标签 | 超链接 |</span><br><span class="line">| `&lt;img&gt;`标签 | 图像 |</span><br></pre></td></tr></table></figure><p>效果如下</p><div class="table-container"><table><thead><tr><th>HTML标签</th><th>含义</th></tr></thead><tbody><tr><td><code>&lt;br&gt;</code>标签</td><td>换行<br>第二行</td></tr><tr><td><code>&lt;a&gt;</code>标签</td><td>超链接</td></tr><tr><td><code>&lt;img&gt;</code>标签</td><td>图像</td></tr></tbody></table></div><div class="note info modern"><p>添加反引号防止HTML标签被渲染</p></div><h2 id="HTML中扩展"><a href="#HTML中扩展" class="headerlink" title="HTML中扩展"></a>HTML中扩展</h2><h3 id="合并单元格"><a href="#合并单元格" class="headerlink" title="合并单元格"></a>合并单元格</h3><p><code>Markdown</code>并没有单元格合并语法，但是<code>Markdown</code>是兼容<code>HTML</code>的，因此，我们可以通过<code>HTML</code>的方式实现单元格合并，基础的<code>HTML</code>表格如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><table>    <tr>        <td>行1列1</td>         <td>行1列2</td>         <td>行1列3</td>     </tr>    <tr>        <td>行2列1</td>         <td>行2列2</td>         <td>行2列3</td>     </tr>    <tr>        <td>行3列1</td>         <td>行3列2</td>         <td>行3列3</td>     </tr></table><div class="note info modern"><p>每对<code>&lt;tr&gt;</code>标签之间为一行，每对<code>&lt;td&gt;</code>标签之间为一列</p></div><h3 id="合并列"><a href="#合并列" class="headerlink" title="合并列"></a>合并列</h3><p><code>colspan</code>规定单元格可纵跨的列数</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">2</span>&gt;</span>合并两列<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">2</span>&gt;</span>合并三列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><table>    <tr>        <td>行1列1</td>         <td>行1列2</td>         <td>行1列3</td>    </tr>    <tr>        <td colspan=2>合并两列</td>         <td>行2列3</td>     </tr>    <tr>        <td colspan=3>合并三列</td>    </tr></table><h3 id="合并行"><a href="#合并行" class="headerlink" title="合并行"></a>合并行</h3><p><code>rowspan</code>规定单元格可横跨的行数</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">3</span>&gt;</span>合并三行<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">2</span>&gt;</span>合并两行<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><table>    <tr>        <td>行1列1</td>         <td rowspan=3>合并三行</td>        <td>行1列3</td>    </tr>    <tr>        <td rowspan=2>合并两行</td>         <td>行2列3</td>     </tr>    <tr>        <td>行3列3</td>     </tr></table><h3 id="添加表头"><a href="#添加表头" class="headerlink" title="添加表头"></a>添加表头</h3><p>使用<code>&lt;th&gt;</code>标签<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>效果如下</p><table>    <tr>        <th>表头1</th>        <th>表头2</th>        <th>表头3</th>    </tr>    <tr>        <td>行1列1</td>         <td>行1列2</td>         <td>行1列3</td>     </tr>    <tr>        <td>行2列1</td>         <td>行2列2</td>         <td>行2列3</td>     </tr>    <tr>        <td>行3列1</td>         <td>行3列2</td>         <td>行3列3</td>     </tr></table><h3 id="表格颜色"><a href="#表格颜色" class="headerlink" title="表格颜色"></a>表格颜色</h3><p>使用<code>bgcolor</code>属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;yellow&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;red&#x27;</span>&gt;</span>表头1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;blue&#x27;</span>&gt;</span>表头2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;green&#x27;</span>&gt;</span>表头3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;purple&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;pink&#x27;</span>&gt;</span>行2列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;pink&#x27;</span>&gt;</span>行2列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;pink&#x27;</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><table bgcolor='yellow'>    <tr>        <th bgcolor='red'>表头1</th>        <th bgcolor='blue'>表头2</th>        <th bgcolor='green'>表头3</th>    </tr>    <tr bgcolor='purple'>        <td>行1列1</td>         <td>行1列2</td>         <td>行1列3</td>     </tr>    <tr>        <td bgcolor='pink'>行2列1</td>         <td bgcolor='pink'>行2列2</td>         <td bgcolor='pink'>行2列3</td>     </tr>    <tr>        <td>行3列1</td>         <td>行3列2</td>         <td>行3列3</td>     </tr></table><h3 id="对齐方式-1"><a href="#对齐方式-1" class="headerlink" title="对齐方式"></a>对齐方式</h3><h4 id="align"><a href="#align" class="headerlink" title="align"></a><code>align</code></h4><p>使用<code>align</code>属性，<code>center</code>居中，<code>left</code>左对齐，<code>right</code>右对齐<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span>&gt;</span>表头1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>表头2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span>表头3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行1列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行2列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行2列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行3列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行3列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>行3列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>效果如下</p><table>    <tr>        <th align="left">表头1</th>        <th align="center">表头2</th>        <th align="right">表头3</th>    </tr>    <tr>        <td align="center">行1列1</td>         <td align="center">行1列2</td>         <td align="center">行1列3</td>     </tr>    <tr>        <td align="center">行2列1</td>         <td align="center">行2列2</td>         <td align="center">行2列3</td>     </tr>    <tr>        <td align="center">行3列1</td>         <td align="center">行3列2</td>         <td align="center">行3列3</td>     </tr></table><h4 id="tbody-align"><a href="#tbody-align" class="headerlink" title="tbody+align"></a><code>tbody</code>+<code>align</code></h4><p>使用<code>&lt;tbody&gt;</code>标签和<code>align</code>属性可以帮助我们省略很多操作</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><table>    <tbody align="center">        <tr>            <th>表头1</th>            <th>表头2</th>            <th>表头3</th>        </tr>        <tr>            <td>行1列1</td>             <td>行1列2</td>             <td>行1列3</td>         </tr>        <tr>            <td>行2列1</td>             <td>行2列2</td>             <td>行2列3</td>         </tr>        <tr>            <td>行3列1</td>             <td>行3列2</td>             <td>行3列3</td>         </tr>    </tbody></table><div class="note info modern"><p><code>&lt;tbody&gt;</code>标签封装了一系列表格的行(<code>&lt;tr&gt;</code>元素)，代表了它们是表格(<code>&lt;table&gt;</code>)主要内容的组成部分</p></div><h3 id="表名"><a href="#表名" class="headerlink" title="表名"></a>表名</h3><p>使用<code>&lt;caption&gt;</code>标签，可搭配<code>align</code>属性使用，<code>left</code>展示在表格左边，<code>top</code>显示在表格前面，<code>right</code>显示在表格右边，<code>bottom</code>显示在表格下面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">caption</span> <span class="attr">align</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span></span><br><span class="line">        表的名称</span><br><span class="line">    <span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>表头3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行1列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行2列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列1<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列2<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>行3列3<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><table>    <caption align="bottom">        表的名称    </caption>    <tbody align="center">        <tr>            <th>表头1</th>            <th>表头2</th>            <th>表头3</th>        </tr>        <tr>            <td>行1列1</td>             <td>行1列2</td>             <td>行1列3</td>         </tr>        <tr>            <td>行2列1</td>             <td>行2列2</td>             <td>行2列3</td>         </tr>        <tr>            <td>行3列1</td>             <td>行3列2</td>             <td>行3列3</td>         </tr>    </tbody></table><h1 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">脚注[^1]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">^1</span>]: <span class="link">这是一个脚注</span></span><br></pre></td></tr></table></figure><p>效果如下</p><p>脚注<sup><a href="#fn_1" id="reffn_1">1</a></sup></p><blockquote id="fn_1"><sup>1</sup>. 这是一个脚注<a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote><h1 id="角标"><a href="#角标" class="headerlink" title="角标"></a>角标</h1><h2 id="上角标"><a href="#上角标" class="headerlink" title="上角标"></a>上角标</h2><p>使用<code>&lt;sup&gt;</code>标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2<span class="tag">&lt;<span class="name">sup</span>&gt;</span>3<span class="tag">&lt;/<span class="name">sup</span>&gt;</span>=8</span><br></pre></td></tr></table></figure><p>效果如下</p><p>2<sup>3</sup>=8</p><h2 id="下角标"><a href="#下角标" class="headerlink" title="下角标"></a>下角标</h2><p>使用<code>&lt;sub&gt;</code>标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CO<span class="tag">&lt;<span class="name">sub</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>为二氧化碳</span><br></pre></td></tr></table></figure><p>效果如下</p><p>CO<sub>2</sub>为二氧化碳</p><h1 id="文字样式"><a href="#文字样式" class="headerlink" title="文字样式"></a>文字样式</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span>显示为红色<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">20</span>&gt;</span>文字大小为20<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span>显示在中间<span class="tag">&lt;/<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;华文琥珀&quot;</span>&gt;</span>华文琥珀字体<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span>右对齐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><p><font color=red>显示为红色</font><br></p><p><font size=20>文字大小为20</font><br></p><p><center>显示在中间</center><br></p><p><font face="华文琥珀">华文琥珀字体</font><br></p><p align="right">右对齐</p><div class="note info modern"><p><code>HTML5</code>不支持<code>&lt;font&gt;</code>标签，<code>HTML 4.01</code>已废弃<code>&lt;center&gt;</code>标签</p></div>]]></content>
      
      
      <categories>
          
          <category> 博客相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MarkDown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux命令行(五)</title>
      <link href="/posts/294e617d.html"/>
      <url>/posts/294e617d.html</url>
      
        <content type="html"><![CDATA[<h1 id="用户身份与文件权限"><a href="#用户身份与文件权限" class="headerlink" title="用户身份与文件权限"></a>用户身份与文件权限</h1><h2 id="用户身份与能力"><a href="#用户身份与能力" class="headerlink" title="用户身份与能力"></a>用户身份与能力</h2><p>在<code>RHEL 8</code>系统中，用户身份有以下属性</p><ol><li>管理员UID为<code>0</code><br> 系统的管理员用户</li><li>系统用户UID为<code>1~999</code><br> Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序会由独立的系统用户负责运行，进而有效控制被破坏范围</li><li>普通用户UID从<code>1000</code>开始<br> 是由管理员创建的用于日常工作的用户</li></ol><div class="note danger no-icon flat"><p>UID不允许冲突，管理员创建的普通用户的UID默认是从1000开始的(即使前面有闲置的号码)</p></div><p>为方便管理属于同一组的用户，Linux系统中还引入了用户组的概念，通过使用用户组号码(GID)可以把多个用户加入到同一个组中，从而方便为组中的用户同一规划权限或指定任务</p><p>另外，在Linux系统中创建用户的时候，将会自动创建一个与其同名的基本用户组，而且这个基本用户组只会有该用户一个人。如果该用户以后被归纳到其他用户组，则这个其他用户组称之为扩展用户组，一个用户只有一个基本用户组，但可以有多个扩展用户组，从而满足日常的工作需要</p><h3 id="id命令"><a href="#id命令" class="headerlink" title="id命令"></a><code>id</code>命令</h3><p><code>id</code>命令用于显示用户组的详细信息</p><blockquote><p>例:<br>查看root用户的详细信息<br>id root</p></blockquote><h3 id="useradd命令"><a href="#useradd命令" class="headerlink" title="useradd命令"></a><code>useradd</code>命令</h3><p><code>useradd</code>命令用于创建新的用户账户，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-d</td><td>指定用户的家目录(默认为<code>/home/username</code>)</td></tr><tr><td>-e</td><td>账户到期时间，格式为<code>YYYY-MM-DD</code></td></tr><tr><td>-u</td><td>指定该账户的默认UID</td></tr><tr><td>-g</td><td>指定一个初始的用户基本组用户基本组(必须已经存在)</td></tr><tr><td>-G</td><td>指定一个或多个扩展用户组</td></tr><tr><td>-N</td><td>不创建与用户同名的基本用户组</td></tr><tr><td>-s</td><td>指定该用户的默认Shell解释器</td></tr></tbody></table></div><blockquote><p>例:<br>创建jack用户<br>useradd jack</p></blockquote><h3 id="groupadd命令"><a href="#groupadd命令" class="headerlink" title="groupadd命令"></a><code>groupadd</code>命令</h3><p><code>groupadd</code>命令用于创建新的用户组</p><blockquote><p>例:<br>创建test用户组<br>groupadd test</p></blockquote><h3 id="usermod命令"><a href="#usermod命令" class="headerlink" title="usermod命令"></a><code>usermod</code>命令</h3><p><code>usermod</code>命令用于修改用户的属性，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-c</td><td>填写用户账户的备注信息</td></tr><tr><td>-d -m</td><td>参数<code>-m</code>与参数<code>-d</code>连用，可重新指定用户的家目录并自动把旧的数据转移过去</td></tr><tr><td>-e</td><td>账户到期时间，格式为<code>YYYY-MM-DD</code></td></tr><tr><td>-g</td><td>变更所属用户组</td></tr><tr><td>-G</td><td>变更扩展用户组</td></tr><tr><td>-L</td><td>锁定用户禁止其登录系统</td></tr><tr><td>-U</td><td>解锁用户，允许其登录系统</td></tr><tr><td>-s</td><td>变更默认终端</td></tr><tr><td>-u</td><td>修改用户的UID</td></tr></tbody></table></div><blockquote><p>例:<br>修改jack用户UID为8888<br>usermod -u 8888 jack</p></blockquote><h3 id="passwd命令"><a href="#passwd命令" class="headerlink" title="passwd命令"></a><code>passwd</code>命令</h3><p><code>passwd</code>命令用于修改用户密码、过期时间等信息，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-l</td><td>锁定用户，禁止其登录</td></tr><tr><td>-u</td><td>解除锁定，允许用户登录</td></tr><tr><td>—stdin</td><td>通过标准输入修改用户密码</td></tr><tr><td>-d</td><td>使该用户可用空密码登录系统</td></tr><tr><td>-e</td><td>强制用户在下次登录时修改密码</td></tr><tr><td>-S</td><td>显示用户的密码是否被锁定，以及密码所采用的加密算法名称</td></tr></tbody></table></div><blockquote><p>例:<br>通过标准输入修改jack用户密码<br>echo “NewPassWord” | passwd —stdin jack</p></blockquote><h3 id="userdel命令"><a href="#userdel命令" class="headerlink" title="userdel命令"></a><code>userdel</code>命令</h3><p><code>userdel</code>命令用于删除已有的用户账户，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-f</td><td>强制删除用户</td></tr><tr><td>-r</td><td>同时删除用户及用户家目录</td></tr></tbody></table></div><blockquote><p>例:<br>删除jack用户<br>userdel jack</p></blockquote><h2 id="文件权限与归属"><a href="#文件权限与归属" class="headerlink" title="文件权限与归属"></a>文件权限与归属</h2><p>在Linux系统中，每个文件都有归属的所有者和所属组，并且规定了文件的所有者、所属组以及其他人对文件所拥有的可读<code>r</code>、可写<code>w</code>、可执行<code>x</code>等权限<br>对<code>一般文件</code>来说，可读为能够查看文件内容，可写为能够对文件进行编辑、新建、删除等操作，可执行为能够运行一个脚本程序<br>对<code>目录文件</code>来说，可读为能够读取目录内的文件列表，可写为能够在目录内新建、删除、重命名文件，可执行为能够进入该目录<br>可读、可写、可执行权限对应的命令在文件和目录上是有区别的，具体如下表所示</p><div class="table-container"><table><thead><tr><th></th><th>文件</th><th>目录</th></tr></thead><tbody><tr><td>可读<code>r</code></td><td>cat</td><td>ls</td></tr><tr><td>可写<code>w</code></td><td>vim</td><td>touch</td></tr><tr><td>可执行<code>x</code></td><td>./scrip</td><td>cd</td></tr></tbody></table></div><p>文件的<code>可读、可写、可执行</code>权限可以用数字<code>4、2、1</code>来表示，文件所有者、所属组以及其他用户权限之间无关系，具体如下表所示</p><table>    <tr>        <td>权限项</td>         <td>可读</td>         <td>可写</td>         <td>可执行</td>        <td>可读</td>         <td>可写</td>         <td>可执行</td>        <td>可读</td>         <td>可写</td>         <td>可执行</td>   </tr>   <tr>        <td>字符表示</td>         <td>r</td>         <td>w</td>         <td>x</td>        <td>r</td>         <td>w</td>         <td>x</td>        <td>r</td>         <td>w</td>         <td>x</td>   </tr>   <tr>        <td>数字表示</td>         <td>4</td>         <td>2</td>         <td>1</td>        <td>4</td>         <td>2</td>         <td>1</td>        <td>4</td>         <td>2</td>         <td>1</td>   </tr>   <tr>        <td>权限分配</td>         <td colspan="3">文件所有者</td>         <td colspan="3">文件所属组</td>         <td colspan="3">其他用户</td>   </tr></table><p>文件权限的数字表示法基于字符<code>rwx</code>的权限计算而来，其目的是简化权限的表示方法<br>例如，如果某个文件的权限为7，则代表可读、可写、可执行(4+2+1),字符表示为<code>rwx</code>;<br>如果文件的权限为761，则代表文件的所有者拥有可读、可写、可执行的权限，其文件所属组拥有可读、可写的权限，其他用户只有可读的权限，字符表示为<code>rwxrw--r-</code></p><div class="note info modern"><p><code>rwxrw--r-</code>中的减号为占位符，代表没有权限，数字表示为0</p></div><h1 id="文件的特殊权限"><a href="#文件的特殊权限" class="headerlink" title="文件的特殊权限"></a>文件的特殊权限</h1><h2 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h2><p><code>SUID</code>是一种对二进制程序进行设置的特殊权限，能够让二进制程序的执行者临时拥有所有者权限</p><h2 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h2><p><code>SGID</code>特殊权限有两种应用场景，当对二进制程序进行设置时，能够让执行者临时获取文件所属组的权限；当对目录进行设置时，则是让目录内新创建的文件自动继承该目录原有的用户组的名称</p><h2 id="SBIT"><a href="#SBIT" class="headerlink" title="SBIT"></a>SBIT</h2><p><code>SBIT</code>特殊权限可确保用户只能删除自己的文件，而不能删除其他用户的权限</p><p>设置文件的特殊权限需要用到<code>chmod</code>命令，用法为<code>chmod [参数] 文件名</code>，特殊权限的参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>u+s</td><td>设置SUID权限</td></tr><tr><td>u-s</td><td>取消SUID权限</td></tr><tr><td>g+s</td><td>设置SGID权限</td></tr><tr><td>g-s</td><td>取消SGID权限</td></tr><tr><td>o+t</td><td>设置SBIT权限</td></tr><tr><td>o-t</td><td>取消SBIT权限</td></tr></tbody></table></div><h1 id="文件的隐藏属性"><a href="#文件的隐藏属性" class="headerlink" title="文件的隐藏属性"></a>文件的隐藏属性</h1><h2 id="chattr命令"><a href="#chattr命令" class="headerlink" title="chattr命令"></a><code>chattr</code>命令</h2><p><code>chattr</code>命令用于设置文件的隐藏权限，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>i</td><td>无法对文件进行修改，若对目录设置了该参数，则仅能修改其中的子文件内容而不能新建或删除文件</td></tr><tr><td>a</td><td>仅允许补充(追加)内容，无法覆盖/删除内容</td></tr><tr><td>S</td><td>文件内容在变更后立即同步到硬盘</td></tr><tr><td>s</td><td>彻底从硬盘中删除，不可恢复</td></tr><tr><td>A</td><td>不再修改这个文件或目录的最后访问时间</td></tr><tr><td>b</td><td>不再修改文件或目录的存取时间</td></tr><tr><td>D</td><td>检查压缩文件中的错误</td></tr><tr><td>d</td><td>使用dump命令备份时忽略本文件/目录</td></tr><tr><td>c</td><td>默认将文件或目录进行压缩</td></tr><tr><td>u</td><td>当删除该文件后依然保留其在硬盘中的数据，一边日后恢复</td></tr><tr><td>t</td><td>让文件系统支持尾部合并</td></tr><tr><td>x</td><td>可以直接访问压缩文件中的内容</td></tr></tbody></table></div><h2 id="lsattr命令"><a href="#lsattr命令" class="headerlink" title="lsattr命令"></a><code>lsattr</code>命令</h2><p><code>lsattr</code>命令用于查看文件的隐藏权限</p><h1 id="文件访问控制列表"><a href="#文件访问控制列表" class="headerlink" title="文件访问控制列表"></a>文件访问控制列表</h1><h2 id="setfacl命令"><a href="#setfacl命令" class="headerlink" title="setfacl命令"></a><code>setfacl</code>命令</h2><p><code>setfacl</code>命令用于管理文件的<code>ACL</code>权限规则，<code>ACL</code>权限提供的是在所有者、所属组、其他人的读/写/执行之外的特殊权限控制，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-m</td><td>修改权限</td></tr><tr><td>-M</td><td>从文件中读取权限</td></tr><tr><td>-x</td><td>删除某个权限</td></tr><tr><td>-b</td><td>删除全部权限</td></tr><tr><td>-R</td><td>递归子目录</td></tr></tbody></table></div><h2 id="getfacl命令"><a href="#getfacl命令" class="headerlink" title="getfacl命令"></a><code>getfacl</code>命令</h2><p><code>getfacl</code>命令用于查看文件的ACL权限规则</p><h1 id="su命令与sudo服务"><a href="#su命令与sudo服务" class="headerlink" title="su命令与sudo服务"></a><code>su</code>命令与<code>sudo</code>服务</h1><p><code>su</code>命令可以解决切换用户身份的需求，使得当前用户不登出的情况下切换到其他用户</p><blockquote><p>例:<br>切换到jack用户<br>su jack</p></blockquote><p><code>sudo</code>命令用于给普通用户提供额外的权限，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-h</td><td>列出帮助信息</td></tr><tr><td>-l</td><td>列出当前用户可以执行的命令</td></tr><tr><td>-u 用户名或UID值</td><td>以指定的用户身份执行命令</td></tr><tr><td>-k</td><td>清空密码的有效时间，下次执行sudo时需要再次进行密码验证</td></tr><tr><td>-b</td><td>在后台执行指定的命令</td></tr><tr><td>-p</td><td>更改询问密码的提示语</td></tr></tbody></table></div><p>如果担心直接修改配置文件会出现问题，可以使用<code>sudo</code>命令提供的<code>visudo</code>命令来配置用户权限，<code>visudo</code>命令用于编辑、配置用户sudo的权限文件</p><div class="note info modern"><p><code>visudo</code>命令操作方法与使用Vim编辑器方法一致</p></div><p>先来首ALL的小曲</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=auto height=86 src="//music.163.com/outchain/player?type=2&id=2140425047&auto=1&height=66"></iframe><blockquote><p>例:<br>谁可以使用 允许使用的主机 = (以谁的身份) 可执行命令的列表<br>谁可以使用：稍后要为那位用户进行命令授权<br>允许使用的主机：可以填写ALL表示不限制来源的主机<br>以谁的身份：可以填写ALL便是系统最高权限<br>可执行命令序列：可以填写ALL表示不限制命令</p><blockquote><p>例:<br>为jack用户提供额外的权限，100行左右添加<br>jack ALL=(ALL) ALL</p></blockquote></blockquote>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux命令行(四)</title>
      <link href="/posts/2fe53600.html"/>
      <url>/posts/2fe53600.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vim编辑器与Shell命令脚本"><a href="#Vim编辑器与Shell命令脚本" class="headerlink" title="Vim编辑器与Shell命令脚本"></a>Vim编辑器与Shell命令脚本</h1><h2 id="Vim文本编辑器"><a href="#Vim文本编辑器" class="headerlink" title="Vim文本编辑器"></a>Vim文本编辑器</h2><p>Vim编辑器中设置了3中模式——命令模式、末行模式、和编辑模式，每种模式分别又支持多种不同的命令快捷键，大大提高了工作效率</p><ol><li>命令模式<br> 控制光标移动，可对文本进行复制、粘贴、删除和查找等工作</li><li>输入模式<br> 正常的文本录入</li><li>末行模式<br> 保存或退出文档，以及设置标记环境</li></ol><p>模式间的切换详见下图</p><p><img src="https://www.helloimg.com/i/2024/12/19/67643d22c090e.png" alt=""></p><div class="note info modern"><p>每次运行Vim编辑器时，默认进入命令模式，此时需要先切换到输入模式后在进行文档编辑工作，而在每次编写玩文档后需要先返回命令模式，再进入末行模式，执行保存或退出操作</p></div><p>命令模式最常用的一些命令</p><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>dd</td><td>删除(剪切)光标所在行</td></tr><tr><td>5dd</td><td>删除(剪切)从光标处开始的5行</td></tr><tr><td>yy</td><td>复制光标所在整行</td></tr><tr><td>5yy</td><td>复制从光标处开始的5行</td></tr><tr><td>n</td><td>显示搜索命令定位到的下一个字符串</td></tr><tr><td>N</td><td>显示搜索命令定位到的上一个字符串</td></tr><tr><td>u</td><td>撤销上一步操作</td></tr><tr><td>p</td><td>将之前删除(dd)或复制(yy)过的数据粘贴到光标后面</td></tr></tbody></table></div><p>末行模式常用的一些命令</p><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>:w</td><td>保存</td></tr><tr><td>:q</td><td>退出</td></tr><tr><td>:q!</td><td>强制退出(放弃对文档的修改内容)</td></tr><tr><td>:wq!</td><td>强制保存退出</td></tr><tr><td>:set nu</td><td>显示行号</td></tr><tr><td>:set nomu</td><td>不显示行号</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>:命令</td><td>执行该命令</td></tr><tr><td>:整数</td><td>跳转到该行</td></tr><tr><td>:s/one/two</td><td>将当前光标所在行的第一个one替换成two</td></tr><tr><td>:s/one/two/g</td><td>将当前光标所在行的所有one替换成two</td></tr><tr><td>:%s/one/two</td><td>将全文中所有one替换成two</td></tr><tr><td>?字符串</td><td>在文本中从下至上搜索该字符串</td></tr><tr><td>/字符串</td><td>在文本中从上至下搜索该字符串</td></tr></tbody></table></div><h1 id="配置主机名称"><a href="#配置主机名称" class="headerlink" title="配置主机名称"></a>配置主机名称</h1><p>在Linux系统中，主机名大多保存在<code>/etc/hostname</code>文件中，比如，将<code>/etc/hostname</code>文件中内容修改为<code>mylinux</code></p><ol><li>使用Vim编辑器修改<code>/etc/hostname</code>主机名称文件<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hostname</span><br></pre></td></tr></table></figure></li><li>把原始主机名称删除后追加<code>mylinux</code><div class="note info modern"><p>需要在末行模式下执行<code>:wq!</code>命令</p></div></li><li>保存并退出文档，使用<code>hostname</code>命令检查是否修改成功<div class="note info modern"><p><code>hostname</code>命令用于查看当前主机名称，但有时主机名称不会立即同步更新到系统中，可重启查看</p></div></li></ol><h1 id="配置网卡信息"><a href="#配置网卡信息" class="headerlink" title="配置网卡信息"></a>配置网卡信息</h1><p>网卡 IP 地址配置的是否正确是两台服务器是否可以相互通信的前提。</p><p>在 Linux 系统中，一切都是文件，因此配置网络服务的工作其实就是在编辑网卡配置文件。</p><p>在 RHEL 7 中，网卡配置文件的前缀则以<code>ifcfg</code>开始，加上网卡名称共同组成了网卡配置文件的名字，例如<code>ifcfg-eno16777736</code></p><p>现在有一个名称为<code>ifcfg-eno16777736</code>的网卡设备，我们将其配置为开机自启动，并且 IP 地址、子网、网关等信息由人工指定，其步骤应该如下所示。</p><ol><li>首先切换到<code>/etc/sysconfig/network-scripts</code>目录中（存放着网卡的配置文件）。</li><li><p>使用 Vim 编辑器修改网卡文件<code>ifcfg-eno16777736</code>，逐项写入下面的配置参数并保存退出。由于每台设备的硬件及架构是不一样的，因此使用<code>ifconfig</code>命令确认各自网卡的默认名称。</p><blockquote><p>设备类型 TYPPE=Ethernet<br>地址分配模式 BOOTPROTO=static (static表示静态IP，dhcp表示动态获取IP)<br>网卡名称 NAME=ens160<br>是否启动 ONBOOT=yes (yes表示启动，no表示不启动)<br>IP地址 IPADDR=192.168.10.10<br>子网掩码 NETMASK=255.255.255.0<br>网关地址 GATEWAY=192.168.10.1<br>DNS地址 DNS1=192.168.10.1</p></blockquote></li><li><p>重启网络服务并测试网络是否连通</p><div class="note info modern"><p><code>nmcli connection reload ens160</code>重启网络服务，<code>ping</code>命令测试网络是否连通(<code>ping</code>命令不会自动终止，可使用<code>CTRL+C</code>强制结束进程)</p></div></li></ol><h1 id="配置软件仓库"><a href="#配置软件仓库" class="headerlink" title="配置软件仓库"></a>配置软件仓库</h1><p>软件仓库是一种能够进一步简化RPM管理软件的难度以及自动化分析所需软件包及其依赖关系的技术，既让想要使用软件仓库，就要先把它搭建起来，然后将其配置规则确定好<br>搭建并配置软件仓库的步骤如下</p><ol><li>进入<code>/etc/yum.repos.d/</code>目录中</li><li>使用Vim编辑器创建一个新的配置文件(文件名称可以随意，但后缀必须为<code>.repo</code>)，逐项写入以下配置参数并保存退出<blockquote><p>仓库名称：具有唯一标识，不应与其他软件仓库发生冲突<br>描述信息：可以是一些介绍性的词，易于识别软件仓库的作用<br>仓库位置：软件包的获取方式，可以使用<code>FTP</code>或<code>HTTP</code>下载，也可以是本地的文件(需要在后面添加<code>file</code>参数)<br>是否启用：设置此源是否可用，1为可用，0为禁用<br>是否校验：设置此源是否校验，1为校验，0为不校验<br>公钥位置：若上面的参数开启了校验功能，则此处为公钥文件位置，若没有开启，则省略不用写</p></blockquote></li><li>按照配置参数中所填写的仓库位置挂载光盘，并把光盘挂载信息写入<code>/etc/fstab</code>文件中</li><li>使用<code>dnf install httpd-y</code>命令检查软件仓库是否开启已经可用</li></ol><h1 id="编写Shell脚本"><a href="#编写Shell脚本" class="headerlink" title="编写Shell脚本"></a>编写Shell脚本</h1><p>可以将Shell终端解释器当作人与计算机硬件之间的“翻译官”，它作为用户与Linux系统内部的通信媒介，除了支持各种变量与参数外，还提供了诸如循环、分支等高级编程语言才有的控制结构特性<br>Shell脚本命令的工作方式有下面两种</p><ol><li>交互式<br> 用户每输入一条命令就立即执行</li><li>批处理<br> 由用户实现编写好一个完整的Shell脚本，Shell会一次性执行脚本中诸多命令 </li></ol><blockquote><p>通过查看<code>SHELL</code>变量可以发现，当前系统已经默认使用<code>Bash</code>作为命令终端解释器了<br>echo $SHELL</p></blockquote><h2 id="编写简单的脚本"><a href="#编写简单的脚本" class="headerlink" title="编写简单的脚本"></a>编写简单的脚本</h2><p>如果想查看当前工作路径并列出当前目录下所有的文件及属性信息，实现这个功能的脚本应该类似于下面这样<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim example.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">For Example</span></span><br><span class="line">pwd</span><br><span class="line">ls -al</span><br></pre></td></tr></table></figure></p><div class="note info modern"><p>shell脚本文件的名称可以随意，但为了避免被误以为是普通文件，建议加上<code>.sh</code>后缀</p></div><p>上面的脚本文件实际上出现了三种不同的元素</p><p>第一行的脚本声明<code>#!</code>用来告诉系统使用哪种Shell解释器来执行该脚本</p><p>第二行的注释信息<code>#</code>是对该脚本功能和某些命令的介绍信息，使得自己或他人在日后看到这个脚本内容时，可以快速知道该脚本的作用或一些警告信息</p><p>第三、四行的可执行语句也就是我们平时执行的Linux命令</p><blockquote><p>运行该脚本<br>bash example</p></blockquote><h2 id="接受用户的参数"><a href="#接受用户的参数" class="headerlink" title="接受用户的参数"></a>接受用户的参数</h2><p>为了让Shell脚本程序更好地满足用户的一些实时需求，以便灵活完成工作，必须要让脚本程序能够像之前执行命令时那样，接受用户输入的参数<br>其实，Linux系统中的Shell脚本语言已经考虑到这些，也内设了用于接收参数的变量，变量之间使用空格间隔，参数变量详见下表</p><div class="table-container"><table><thead><tr><th>参数变量</th><th>作用</th></tr></thead><tbody><tr><td>$0</td><td>当前Shell脚本程序的名称</td></tr><tr><td>$#</td><td>总共有几个参数</td></tr><tr><td>$*</td><td>所有位置的参数值</td></tr><tr><td>$?</td><td>显示上一次命令的执行返回值</td></tr><tr><td>$1、$2、$3……</td><td>第N个位置的参数值</td></tr></tbody></table></div><h2 id="判断用户的参数"><a href="#判断用户的参数" class="headerlink" title="判断用户的参数"></a>判断用户的参数</h2><p>Shell脚本中条件车是语法可以判断表达式是否成立，若条件成立则返回数字0，否则便返回非零值，条件测试语法的执行格式为<code>[ 条件表达式 ]</code><br><strong>注意条件表达式两边应均有一个空格</strong><br>按照测试对象来划分，条件测试语句可以分为4中</p><ol><li>文件测试语句</li><li>逻辑测试语句</li><li>整数值比较语句</li><li>字符串比较语句<br>文件测试即使用指定条件来判断文件是否存在或权限是否满足等情况的运算符，具体参数如下表所示</li></ol><div class="table-container"><table><thead><tr><th>运算符</th><th>作用</th></tr></thead><tbody><tr><td>-d</td><td>测试文件是否为目录类型</td></tr><tr><td>-e</td><td>测试文件是否存在</td></tr><tr><td>-f</td><td>判断是否为一般文件</td></tr><tr><td>-r</td><td>测试当前用户是否有权限读取</td></tr><tr><td>-w</td><td>测试当前用户是否有权限写入</td></tr><tr><td>-x</td><td>测试当前用户是否有权限执行</td></tr></tbody></table></div><blockquote><p>例：<br>使用文件测试语句判断<code>/etc/fstab</code>是否为一个目录类型的文件，然后通过Shell解释器的内设<code>$?</code>变量显示上一条命令执行后的返回值。如果返回值为0，则目录存在，如果返回为非零值，则意味着他不是目录<br>[ -d /etc/fstab ]<br>echo $?</p></blockquote><h3 id="整数比较运算符"><a href="#整数比较运算符" class="headerlink" title="整数比较运算符"></a>整数比较运算符</h3><p>整数比较运算符仅是对数字的操作，不能将数字与字符串、文件等内容一起操作，可用整数比较运算符如下表所示</p><div class="table-container"><table><thead><tr><th>运算符</th><th>作用</th></tr></thead><tbody><tr><td>-eq</td><td>是否等于</td></tr><tr><td>-ne</td><td>是否不等于</td></tr><tr><td>-gt</td><td>是否大于</td></tr><tr><td>-lt</td><td>是否小于</td></tr><tr><td>-le</td><td>是否等于或小于</td></tr><tr><td>-ge</td><td>是否大于或等于</td></tr></tbody></table></div><h3 id="字符串比较运算符"><a href="#字符串比较运算符" class="headerlink" title="字符串比较运算符"></a>字符串比较运算符</h3><p>字符串比较语句用于判断测试字符串是否为空值，或两个字符串是否相同，字符串比较中常见的运算符如下表所示</p><div class="table-container"><table><thead><tr><th>运算符</th><th>作用</th></tr></thead><tbody><tr><td>=</td><td>比较字符串内容是否相同</td></tr><tr><td>!=</td><td>比较字符串内容是否不同</td></tr><tr><td>-z</td><td>判断字符串内容是否为空</td></tr></tbody></table></div><h1 id="流程控制语句"><a href="#流程控制语句" class="headerlink" title="流程控制语句"></a>流程控制语句</h1><h2 id="if条件测试语句"><a href="#if条件测试语句" class="headerlink" title="if条件测试语句"></a>if条件测试语句</h2><p><code>if</code>条件测试语句可以让脚本根据实际情况自动执行相应的命令，<code>if</code>条件测试语句分为单分支结构，双分支结构，多分支结构，其复杂度随着灵活度一起逐级上升</p><h3 id="单分支结构"><a href="#单分支结构" class="headerlink" title="单分支结构"></a>单分支结构</h3><p>语法格式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if 条件测试操作</span><br><span class="line">  then 命令序列</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p><h3 id="双分支结构"><a href="#双分支结构" class="headerlink" title="双分支结构"></a>双分支结构</h3><p>语法格式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if 条件测试操作</span><br><span class="line">  then 命令序列1</span><br><span class="line">  else 命令序列2</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p><h3 id="多分支结构"><a href="#多分支结构" class="headerlink" title="多分支结构"></a>多分支结构</h3><p>语法格式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if 条件测试操作1</span><br><span class="line">  then 命令序列1</span><br><span class="line">elif 条件测试操作2</span><br><span class="line">  then 命令序列2</span><br><span class="line">else</span><br><span class="line">  命令序列3</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p><h2 id="for条件循环语句"><a href="#for条件循环语句" class="headerlink" title="for条件循环语句"></a>for条件循环语句</h2><p><code>for</code>循环语句允许脚本一次性读取多个信息，然后逐一对信息进行操作处理<br>语法格式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for 变量名 in 取值列表</span><br><span class="line">do</span><br><span class="line">  命令序列</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><h2 id="while条件循环语句"><a href="#while条件循环语句" class="headerlink" title="while条件循环语句"></a>while条件循环语句</h2><p><code>while</code>条件循环语句是一种脚本根据某些条件来重复执行命令的语句，不同于<code>for</code>循环语句，<code>while</code>语句通过判断条件测试的真假决定是否继续执行命令，若命令为真就继续执行，若条件为假就结束循环<br>语法格式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while 条件测试操作</span><br><span class="line">do</span><br><span class="line">  命令序列</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><h2 id="case条件测试语句"><a href="#case条件测试语句" class="headerlink" title="case条件测试语句"></a>case条件测试语句</h2><p><code>case</code>语句是在多个范围内匹配数据，若匹配成功则执行相关命令并结束整个条件测试，如果数据不在所以列出的范围内，则会去执行星号<code>*</code>中所定义的默认命令<br>语法格式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">case 变量名 in</span><br><span class="line">模式1)</span><br><span class="line">  命令序列1</span><br><span class="line">  ;;</span><br><span class="line">模式2)</span><br><span class="line">  命令序列2</span><br><span class="line">  ;;</span><br><span class="line">  ……</span><br><span class="line">*)</span><br><span class="line">  默认命令序列</span><br><span class="line">esac</span><br></pre></td></tr></table></figure></p><h1 id="计划任务服务程序"><a href="#计划任务服务程序" class="headerlink" title="计划任务服务程序"></a>计划任务服务程序</h1><p>计划任务分为一次性计划任务与长期性计划任务</p><ol><li>一次性计划任务<br>只执行一次，一般用于临时性的工作请求</li><li>长期性计划任务<br>能够周期性地、有规律的执行某些某些具体的任务</li></ol><h2 id="一次性计划任务"><a href="#一次性计划任务" class="headerlink" title="一次性计划任务"></a>一次性计划任务</h2><p>使用<code>at 时间</code>的格式，如果想要查看已设置好但还未执行的一次性计划任务，可以使用<code>at -l</code>命令，先要将其删除，可以使用<code>atrm 任务序号</code>，查询当前设置的<code>at</code>任务列表，可以使用<code>atq</code>命令<br><code>at</code>命令中常见参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-f</td><td>指定包含命令的任务文件</td></tr><tr><td>-q</td><td>指定新任务名称</td></tr><tr><td>-l</td><td>显示待执行任务的列表</td></tr><tr><td>-d</td><td>删除指定的待执行任务</td></tr><tr><td>-m</td><td>任务执行后向用户发邮件</td></tr></tbody></table></div><blockquote><p>例：<br>5分钟后执行/bin/date<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">at now +5 minutes</span><br><span class="line">/bin/date</span><br><span class="line">&lt;EOT&gt;(CTRL+D提交任务)</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="长期性计划任务"><a href="#长期性计划任务" class="headerlink" title="长期性计划任务"></a>长期性计划任务</h2><p>使用Linux系统中默认的<code>crond服务</code></p><p>创建、编辑计划任务的命令为<code>crontab -e</code><br>查看当前计划任务的命令为<code>crontab -l</code><br>删除某条计划任务的命令为<code>crontab -r</code><br>编辑他人计划任务的命令为<code>crontab -u</code>(管理员权限)</p><p>命令时间格式<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*     * 　  *　  *　  *　　command</span><br><span class="line">分　  时　  日　  月　 周　  命令</span><br><span class="line">第1列表示分钟1～59 每分钟用*或者 */1表示</span><br><span class="line">第2列表示小时1～23（0表示0点）</span><br><span class="line">第3列表示日期1～31</span><br><span class="line">第4列表示月份1～12</span><br><span class="line">第5列标识号星期0～6（0表示星期天）</span><br><span class="line">第6列要运行的命令</span><br></pre></td></tr></table></figure></p><div class="note info modern"><p><code>*</code>表示为任意时间<br><code>,</code>表示间隔的多个不连续时间点<br><code>-</code>表示一个连续的时间范围<br><code>/数字</code>表示间隔的时间频率</p></div><blockquote><p>例：<br>每月1、10、22日的4 : 45重启apache<br>45 4 1,10,22 <em> </em> /usr/local/etc/rc.d/lighttpd restart  </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 系统设置界面修改(四)</title>
      <link href="/posts/7b0505a9.html"/>
      <url>/posts/7b0505a9.html</url>
      
        <content type="html"><![CDATA[<p><strong>若无特殊说明，默认修改位于<code>screens.rpy</code>文件中</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li><a href="https://doc.renpy.cn/zh-CN/keymap.html">自定义快捷键</a></li><li><a href="https://doc.renpy.cn/zh-CN/other.html#renpy.is_skipping">是否处于快进状态</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1UnqaYuE81&cid=27307413028&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="自定义快捷键"><a href="#自定义快捷键" class="headerlink" title="自定义快捷键"></a>自定义快捷键</h1><p>打开<code>renpy/common/00keymap.rpy</code>你将看到如下代码</p><div class="note danger modern"><p>该部分代码<strong><em>不推荐修改</em></strong>，如想修改，请先拷贝一份留作备用</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Copyright 2004-2024 Tom Rothamel &lt;pytom@bishoujo.us&gt;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Permission is hereby granted, free of charge, to any person</span></span><br><span class="line"><span class="comment"># obtaining a copy of this software and associated documentation files</span></span><br><span class="line"><span class="comment"># (the &quot;Software&quot;), to deal in the Software without restriction,</span></span><br><span class="line"><span class="comment"># including without limitation the rights to use, copy, modify, merge,</span></span><br><span class="line"><span class="comment"># publish, distribute, sublicense, and/or sell copies of the Software,</span></span><br><span class="line"><span class="comment"># and to permit persons to whom the Software is furnished to do so,</span></span><br><span class="line"><span class="comment"># subject to the following conditions:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The above copyright notice and this permission notice shall be</span></span><br><span class="line"><span class="comment"># included in all copies or substantial portions of the Software.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></span><br><span class="line"><span class="comment"># EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></span><br><span class="line"><span class="comment"># MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span></span><br><span class="line"><span class="comment"># NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</span></span><br><span class="line"><span class="comment"># LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span></span><br><span class="line"><span class="comment"># OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</span></span><br><span class="line"><span class="comment"># WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></span><br><span class="line"></span><br><span class="line">init -<span class="number">1600</span> python:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">_keymap_list</span>(<span class="title class_ inherited__">_list</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">self, a</span>):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                _<span class="built_in">list</span>.remove(<span class="variable language_">self</span>, a)</span><br><span class="line">            <span class="keyword">except</span> ValueError:</span><br><span class="line">                <span class="keyword">if</span> config.developer:</span><br><span class="line">                    <span class="keyword">raise</span></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    config.keymap = <span class="built_in">dict</span>(</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Bindings present almost everywhere, unless explicitly</span></span><br><span class="line">        <span class="comment"># disabled.</span></span><br><span class="line">        <span class="comment"># 除非明确禁用，各处都能使用的绑定快捷键</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 回滚</span></span><br><span class="line">        rollback = [ <span class="string">&#x27;anyrepeat_K_PAGEUP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_PAGEUP&#x27;</span>, <span class="string">&#x27;K_AC_BACK&#x27;</span>, <span class="string">&#x27;mousedown_4&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 截图</span></span><br><span class="line">        screenshot = [ <span class="string">&#x27;alt_K_s&#x27;</span>, <span class="string">&#x27;alt_shift_K_s&#x27;</span>, <span class="string">&#x27;noshift_K_s&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 切换自动模式</span></span><br><span class="line">        toggle_afm = [ ],</span><br><span class="line">        <span class="comment"># 切换全屏/窗口</span></span><br><span class="line">        toggle_fullscreen = [ <span class="string">&#x27;alt_K_RETURN&#x27;</span>, <span class="string">&#x27;alt_K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_F11&#x27;</span>, <span class="string">&#x27;noshift_K_f&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 显示游戏菜单界面，一般为存档界面</span></span><br><span class="line">        game_menu = [ <span class="string">&#x27;K_ESCAPE&#x27;</span>, <span class="string">&#x27;K_MENU&#x27;</span>, <span class="string">&#x27;K_PAUSE&#x27;</span>, <span class="string">&#x27;mouseup_3&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 隐藏对话框、底部菜单等</span></span><br><span class="line">        hide_windows = [ <span class="string">&#x27;mouseup_2&#x27;</span>, <span class="string">&#x27;noshift_K_h&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 打开编辑器</span></span><br><span class="line">        launch_editor = [ <span class="string">&#x27;shift_K_e&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 转储样式</span></span><br><span class="line">        dump_styles = [ ],</span><br><span class="line">        <span class="comment"># 重新加载游戏</span></span><br><span class="line">        reload_game = [ <span class="string">&#x27;alt_K_r&#x27;</span>, <span class="string">&#x27;shift_K_r&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 可视组件查验器</span></span><br><span class="line">        inspector = [ <span class="string">&#x27;alt_noshift_K_i&#x27;</span>, <span class="string">&#x27;shift_K_i&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 可视组件查验器(详细)</span></span><br><span class="line">        full_inspector = [ <span class="string">&#x27;alt_shift_K_i&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 开发者菜单</span></span><br><span class="line">        developer = [ <span class="string">&#x27;alt_K_d&#x27;</span>, <span class="string">&#x27;shift_K_d&#x27;</span>, ],</span><br><span class="line">        <span class="comment"># 退出游戏</span></span><br><span class="line">        quit = [ ],</span><br><span class="line">        <span class="comment"># 图标化</span></span><br><span class="line">        iconify = [ ],</span><br><span class="line">        <span class="comment"># 帮助界面</span></span><br><span class="line">        <span class="built_in">help</span> = [ <span class="string">&#x27;K_F1&#x27;</span>, <span class="string">&#x27;meta_shift_/&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 选择渲染</span></span><br><span class="line">        choose_renderer = [<span class="string">&#x27;alt_K_g&#x27;</span>, <span class="string">&#x27;shift_K_g&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 进度屏幕</span></span><br><span class="line">        progress_screen = [ <span class="string">&#x27;alt_shift_K_p&#x27;</span>, <span class="string">&#x27;meta_shift_K_p&#x27;</span>, <span class="string">&#x27;K_F2&#x27;</span> ],</span><br><span class="line">        <span class="comment"># 气泡编辑器</span></span><br><span class="line">        bubble_editor = [ <span class="string">&#x27;alt_K_b&#x27;</span>, <span class="string">&#x27;shift_K_b&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Accessibility.</span></span><br><span class="line">        <span class="comment"># 数据读取</span></span><br><span class="line"></span><br><span class="line">        accessibility = [ <span class="string">&#x27;shift_K_a&#x27;</span> ],</span><br><span class="line">        self_voicing = [ <span class="string">&#x27;alt_K_v&#x27;</span>, <span class="string">&#x27;K_v&#x27;</span> ],</span><br><span class="line">        clipboard_voicing = [ <span class="string">&#x27;alt_shift_K_c&#x27;</span>, <span class="string">&#x27;shift_K_c&#x27;</span> ],</span><br><span class="line">        debug_voicing = [ <span class="string">&#x27;alt_shift_K_v&#x27;</span>, <span class="string">&#x27;meta_shift_K_v&#x27;</span> ],</span><br><span class="line">        extra_voicing = [ <span class="string">&#x27;?&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Say.</span></span><br><span class="line">        <span class="comment"># say相关</span></span><br><span class="line"></span><br><span class="line">        rollforward = [ <span class="string">&#x27;anyrepeat_K_PAGEDOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_PAGEDOWN&#x27;</span>, <span class="string">&#x27;mousedown_5&#x27;</span>, ],</span><br><span class="line">        dismiss = [ <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_SPACE&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span>, <span class="string">&#x27;mouseup_1&#x27;</span> ],</span><br><span class="line">        dismiss_unfocused = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Pause.</span></span><br><span class="line">        <span class="comment"># 暂停</span></span><br><span class="line"></span><br><span class="line">        dismiss_hard_pause = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Focus.</span></span><br><span class="line">        <span class="comment"># 焦点相关</span></span><br><span class="line"></span><br><span class="line">        focus_left = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        focus_right = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        focus_up = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        focus_down = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Button.</span></span><br><span class="line">        <span class="comment"># 按钮</span></span><br><span class="line"></span><br><span class="line">        button_ignore = [ <span class="string">&#x27;mousedown_1&#x27;</span> ],</span><br><span class="line">        button_select = [ <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span>, <span class="string">&#x27;mouseup_1&#x27;</span>,  ],</span><br><span class="line">        button_alternate = [ <span class="string">&#x27;mouseup_3&#x27;</span> ],</span><br><span class="line">        button_alternate_ignore = [ <span class="string">&#x27;mousedown_3&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Input.</span></span><br><span class="line">        <span class="comment"># 输入</span></span><br><span class="line"></span><br><span class="line">        input_backspace = [ <span class="string">&#x27;anyrepeat_K_BACKSPACE&#x27;</span> ],</span><br><span class="line">        input_enter = [ <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span> ],</span><br><span class="line">        input_next_line = [ <span class="string">&#x27;shift_K_RETURN&#x27;</span>, <span class="string">&#x27;shift_K_KP_ENTER&#x27;</span> ],</span><br><span class="line">        input_left = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        input_right = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        input_up = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        input_down = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line">        input_delete = [ <span class="string">&#x27;anyrepeat_K_DELETE&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DELETE&#x27;</span> ],</span><br><span class="line">        input_home = [ <span class="string">&#x27;K_HOME&#x27;</span>, <span class="string">&#x27;KP_HOME&#x27;</span>, <span class="string">&#x27;meta_K_LEFT&#x27;</span> ],</span><br><span class="line">        input_end = [ <span class="string">&#x27;K_END&#x27;</span>, <span class="string">&#x27;KP_END&#x27;</span>, <span class="string">&#x27;meta_K_RIGHT&#x27;</span> ],</span><br><span class="line">        input_copy = [ <span class="string">&#x27;ctrl_noshift_K_INSERT&#x27;</span>, <span class="string">&#x27;ctrl_noshift_K_c&#x27;</span>, <span class="string">&#x27;meta_noshift_K_c&#x27;</span> ],</span><br><span class="line">        input_paste = [ <span class="string">&#x27;shift_K_INSERT&#x27;</span>, <span class="string">&#x27;ctrl_noshift_K_v&#x27;</span>, <span class="string">&#x27;meta_noshift_K_v&#x27;</span> ],</span><br><span class="line">        input_jump_word_left = [ <span class="string">&#x27;osctrl_K_LEFT&#x27;</span>, <span class="string">&#x27;osctrl_KP_LEFT&#x27;</span> ],</span><br><span class="line">        input_jump_word_right = [ <span class="string">&#x27;osctrl_K_RIGHT&#x27;</span>, <span class="string">&#x27;osctrl_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        input_delete_word = [ <span class="string">&#x27;osctrl_K_BACKSPACE&#x27;</span> ],</span><br><span class="line">        input_delete_full = [ <span class="string">&#x27;meta_K_BACKSPACE&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Viewport.</span></span><br><span class="line">        <span class="comment"># 视口</span></span><br><span class="line"></span><br><span class="line">        viewport_leftarrow = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        viewport_rightarrow = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        viewport_uparrow = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        viewport_downarrow = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line">        viewport_wheelup = [ <span class="string">&#x27;mousedown_4&#x27;</span> ],</span><br><span class="line">        viewport_wheeldown = [ <span class="string">&#x27;mousedown_5&#x27;</span> ],</span><br><span class="line">        viewport_drag_start = [ <span class="string">&#x27;mousedown_1&#x27;</span> ],</span><br><span class="line">        viewport_drag_end = [ <span class="string">&#x27;mouseup_1&#x27;</span> ],</span><br><span class="line">        viewport_pageup = [ <span class="string">&#x27;anyrepeat_K_PAGEUP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_PAGEUP&#x27;</span>],</span><br><span class="line">        viewport_pagedown = [ <span class="string">&#x27;anyrepeat_K_PAGEDOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_PAGEDOWN&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># These keys control skipping.</span></span><br><span class="line">        <span class="comment"># 这些按键控制跳过</span></span><br><span class="line"></span><br><span class="line">        skip = [ <span class="string">&#x27;anymod_K_LCTRL&#x27;</span>, <span class="string">&#x27;anymod_K_RCTRL&#x27;</span> ],</span><br><span class="line">        stop_skipping = [ ],</span><br><span class="line">        toggle_skip = [ <span class="string">&#x27;K_TAB&#x27;</span> ],</span><br><span class="line">        fast_skip = [ <span class="string">&#x27;&gt;&#x27;</span>, <span class="string">&#x27;shift_K_PERIOD&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Bar.</span></span><br><span class="line">        bar_activate = [ <span class="string">&#x27;mousedown_1&#x27;</span>, <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span> ],</span><br><span class="line">        bar_deactivate = [ <span class="string">&#x27;mouseup_1&#x27;</span>, <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span> ],</span><br><span class="line">        bar_left = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        bar_right = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        bar_up = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        bar_down = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Delete a save.</span></span><br><span class="line">        <span class="comment"># 删除存档</span></span><br><span class="line"></span><br><span class="line">        save_delete = [ <span class="string">&#x27;K_DELETE&#x27;</span>, <span class="string">&#x27;KP_DELETE&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Save/load screen pagination.</span></span><br><span class="line">        <span class="comment"># 存档/读档页数切换</span></span><br><span class="line"></span><br><span class="line">        save_page_prev = [<span class="string">&#x27;mousedown_4&#x27;</span>],</span><br><span class="line">        save_page_next = [<span class="string">&#x27;mousedown_5&#x27;</span>],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Draggable.</span></span><br><span class="line">        <span class="comment"># 可拖拽组件</span></span><br><span class="line"></span><br><span class="line">        drag_activate = [ <span class="string">&#x27;mousedown_1&#x27;</span> ],</span><br><span class="line">        drag_deactivate = [ <span class="string">&#x27;mouseup_1&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Debug console.</span></span><br><span class="line">        <span class="comment"># 调试控制台</span></span><br><span class="line"></span><br><span class="line">        console = [ <span class="string">&#x27;shift_K_o&#x27;</span>, <span class="string">&#x27;alt_shift_K_o&#x27;</span> ],</span><br><span class="line">        console_exit = [ <span class="string">&#x27;K_ESCAPE&#x27;</span>, <span class="string">&#x27;K_MENU&#x27;</span>, <span class="string">&#x27;K_PAUSE&#x27;</span>, <span class="string">&#x27;mouseup_3&#x27;</span> ],</span><br><span class="line">        console_older = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        console_newer = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Director</span></span><br><span class="line">        <span class="comment"># 编导器</span></span><br><span class="line">        director = [ <span class="string">&#x27;noshift_K_d&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Ignored (kept for backwards compatibility).</span></span><br><span class="line">        <span class="comment"># 忽略(保持后向兼容)</span></span><br><span class="line"></span><br><span class="line">        toggle_music = [ ],</span><br><span class="line">        viewport_up = [ ],</span><br><span class="line">        viewport_down = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Profile commands.</span></span><br><span class="line">        <span class="comment"># Profile命令</span></span><br><span class="line"></span><br><span class="line">        performance = [ <span class="string">&#x27;K_F3&#x27;</span> ],</span><br><span class="line">        image_load_log = [ <span class="string">&#x27;K_F4&#x27;</span> ],</span><br><span class="line">        profile_once = [ <span class="string">&#x27;K_F8&#x27;</span> ],</span><br><span class="line">        memory_profile = [ <span class="string">&#x27;K_F7&#x27;</span> ],</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    config.default_keymap = &#123; k : _<span class="built_in">list</span>(v) <span class="keyword">for</span> k, v <span class="keyword">in</span> config.keymap.items() &#125;</span><br><span class="line">    config.keymap = &#123; k : _keymap_list(v) <span class="keyword">for</span> k, v <span class="keyword">in</span> config.keymap.items() &#125;</span><br><span class="line"></span><br><span class="line">    config.pad_bindings = &#123;</span><br><span class="line">        <span class="string">&quot;pad_leftshoulder_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_lefttrigger_pos&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_back_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_leftshoulder_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_lefttrigger_pos&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_back_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_guide_press&quot;</span> : [ <span class="string">&quot;game_menu&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_start_press&quot;</span> : [ <span class="string">&quot;game_menu&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_y_press&quot;</span> : [ <span class="string">&quot;hide_windows&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_x_press&quot;</span> : [ <span class="string">&quot;button_alternate&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_rightshoulder_press&quot;</span> : [ <span class="string">&quot;rollforward&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_rightshoulder_press&quot;</span> : [ <span class="string">&quot;rollforward&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_righttrigger_pos&quot;</span> : [ <span class="string">&quot;dismiss&quot;</span>, <span class="string">&quot;button_select&quot;</span>, <span class="string">&quot;bar_activate&quot;</span>, <span class="string">&quot;bar_deactivate&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_a_press&quot;</span> : [ <span class="string">&quot;dismiss&quot;</span>, <span class="string">&quot;button_select&quot;</span>, <span class="string">&quot;bar_activate&quot;</span>, <span class="string">&quot;bar_deactivate&quot;</span>],</span><br><span class="line">        <span class="string">&quot;pad_b_press&quot;</span> : [ <span class="string">&quot;game_menu&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpleft_press&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_leftx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_rightx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpright_press&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_leftx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_rightx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpup_press&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_lefty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_righty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpdown_press&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_lefty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_righty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpleft_press&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_leftx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_rightx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpright_press&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_leftx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_rightx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpup_press&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_lefty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_righty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpdown_press&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_lefty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_righty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Should we use the autoreload system?</span></span><br><span class="line">    config.autoreload = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">init -<span class="number">1600</span> python:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Are the windows currently hidden?</span></span><br><span class="line">    _windows_hidden = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_keymap_toggle_afm</span>():</span><br><span class="line">        <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        renpy.run(Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_toggle_skipping</span>():</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> renpy.config.allow_skipping:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> renpy.store._skipping:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.skipping:</span><br><span class="line">            config.skipping = <span class="string">&quot;slow&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            config.skipping = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">            renpy.jump(<span class="string">&quot;_noisy_return&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line">    toggle_skipping = _toggle_skipping</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_keymap_toggle_skipping</span>():</span><br><span class="line">        <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        _toggle_skipping()</span><br><span class="line"></span><br><span class="line">    config.<span class="built_in">help</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    config.help_screen = <span class="string">&quot;help&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_help</span>(<span class="params"><span class="built_in">help</span>=<span class="literal">None</span></span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">help</span> <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">help</span> = config.<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">help</span> <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> config.help_screen <span class="keyword">and</span> renpy.has_screen(config.help_screen):</span><br><span class="line">                renpy.run(ShowMenu(config.help_screen))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.has_label(<span class="built_in">help</span>):</span><br><span class="line">            renpy.call_in_new_context(<span class="built_in">help</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">help</span>.startswith(<span class="string">&#x27;http://&#x27;</span>) <span class="keyword">or</span> <span class="built_in">help</span>.startswith(<span class="string">&#x27;https://&#x27;</span>):</span><br><span class="line">                renpy.open_url(<span class="built_in">help</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            file_path = os.path.join(config.basedir, <span class="built_in">help</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(file_path):</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            renpy.open_url(<span class="string">&quot;file:///&quot;</span> + file_path)</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    config.screenshot_pattern = os.environ.get(<span class="string">&quot;RENPY_SCREENSHOT_PATTERN&quot;</span>, <span class="string">&quot;screenshot%04d.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Called to make a screenshot happen.</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_screenshot_core</span>():</span><br><span class="line">        <span class="keyword">import</span> os.path</span><br><span class="line">        <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">        dest = config.renpy_base</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.macapp:</span><br><span class="line">            dest = os.path.expanduser(<span class="string">&quot;~/Desktop&quot;</span>)</span><br><span class="line"></span><br><span class="line">        pattern = renpy.store._screenshot_pattern <span class="keyword">or</span> config.screenshot_pattern</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Try to pick a filename.</span></span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            fn = os.path.join(dest, pattern % i)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(fn):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            dn = os.path.dirname(fn)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dn):</span><br><span class="line">                os.makedirs(dn)</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> renpy.screenshot(fn):</span><br><span class="line">                renpy.notify(__(<span class="string">&quot;Failed to save screenshot as %s.&quot;</span>) % fn)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">import</span> traceback</span><br><span class="line">            traceback.print_exc()</span><br><span class="line">            renpy.notify(__(<span class="string">&quot;Failed to save screenshot as %s.&quot;</span>) % fn)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> config.screenshot_callback <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            config.screenshot_callback(fn)</span><br><span class="line"></span><br><span class="line">    config.pre_screenshot_actions = [ ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_screenshot</span>():</span><br><span class="line">        renpy.run(config.pre_screenshot_actions)</span><br><span class="line">        renpy.invoke_in_main_thread(_screenshot_core)</span><br><span class="line">        renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_screenshot_callback</span>(<span class="params">fn</span>):</span><br><span class="line">        renpy.notify(__(<span class="string">&quot;Saved screenshot as %s.&quot;</span>) % fn)</span><br><span class="line"></span><br><span class="line">    config.screenshot_callback = _screenshot_callback</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_fast_skip</span>():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.fast_skipping <span class="keyword">and</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        Skip(fast=<span class="literal">True</span>, confirm=<span class="keyword">not</span> config.developer)()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_reload_game</span>():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.autoreload:</span><br><span class="line">            renpy.exports.reload_script()</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.get_autoreload():</span><br><span class="line">            renpy.set_autoreload(<span class="literal">False</span>)</span><br><span class="line">            renpy.restart_interaction()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            renpy.set_autoreload(<span class="literal">True</span>)</span><br><span class="line">            renpy.exports.reload_script()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_launch_editor</span>():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        filename, line = renpy.get_filename_line()</span><br><span class="line">        renpy.launch_editor([ filename ], line)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_developer</span>():</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        renpy.show_screen(<span class="string">&quot;_developer&quot;</span>)</span><br><span class="line">        renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_profile_once</span>():</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.profile:</span><br><span class="line">            config.profile_time = <span class="number">10.0</span></span><br><span class="line">            config.profile = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        renpy.display.interface.profile_once = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_memory_profile</span>():</span><br><span class="line">        <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> renpy.experimental:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        renpy.memory.diff_memory()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_progress_screen</span>():</span><br><span class="line">        <span class="keyword">if</span> renpy.context_nesting_level():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.get_screen(<span class="string">&quot;_progress&quot;</span>):</span><br><span class="line">            renpy.hide_screen(<span class="string">&quot;_progress&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            renpy.show_screen(<span class="string">&quot;_progress&quot;</span>)</span><br><span class="line"></span><br><span class="line">        renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line">screen _progress:</span><br><span class="line">    layer config.interface_layer</span><br><span class="line"></span><br><span class="line">    $ new = renpy.count_newly_seen_dialogue_blocks()</span><br><span class="line">    $ seen = renpy.count_seen_dialogue_blocks()</span><br><span class="line">    $ total = renpy.count_dialogue_blocks()</span><br><span class="line"></span><br><span class="line">    drag:</span><br><span class="line">        draggable <span class="literal">True</span></span><br><span class="line">        focus_mask <span class="literal">None</span></span><br><span class="line">        xpos <span class="number">0</span></span><br><span class="line">        ypos <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        text <span class="string">&quot;[new] [seen]/[total]&quot;</span>:</span><br><span class="line">            size gui._scale(<span class="number">18</span>)</span><br><span class="line">            color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">            outlines [ (<span class="number">1</span>, <span class="string">&quot;#000&quot;</span>, <span class="number">0</span>, <span class="number">0</span>) ]</span><br><span class="line">            alt <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">init -<span class="number">1100</span> python:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># The default keymap.</span></span><br><span class="line">    _default_keymap = renpy.Keymap(</span><br><span class="line">        rollback = renpy.rollback,</span><br><span class="line">        screenshot = _screenshot,</span><br><span class="line">        toggle_fullscreen = renpy.toggle_fullscreen,</span><br><span class="line">        toggle_afm = _keymap_toggle_afm,</span><br><span class="line">        toggle_skip = _keymap_toggle_skipping,</span><br><span class="line">        fast_skip = _fast_skip,</span><br><span class="line">        game_menu = _invoke_game_menu,</span><br><span class="line">        hide_windows = renpy.curried_call_in_new_context(<span class="string">&quot;_hide_windows&quot;</span>),</span><br><span class="line">        launch_editor = _launch_editor,</span><br><span class="line">        reload_game = _reload_game,</span><br><span class="line">        developer = _developer,</span><br><span class="line">        quit = renpy.quit_event,</span><br><span class="line">        iconify = renpy.iconify,</span><br><span class="line">        <span class="built_in">help</span> = _<span class="built_in">help</span>,</span><br><span class="line">        choose_renderer = renpy.curried_call_in_new_context(<span class="string">&quot;_choose_renderer&quot;</span>),</span><br><span class="line">        console = _console.enter,</span><br><span class="line">        profile_once = _profile_once,</span><br><span class="line">        memory_profile = _memory_profile,</span><br><span class="line">        self_voicing = Preference(<span class="string">&quot;self voicing&quot;</span>, <span class="string">&quot;toggle&quot;</span>),</span><br><span class="line">        clipboard_voicing = Preference(<span class="string">&quot;clipboard voicing&quot;</span>, <span class="string">&quot;toggle&quot;</span>),</span><br><span class="line">        debug_voicing = Preference(<span class="string">&quot;debug voicing&quot;</span>, <span class="string">&quot;toggle&quot;</span>),</span><br><span class="line">        extra_voicing = renpy.exports.speak_extra_alt,</span><br><span class="line">        progress_screen = _progress_screen,</span><br><span class="line">        director = director.Start(),</span><br><span class="line">        performance = ToggleScreen(<span class="string">&quot;_performance&quot;</span>),</span><br><span class="line">        accessibility = ToggleScreen(<span class="string">&quot;_accessibility&quot;</span>),</span><br><span class="line">        bubble_editor = bubble.ToggleShown(),</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    config.underlay = [ _default_keymap ]</span><br><span class="line"></span><br><span class="line">    config.pre_screenshot_actions = [ Hide(<span class="string">&quot;notify&quot;</span>, immediately=<span class="literal">True</span>) ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">init <span class="number">1100</span> python hide:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;RENPY_DEFAULT_KEYMAP&quot;</span> <span class="keyword">in</span> os.environ:</span><br><span class="line">        renpy.config.keymap = renpy.config.default_keymap</span><br><span class="line">        config.underlay.insert(<span class="number">0</span>, _default_keymap)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">label _hide_windows:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> _windows_hidden:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> renpy.has_label(<span class="string">&quot;hide_windows&quot;</span>):</span><br><span class="line">        call hide_windows</span><br><span class="line">        <span class="keyword">if</span> _<span class="keyword">return</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    python:</span><br><span class="line">        _windows_hidden = <span class="literal">True</span></span><br><span class="line">        voice_sustain()</span><br><span class="line">        ui.saybehavior(dismiss=[<span class="string">&#x27;dismiss&#x27;</span>, <span class="string">&#x27;hide_windows&#x27;</span>])</span><br><span class="line">        ui.interact(suppress_overlay=<span class="literal">True</span>, suppress_window=<span class="literal">True</span>)</span><br><span class="line">        _windows_hidden = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">label _save_reload_game:</span><br><span class="line">    python hide:</span><br><span class="line"></span><br><span class="line">        renpy.music.stop()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.session.get(<span class="string">&quot;_reload_slot&quot;</span>, <span class="literal">None</span>) <span class="keyword">and</span> renpy.can_load(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]):</span><br><span class="line">            renpy.utter_restart()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (renpy.game.log <span class="keyword">is</span> <span class="literal">None</span>) <span class="keyword">or</span> (renpy.game.log.current <span class="keyword">is</span> <span class="literal">None</span>):</span><br><span class="line">            renpy.utter_restart()</span><br><span class="line"></span><br><span class="line">        renpy.session[<span class="string">&quot;_reload_slot&quot;</span>] = <span class="string">&quot;_reload-1&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">import</span> time</span><br><span class="line">        renpy.session[<span class="string">&quot;_reload_time&quot;</span>] = time.time()</span><br><span class="line"></span><br><span class="line">        renpy.take_screenshot((config.thumbnail_width, config.thumbnail_height))</span><br><span class="line"></span><br><span class="line">        ui.add(Solid((<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)))</span><br><span class="line">        ui.text(<span class="string">&quot;Saving game...&quot;</span>,</span><br><span class="line">                size=<span class="number">32</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">0.5</span>, color=<span class="string">&quot;#fff&quot;</span>, style=<span class="string">&quot;_text&quot;</span>)</span><br><span class="line"></span><br><span class="line">        ui.pausebehavior(<span class="number">0</span>)</span><br><span class="line">        ui.interact(suppress_overlay=<span class="literal">True</span>, suppress_underlay=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        renpy.save(<span class="string">&quot;_reload-1&quot;</span>, <span class="string">&quot;reload save game&quot;</span>)</span><br><span class="line"></span><br><span class="line">        ui.add(Solid((<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)))</span><br><span class="line">        ui.text(<span class="string">&quot;Reloading script...&quot;</span>,</span><br><span class="line">                size=<span class="number">32</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">0.5</span>, color=<span class="string">&quot;#fff&quot;</span>, style=<span class="string">&quot;_text&quot;</span>)</span><br><span class="line"></span><br><span class="line">        ui.pausebehavior(<span class="number">0</span>)</span><br><span class="line">        ui.interact(suppress_overlay=<span class="literal">True</span>, suppress_underlay=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        renpy.utter_restart()</span><br><span class="line"></span><br><span class="line">label _load_reload_game:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> renpy.session.get(<span class="string">&quot;_reload_slot&quot;</span>, <span class="literal">None</span>):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> renpy.can_load(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]):</span><br><span class="line">        $ <span class="keyword">del</span> renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    python hide:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line"></span><br><span class="line">            ui.add(Solid((<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)))</span><br><span class="line">            ui.text(<span class="string">&quot;Reloading game...&quot;</span>,</span><br><span class="line">                    size=<span class="number">32</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">0.5</span>, color=<span class="string">&quot;#fff&quot;</span>, style=<span class="string">&quot;_text&quot;</span>)</span><br><span class="line"></span><br><span class="line">            ui.pausebehavior(<span class="number">0</span>)</span><br><span class="line">            ui.interact(suppress_underlay=<span class="literal">True</span>, suppress_overlay=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">            renpy.load(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> (renpy.game.RestartTopContext, renpy.game.RestartContext):</span><br><span class="line"></span><br><span class="line">            renpy.rename_save(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>], <span class="string">&quot;_reload-2&quot;</span>)</span><br><span class="line">            <span class="keyword">del</span> renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>可以改为我设置的方案<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Copyright 2004-2024 Tom Rothamel &lt;pytom@bishoujo.us&gt;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Permission is hereby granted, free of charge, to any person</span></span><br><span class="line"><span class="comment"># obtaining a copy of this software and associated documentation files</span></span><br><span class="line"><span class="comment"># (the &quot;Software&quot;), to deal in the Software without restriction,</span></span><br><span class="line"><span class="comment"># including without limitation the rights to use, copy, modify, merge,</span></span><br><span class="line"><span class="comment"># publish, distribute, sublicense, and/or sell copies of the Software,</span></span><br><span class="line"><span class="comment"># and to permit persons to whom the Software is furnished to do so,</span></span><br><span class="line"><span class="comment"># subject to the following conditions:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The above copyright notice and this permission notice shall be</span></span><br><span class="line"><span class="comment"># included in all copies or substantial portions of the Software.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></span><br><span class="line"><span class="comment"># EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></span><br><span class="line"><span class="comment"># MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span></span><br><span class="line"><span class="comment"># NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</span></span><br><span class="line"><span class="comment"># LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span></span><br><span class="line"><span class="comment"># OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</span></span><br><span class="line"><span class="comment"># WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></span><br><span class="line"></span><br><span class="line">init -<span class="number">1600</span> python:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">_keymap_list</span>(<span class="title class_ inherited__">_list</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">self, a</span>):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                _<span class="built_in">list</span>.remove(<span class="variable language_">self</span>, a)</span><br><span class="line">            <span class="keyword">except</span> ValueError:</span><br><span class="line">                <span class="keyword">if</span> config.developer:</span><br><span class="line">                    <span class="keyword">raise</span></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    config.keymap = <span class="built_in">dict</span>(</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Bindings present almost everywhere, unless explicitly</span></span><br><span class="line">        <span class="comment"># disabled.</span></span><br><span class="line">        rollback = [ ],</span><br><span class="line">        screenshot = [ ], </span><br><span class="line">        game_menu = [ ],</span><br><span class="line">        launch_editor = [ ],</span><br><span class="line">        dump_styles = [ ],</span><br><span class="line">        inspector = [ ],</span><br><span class="line">        full_inspector = [ ],</span><br><span class="line">        developer = [ ],</span><br><span class="line">        iconify = [ ],</span><br><span class="line">        choose_renderer = [ ],</span><br><span class="line">        progress_screen = [ ],</span><br><span class="line">        bubble_editor = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 以下为自定义快捷键</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ESC 退出游戏</span></span><br><span class="line">        quit = [ <span class="string">&#x27;K_ESCAPE&#x27;</span>],</span><br><span class="line">        <span class="comment"># F1 打开帮助界面</span></span><br><span class="line">        <span class="built_in">help</span> = [ <span class="string">&#x27;K_F1&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F2 打开存档界面</span></span><br><span class="line">        save = [ <span class="string">&#x27;K_F2&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F3 打开读档界面</span></span><br><span class="line">        load = [ <span class="string">&#x27;K_F3&#x27;</span>],</span><br><span class="line">        <span class="comment"># F4 切换全屏/窗口</span></span><br><span class="line">        toggle_fullscreen = [ <span class="string">&#x27;K_F4&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F5 打开历史记录界面</span></span><br><span class="line">        history = [ <span class="string">&#x27;K_F5&#x27;</span>],</span><br><span class="line">        <span class="comment"># F6 切换自动模式</span></span><br><span class="line">        toggle_afm = [ <span class="string">&#x27;K_F6&#x27;</span>],</span><br><span class="line">        <span class="comment"># F7 切换快进模式</span></span><br><span class="line">        toggle_skip = [ <span class="string">&#x27;K_F7&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F8 打开系统设置界面</span></span><br><span class="line">        preferences = [ <span class="string">&#x27;K_F8&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F9 语言重播</span></span><br><span class="line">        voice = [ <span class="string">&#x27;K_F9&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F10 返回标题菜单</span></span><br><span class="line">        title = [ <span class="string">&#x27;K_F10&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F11 快速存档</span></span><br><span class="line">        quick_save = [ <span class="string">&#x27;K_F11&#x27;</span> ],</span><br><span class="line">        <span class="comment"># F12 快速读档</span></span><br><span class="line">        quick_load = [ <span class="string">&#x27;K_F12&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># r 键重新加载游戏</span></span><br><span class="line">        reload_game = [ <span class="string">&#x27;K_r&#x27;</span> ],</span><br><span class="line">        <span class="comment"># h 键隐藏对话框</span></span><br><span class="line">        hide_windows = [ <span class="string">&#x27;K_h&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 更多快捷键请自行添加</span></span><br><span class="line">        <span class="comment"># 请注意底部添加的代码</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Accessibility.</span></span><br><span class="line">        accessibility = [ ],</span><br><span class="line">        self_voicing = [ ],</span><br><span class="line">        clipboard_voicing = [ ],</span><br><span class="line">        debug_voicing = [ ],</span><br><span class="line">        extra_voicing = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Say.</span></span><br><span class="line">        rollforward = [ <span class="string">&#x27;anyrepeat_K_PAGEDOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_PAGEDOWN&#x27;</span>, <span class="string">&#x27;mousedown_5&#x27;</span>, ],</span><br><span class="line">        <span class="comment"># 添加鼠标滚轮下滑推进游戏进度</span></span><br><span class="line">        dismiss = [ <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_SPACE&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span>, <span class="string">&#x27;mouseup_1&#x27;</span>, <span class="string">&#x27;mousedown_5&#x27;</span> ],</span><br><span class="line">        dismiss_unfocused = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Pause.</span></span><br><span class="line">        dismiss_hard_pause = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Focus.</span></span><br><span class="line">        focus_left = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        focus_right = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        focus_up = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        focus_down = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Button.</span></span><br><span class="line">        button_ignore = [ <span class="string">&#x27;mousedown_1&#x27;</span> ],</span><br><span class="line">        button_select = [ <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span>, <span class="string">&#x27;mouseup_1&#x27;</span>,  ],</span><br><span class="line">        button_alternate = [ <span class="string">&#x27;mouseup_3&#x27;</span> ],</span><br><span class="line">        button_alternate_ignore = [ <span class="string">&#x27;mousedown_3&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Input.</span></span><br><span class="line">        input_backspace = [ <span class="string">&#x27;anyrepeat_K_BACKSPACE&#x27;</span> ],</span><br><span class="line">        input_enter = [ <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span> ],</span><br><span class="line">        input_next_line = [ <span class="string">&#x27;shift_K_RETURN&#x27;</span>, <span class="string">&#x27;shift_K_KP_ENTER&#x27;</span> ],</span><br><span class="line">        input_left = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        input_right = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        input_up = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        input_down = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line">        input_delete = [ <span class="string">&#x27;anyrepeat_K_DELETE&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DELETE&#x27;</span> ],</span><br><span class="line">        input_home = [ <span class="string">&#x27;K_HOME&#x27;</span>, <span class="string">&#x27;KP_HOME&#x27;</span>, <span class="string">&#x27;meta_K_LEFT&#x27;</span> ],</span><br><span class="line">        input_end = [ <span class="string">&#x27;K_END&#x27;</span>, <span class="string">&#x27;KP_END&#x27;</span>, <span class="string">&#x27;meta_K_RIGHT&#x27;</span> ],</span><br><span class="line">        input_copy = [ <span class="string">&#x27;ctrl_noshift_K_INSERT&#x27;</span>, <span class="string">&#x27;ctrl_noshift_K_c&#x27;</span>, <span class="string">&#x27;meta_noshift_K_c&#x27;</span> ],</span><br><span class="line">        input_paste = [ <span class="string">&#x27;shift_K_INSERT&#x27;</span>, <span class="string">&#x27;ctrl_noshift_K_v&#x27;</span>, <span class="string">&#x27;meta_noshift_K_v&#x27;</span> ],</span><br><span class="line">        input_jump_word_left = [ <span class="string">&#x27;osctrl_K_LEFT&#x27;</span>, <span class="string">&#x27;osctrl_KP_LEFT&#x27;</span> ],</span><br><span class="line">        input_jump_word_right = [ <span class="string">&#x27;osctrl_K_RIGHT&#x27;</span>, <span class="string">&#x27;osctrl_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        input_delete_word = [ <span class="string">&#x27;osctrl_K_BACKSPACE&#x27;</span> ],</span><br><span class="line">        input_delete_full = [ <span class="string">&#x27;meta_K_BACKSPACE&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Viewport.</span></span><br><span class="line">        viewport_leftarrow = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        viewport_rightarrow = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        viewport_uparrow = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        viewport_downarrow = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line">        viewport_wheelup = [ <span class="string">&#x27;mousedown_4&#x27;</span> ],</span><br><span class="line">        viewport_wheeldown = [ <span class="string">&#x27;mousedown_5&#x27;</span> ],</span><br><span class="line">        viewport_drag_start = [ <span class="string">&#x27;mousedown_1&#x27;</span> ],</span><br><span class="line">        viewport_drag_end = [ <span class="string">&#x27;mouseup_1&#x27;</span> ],</span><br><span class="line">        viewport_pageup = [ <span class="string">&#x27;anyrepeat_K_PAGEUP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_PAGEUP&#x27;</span>],</span><br><span class="line">        viewport_pagedown = [ <span class="string">&#x27;anyrepeat_K_PAGEDOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_PAGEDOWN&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># These keys control skipping.</span></span><br><span class="line">        skip = [ <span class="string">&#x27;anymod_K_LCTRL&#x27;</span>, <span class="string">&#x27;anymod_K_RCTRL&#x27;</span> ],</span><br><span class="line">        stop_skipping = [ ],</span><br><span class="line">        </span><br><span class="line">        fast_skip = [ <span class="string">&#x27;&gt;&#x27;</span>, <span class="string">&#x27;shift_K_PERIOD&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Bar.</span></span><br><span class="line">        bar_activate = [ <span class="string">&#x27;mousedown_1&#x27;</span>, <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span> ],</span><br><span class="line">        bar_deactivate = [ <span class="string">&#x27;mouseup_1&#x27;</span>, <span class="string">&#x27;K_RETURN&#x27;</span>, <span class="string">&#x27;K_KP_ENTER&#x27;</span>, <span class="string">&#x27;K_SELECT&#x27;</span> ],</span><br><span class="line">        bar_left = [ <span class="string">&#x27;anyrepeat_K_LEFT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_LEFT&#x27;</span> ],</span><br><span class="line">        bar_right = [ <span class="string">&#x27;anyrepeat_K_RIGHT&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_RIGHT&#x27;</span> ],</span><br><span class="line">        bar_up = [ <span class="string">&#x27;anyrepeat_K_UP&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_UP&#x27;</span> ],</span><br><span class="line">        bar_down = [ <span class="string">&#x27;anyrepeat_K_DOWN&#x27;</span>, <span class="string">&#x27;anyrepeat_KP_DOWN&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Delete a save.</span></span><br><span class="line">        save_delete = [ <span class="string">&#x27;K_DELETE&#x27;</span>, <span class="string">&#x27;KP_DELETE&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Save/load screen pagination.</span></span><br><span class="line">        save_page_prev = [<span class="string">&#x27;mousedown_4&#x27;</span>],</span><br><span class="line">        save_page_next = [<span class="string">&#x27;mousedown_5&#x27;</span>],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Draggable.</span></span><br><span class="line">        drag_activate = [ <span class="string">&#x27;mousedown_1&#x27;</span> ],</span><br><span class="line">        drag_deactivate = [ <span class="string">&#x27;mouseup_1&#x27;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Debug console.</span></span><br><span class="line">        console = [ ],</span><br><span class="line">        console_exit = [  ],</span><br><span class="line">        console_older = [ ],</span><br><span class="line">        console_newer = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Director</span></span><br><span class="line">        director = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Ignored (kept for backwards compatibility).</span></span><br><span class="line">        toggle_music = [ ],</span><br><span class="line">        viewport_up = [ ],</span><br><span class="line">        viewport_down = [ ],</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Profile commands.</span></span><br><span class="line">        performance = [ ],</span><br><span class="line">        image_load_log = [ ],</span><br><span class="line">        profile_once = [ ],</span><br><span class="line">        memory_profile = [ ],</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    config.default_keymap = &#123; k : _<span class="built_in">list</span>(v) <span class="keyword">for</span> k, v <span class="keyword">in</span> config.keymap.items() &#125;</span><br><span class="line">    config.keymap = &#123; k : _keymap_list(v) <span class="keyword">for</span> k, v <span class="keyword">in</span> config.keymap.items() &#125;</span><br><span class="line"></span><br><span class="line">    config.pad_bindings = &#123;</span><br><span class="line">        <span class="string">&quot;pad_leftshoulder_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_lefttrigger_pos&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_back_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_leftshoulder_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_lefttrigger_pos&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_back_press&quot;</span> : [ <span class="string">&quot;rollback&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_guide_press&quot;</span> : [ <span class="string">&quot;game_menu&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_start_press&quot;</span> : [ <span class="string">&quot;game_menu&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_y_press&quot;</span> : [ <span class="string">&quot;hide_windows&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;pad_x_press&quot;</span> : [ <span class="string">&quot;button_alternate&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_rightshoulder_press&quot;</span> : [ <span class="string">&quot;rollforward&quot;</span>, ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_rightshoulder_press&quot;</span> : [ <span class="string">&quot;rollforward&quot;</span>, ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_righttrigger_pos&quot;</span> : [ <span class="string">&quot;dismiss&quot;</span>, <span class="string">&quot;button_select&quot;</span>, <span class="string">&quot;bar_activate&quot;</span>, <span class="string">&quot;bar_deactivate&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_a_press&quot;</span> : [ <span class="string">&quot;dismiss&quot;</span>, <span class="string">&quot;button_select&quot;</span>, <span class="string">&quot;bar_activate&quot;</span>, <span class="string">&quot;bar_deactivate&quot;</span>],</span><br><span class="line">        <span class="string">&quot;pad_b_press&quot;</span> : [ <span class="string">&quot;game_menu&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpleft_press&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_leftx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_rightx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpright_press&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_leftx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_rightx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpup_press&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_lefty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_righty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;pad_dpdown_press&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_lefty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;pad_righty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpleft_press&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_leftx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_rightx_neg&quot;</span> : [ <span class="string">&quot;focus_left&quot;</span>, <span class="string">&quot;bar_left&quot;</span>, <span class="string">&quot;viewport_leftarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpright_press&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_leftx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_rightx_pos&quot;</span> : [ <span class="string">&quot;focus_right&quot;</span>, <span class="string">&quot;bar_right&quot;</span>, <span class="string">&quot;viewport_rightarrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpup_press&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_lefty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_righty_neg&quot;</span> : [ <span class="string">&quot;focus_up&quot;</span>, <span class="string">&quot;bar_up&quot;</span>, <span class="string">&quot;viewport_uparrow&quot;</span> ],</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;repeat_pad_dpdown_press&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_lefty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">        <span class="string">&quot;repeat_pad_righty_pos&quot;</span> : [ <span class="string">&quot;focus_down&quot;</span>, <span class="string">&quot;bar_down&quot;</span>, <span class="string">&quot;viewport_downarrow&quot;</span> ],</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Should we use the autoreload system?</span></span><br><span class="line">    config.autoreload = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">init -<span class="number">1600</span> python:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Are the windows currently hidden?</span></span><br><span class="line">    _windows_hidden = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_keymap_toggle_afm</span>():</span><br><span class="line">        <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        renpy.run(Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_toggle_skipping</span>():</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> renpy.config.allow_skipping:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> renpy.store._skipping:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.skipping:</span><br><span class="line">            config.skipping = <span class="string">&quot;slow&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            config.skipping = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">            renpy.jump(<span class="string">&quot;_noisy_return&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line">    toggle_skipping = _toggle_skipping</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_keymap_toggle_skipping</span>():</span><br><span class="line">        <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        _toggle_skipping()</span><br><span class="line"></span><br><span class="line">    config.<span class="built_in">help</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    config.help_screen = <span class="string">&quot;help&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_help</span>(<span class="params"><span class="built_in">help</span>=<span class="literal">None</span></span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">help</span> <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">help</span> = config.<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">help</span> <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> config.help_screen <span class="keyword">and</span> renpy.has_screen(config.help_screen):</span><br><span class="line">                renpy.run(ShowMenu(config.help_screen))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.has_label(<span class="built_in">help</span>):</span><br><span class="line">            renpy.call_in_new_context(<span class="built_in">help</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">help</span>.startswith(<span class="string">&#x27;http://&#x27;</span>) <span class="keyword">or</span> <span class="built_in">help</span>.startswith(<span class="string">&#x27;https://&#x27;</span>):</span><br><span class="line">                renpy.open_url(<span class="built_in">help</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            file_path = os.path.join(config.basedir, <span class="built_in">help</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(file_path):</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            renpy.open_url(<span class="string">&quot;file:///&quot;</span> + file_path)</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    config.screenshot_pattern = os.environ.get(<span class="string">&quot;RENPY_SCREENSHOT_PATTERN&quot;</span>, <span class="string">&quot;screenshot%04d.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Called to make a screenshot happen.</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_screenshot_core</span>():</span><br><span class="line">        <span class="keyword">import</span> os.path</span><br><span class="line">        <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">        dest = config.renpy_base</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.macapp:</span><br><span class="line">            dest = os.path.expanduser(<span class="string">&quot;~/Desktop&quot;</span>)</span><br><span class="line"></span><br><span class="line">        pattern = renpy.store._screenshot_pattern <span class="keyword">or</span> config.screenshot_pattern</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Try to pick a filename.</span></span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            fn = os.path.join(dest, pattern % i)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(fn):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            dn = os.path.dirname(fn)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dn):</span><br><span class="line">                os.makedirs(dn)</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> renpy.screenshot(fn):</span><br><span class="line">                renpy.notify(__(<span class="string">&quot;Failed to save screenshot as %s.&quot;</span>) % fn)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">import</span> traceback</span><br><span class="line">            traceback.print_exc()</span><br><span class="line">            renpy.notify(__(<span class="string">&quot;Failed to save screenshot as %s.&quot;</span>) % fn)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> config.screenshot_callback <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            config.screenshot_callback(fn)</span><br><span class="line"></span><br><span class="line">    config.pre_screenshot_actions = [ ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_screenshot</span>():</span><br><span class="line">        renpy.run(config.pre_screenshot_actions)</span><br><span class="line">        renpy.invoke_in_main_thread(_screenshot_core)</span><br><span class="line">        renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_screenshot_callback</span>(<span class="params">fn</span>):</span><br><span class="line">        renpy.notify(__(<span class="string">&quot;Saved screenshot as %s.&quot;</span>) % fn)</span><br><span class="line"></span><br><span class="line">    config.screenshot_callback = _screenshot_callback</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_fast_skip</span>():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.fast_skipping <span class="keyword">and</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        Skip(fast=<span class="literal">True</span>, confirm=<span class="keyword">not</span> config.developer)()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_reload_game</span>():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.autoreload:</span><br><span class="line">            renpy.exports.reload_script()</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.get_autoreload():</span><br><span class="line">            renpy.set_autoreload(<span class="literal">False</span>)</span><br><span class="line">            renpy.restart_interaction()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            renpy.set_autoreload(<span class="literal">True</span>)</span><br><span class="line">            renpy.exports.reload_script()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_launch_editor</span>():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        filename, line = renpy.get_filename_line()</span><br><span class="line">        renpy.launch_editor([ filename ], line)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_developer</span>():</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.developer:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        renpy.show_screen(<span class="string">&quot;_developer&quot;</span>)</span><br><span class="line">        renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_profile_once</span>():</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> config.profile:</span><br><span class="line">            config.profile_time = <span class="number">10.0</span></span><br><span class="line">            config.profile = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        renpy.display.interface.profile_once = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_memory_profile</span>():</span><br><span class="line">        <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> renpy.experimental:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        renpy.memory.diff_memory()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_progress_screen</span>():</span><br><span class="line">        <span class="keyword">if</span> renpy.context_nesting_level():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.get_screen(<span class="string">&quot;_progress&quot;</span>):</span><br><span class="line">            renpy.hide_screen(<span class="string">&quot;_progress&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            renpy.show_screen(<span class="string">&quot;_progress&quot;</span>)</span><br><span class="line"></span><br><span class="line">        renpy.restart_interaction()</span><br><span class="line"></span><br><span class="line">screen _progress:</span><br><span class="line">    layer config.interface_layer</span><br><span class="line"></span><br><span class="line">    $ new = renpy.count_newly_seen_dialogue_blocks()</span><br><span class="line">    $ seen = renpy.count_seen_dialogue_blocks()</span><br><span class="line">    $ total = renpy.count_dialogue_blocks()</span><br><span class="line"></span><br><span class="line">    drag:</span><br><span class="line">        draggable <span class="literal">True</span></span><br><span class="line">        focus_mask <span class="literal">None</span></span><br><span class="line">        xpos <span class="number">0</span></span><br><span class="line">        ypos <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        text <span class="string">&quot;[new] [seen]/[total]&quot;</span>:</span><br><span class="line">            size gui._scale(<span class="number">18</span>)</span><br><span class="line">            color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">            outlines [ (<span class="number">1</span>, <span class="string">&quot;#000&quot;</span>, <span class="number">0</span>, <span class="number">0</span>) ]</span><br><span class="line">            alt <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">init -<span class="number">1100</span> python:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># The default keymap.</span></span><br><span class="line">    _default_keymap = renpy.Keymap(</span><br><span class="line">        rollback = renpy.rollback,</span><br><span class="line">        screenshot = _screenshot,</span><br><span class="line">        toggle_fullscreen = renpy.toggle_fullscreen,</span><br><span class="line">        toggle_afm = _keymap_toggle_afm,</span><br><span class="line">        toggle_skip = _keymap_toggle_skipping,</span><br><span class="line">        fast_skip = _fast_skip,</span><br><span class="line">        game_menu = _invoke_game_menu,</span><br><span class="line">        hide_windows = renpy.curried_call_in_new_context(<span class="string">&quot;_hide_windows&quot;</span>),</span><br><span class="line">        launch_editor = _launch_editor,</span><br><span class="line">        reload_game = _reload_game,</span><br><span class="line">        developer = _developer,</span><br><span class="line">        quit = renpy.quit_event,</span><br><span class="line">        iconify = renpy.iconify,</span><br><span class="line">        <span class="built_in">help</span> = _<span class="built_in">help</span>,</span><br><span class="line">        choose_renderer = renpy.curried_call_in_new_context(<span class="string">&quot;_choose_renderer&quot;</span>),</span><br><span class="line">        console = _console.enter,</span><br><span class="line">        profile_once = _profile_once,</span><br><span class="line">        memory_profile = _memory_profile,</span><br><span class="line">        self_voicing = Preference(<span class="string">&quot;self voicing&quot;</span>, <span class="string">&quot;toggle&quot;</span>),</span><br><span class="line">        clipboard_voicing = Preference(<span class="string">&quot;clipboard voicing&quot;</span>, <span class="string">&quot;toggle&quot;</span>),</span><br><span class="line">        debug_voicing = Preference(<span class="string">&quot;debug voicing&quot;</span>, <span class="string">&quot;toggle&quot;</span>),</span><br><span class="line">        extra_voicing = renpy.exports.speak_extra_alt,</span><br><span class="line">        progress_screen = _progress_screen,</span><br><span class="line">        director = director.Start(),</span><br><span class="line">        performance = ToggleScreen(<span class="string">&quot;_performance&quot;</span>),</span><br><span class="line">        accessibility = ToggleScreen(<span class="string">&quot;_accessibility&quot;</span>),</span><br><span class="line">        bubble_editor = bubble.ToggleShown(),</span><br><span class="line">        <span class="comment"># 以下为新添加内容</span></span><br><span class="line">        save = ShowMenu(<span class="string">&quot;save&quot;</span>),</span><br><span class="line">        load = ShowMenu(<span class="string">&quot;load&quot;</span>),</span><br><span class="line">        history = ShowMenu(<span class="string">&quot;history&quot;</span>),</span><br><span class="line">        preferences = ShowMenu(<span class="string">&quot;preferences&quot;</span>),</span><br><span class="line">        voice = VoiceReplay(),</span><br><span class="line">        title = MainMenu(),</span><br><span class="line">        quick_save = QuickSave(message=<span class="string">&#x27;Quick save complete.&#x27;</span>, newest=<span class="literal">False</span>),</span><br><span class="line">        quick_load = QuickLoad(confirm=<span class="literal">False</span>),</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    config.underlay = [ _default_keymap ]</span><br><span class="line"></span><br><span class="line">    config.pre_screenshot_actions = [ Hide(<span class="string">&quot;notify&quot;</span>, immediately=<span class="literal">True</span>) ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">init <span class="number">1100</span> python hide:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;RENPY_DEFAULT_KEYMAP&quot;</span> <span class="keyword">in</span> os.environ:</span><br><span class="line">        renpy.config.keymap = renpy.config.default_keymap</span><br><span class="line">        config.underlay.insert(<span class="number">0</span>, _default_keymap)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">label _hide_windows:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> renpy.context()._menu:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> _windows_hidden:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> renpy.has_label(<span class="string">&quot;hide_windows&quot;</span>):</span><br><span class="line">        call hide_windows</span><br><span class="line">        <span class="keyword">if</span> _<span class="keyword">return</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    python:</span><br><span class="line">        _windows_hidden = <span class="literal">True</span></span><br><span class="line">        voice_sustain()</span><br><span class="line">        ui.saybehavior(dismiss=[<span class="string">&#x27;dismiss&#x27;</span>, <span class="string">&#x27;hide_windows&#x27;</span>])</span><br><span class="line">        ui.interact(suppress_overlay=<span class="literal">True</span>, suppress_window=<span class="literal">True</span>)</span><br><span class="line">        _windows_hidden = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">label _save_reload_game:</span><br><span class="line">    python hide:</span><br><span class="line"></span><br><span class="line">        renpy.music.stop()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.session.get(<span class="string">&quot;_reload_slot&quot;</span>, <span class="literal">None</span>) <span class="keyword">and</span> renpy.can_load(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]):</span><br><span class="line">            renpy.utter_restart()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (renpy.game.log <span class="keyword">is</span> <span class="literal">None</span>) <span class="keyword">or</span> (renpy.game.log.current <span class="keyword">is</span> <span class="literal">None</span>):</span><br><span class="line">            renpy.utter_restart()</span><br><span class="line"></span><br><span class="line">        renpy.session[<span class="string">&quot;_reload_slot&quot;</span>] = <span class="string">&quot;_reload-1&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">import</span> time</span><br><span class="line">        renpy.session[<span class="string">&quot;_reload_time&quot;</span>] = time.time()</span><br><span class="line"></span><br><span class="line">        renpy.take_screenshot((config.thumbnail_width, config.thumbnail_height))</span><br><span class="line"></span><br><span class="line">        ui.add(Solid((<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)))</span><br><span class="line">        ui.text(<span class="string">&quot;Saving game...&quot;</span>,</span><br><span class="line">                size=<span class="number">32</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">0.5</span>, color=<span class="string">&quot;#fff&quot;</span>, style=<span class="string">&quot;_text&quot;</span>)</span><br><span class="line"></span><br><span class="line">        ui.pausebehavior(<span class="number">0</span>)</span><br><span class="line">        ui.interact(suppress_overlay=<span class="literal">True</span>, suppress_underlay=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        renpy.save(<span class="string">&quot;_reload-1&quot;</span>, <span class="string">&quot;reload save game&quot;</span>)</span><br><span class="line"></span><br><span class="line">        ui.add(Solid((<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)))</span><br><span class="line">        ui.text(<span class="string">&quot;Reloading script...&quot;</span>,</span><br><span class="line">                size=<span class="number">32</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">0.5</span>, color=<span class="string">&quot;#fff&quot;</span>, style=<span class="string">&quot;_text&quot;</span>)</span><br><span class="line"></span><br><span class="line">        ui.pausebehavior(<span class="number">0</span>)</span><br><span class="line">        ui.interact(suppress_overlay=<span class="literal">True</span>, suppress_underlay=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        renpy.utter_restart()</span><br><span class="line"></span><br><span class="line">label _load_reload_game:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> renpy.session.get(<span class="string">&quot;_reload_slot&quot;</span>, <span class="literal">None</span>):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> renpy.can_load(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]):</span><br><span class="line">        $ <span class="keyword">del</span> renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    python hide:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line"></span><br><span class="line">            ui.add(Solid((<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)))</span><br><span class="line">            ui.text(<span class="string">&quot;Reloading game...&quot;</span>,</span><br><span class="line">                    size=<span class="number">32</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">0.5</span>, color=<span class="string">&quot;#fff&quot;</span>, style=<span class="string">&quot;_text&quot;</span>)</span><br><span class="line"></span><br><span class="line">            ui.pausebehavior(<span class="number">0</span>)</span><br><span class="line">            ui.interact(suppress_underlay=<span class="literal">True</span>, suppress_overlay=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">            renpy.load(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> (renpy.game.RestartTopContext, renpy.game.RestartContext):</span><br><span class="line"></span><br><span class="line">            renpy.rename_save(renpy.session[<span class="string">&quot;_reload_slot&quot;</span>], <span class="string">&quot;_reload-2&quot;</span>)</span><br><span class="line">            <span class="keyword">del</span> renpy.session[<span class="string">&quot;_reload_slot&quot;</span>]</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="选择界面"><a href="#选择界面" class="headerlink" title="选择界面"></a>选择界面</h1><p>向样式中添加背景图即可<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">style choice_button <span class="keyword">is</span> default:</span><br><span class="line">    background Frame(<span class="string">&quot;gui/choice/choice.png&quot;</span>,xsize=<span class="number">800</span>,ysize=<span class="number">66</span>)</span><br><span class="line">    hover_background<span class="string">&quot;gui/choice/choice_hover.png&quot;</span></span><br><span class="line">    xysize(<span class="number">800</span>,<span class="number">66</span>)</span><br></pre></td></tr></table></figure></p><h1 id="确认界面"><a href="#确认界面" class="headerlink" title="确认界面"></a>确认界面</h1><p>添加背景图即可<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">screen confirm(message, yes_action, no_action):</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 显示此屏幕时，确保其他屏幕无法输入。</span></span><br><span class="line">    modal <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    zorder <span class="number">200</span></span><br><span class="line">    add <span class="string">&quot;gui/confirm/firme.png&quot;</span></span><br><span class="line"></span><br><span class="line">    text _(message):</span><br><span class="line">        layout <span class="string">&quot;subtitle&quot;</span></span><br><span class="line">        color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">        size <span class="number">30</span></span><br><span class="line">        align (<span class="number">0.5</span>,<span class="number">0.45</span>)</span><br><span class="line">        xoffset <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    hbox:</span><br><span class="line">        align (<span class="number">0.5</span>,<span class="number">0.55</span>)</span><br><span class="line">        spacing <span class="number">30</span></span><br><span class="line">        xoffset <span class="number">10</span></span><br><span class="line"></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;gui/confirm/yes.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;gui/confirm/yes_hover.png&quot;</span></span><br><span class="line">            action yes_action</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;gui/confirm/no.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;gui/confirm/no_hover.png&quot;</span></span><br><span class="line">            action no_action</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 右键点击退出并答复 no（取消）。</span></span><br><span class="line">    key <span class="string">&quot;game_menu&quot;</span> action no_action</span><br><span class="line">    on <span class="string">&quot;show&quot;</span> action MouseMove(<span class="number">850</span>,<span class="number">570</span>)</span><br><span class="line"></span><br><span class="line">style confirm_frame <span class="keyword">is</span> gui_frame</span><br><span class="line">style confirm_prompt <span class="keyword">is</span> gui_prompt</span><br><span class="line">style confirm_prompt_text <span class="keyword">is</span> gui_prompt_text</span><br><span class="line">style confirm_button <span class="keyword">is</span> gui_medium_button</span><br><span class="line">style confirm_button_text <span class="keyword">is</span> gui_medium_button_text</span><br><span class="line"></span><br><span class="line">style confirm_frame:</span><br><span class="line">    background Frame([ <span class="string">&quot;gui/confirm_frame.png&quot;</span>, <span class="string">&quot;gui/frame.png&quot;</span>], gui.confirm_frame_borders, tile=gui.frame_tile)</span><br><span class="line">    padding gui.confirm_frame_borders.padding</span><br><span class="line">    xalign <span class="number">.5</span></span><br><span class="line">    yalign <span class="number">.5</span></span><br><span class="line"></span><br><span class="line">style confirm_prompt_text:</span><br><span class="line">    textalign <span class="number">0.5</span></span><br><span class="line">    layout <span class="string">&quot;subtitle&quot;</span></span><br><span class="line"></span><br><span class="line">style confirm_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;confirm_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style confirm_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;confirm_button&quot;</span>)</span><br></pre></td></tr></table></figure><br>想要修改显示文字可以修改<code>game/tl/None/common.rpym</code></p><h1 id="快进指示界面"><a href="#快进指示界面" class="headerlink" title="快进指示界面"></a>快进指示界面</h1><p>没什么用，建议删除<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快进指示屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## skip_indicator 屏幕用于指示快进正在进行中。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://www.renpy.cn/doc/screen_special.html#skip-indicator</span></span><br><span class="line"></span><br><span class="line">screen skip_indicator():</span><br><span class="line"></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line">    style_prefix <span class="string">&quot;skip&quot;</span></span><br><span class="line"></span><br><span class="line">    frame:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">9</span></span><br><span class="line"></span><br><span class="line">            text _(<span class="string">&quot;正在快进&quot;</span>)</span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;▸&quot;</span> at delayed_blink(<span class="number">0.0</span>, <span class="number">1.0</span>) style <span class="string">&quot;skip_triangle&quot;</span></span><br><span class="line">            text <span class="string">&quot;▸&quot;</span> at delayed_blink(<span class="number">0.2</span>, <span class="number">1.0</span>) style <span class="string">&quot;skip_triangle&quot;</span></span><br><span class="line">            text <span class="string">&quot;▸&quot;</span> at delayed_blink(<span class="number">0.4</span>, <span class="number">1.0</span>) style <span class="string">&quot;skip_triangle&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 此变换用于一个接一个地闪烁箭头。</span></span><br><span class="line">transform delayed_blink(delay, cycle):</span><br><span class="line">    alpha <span class="number">.5</span></span><br><span class="line"></span><br><span class="line">    pause delay</span><br><span class="line"></span><br><span class="line">    block:</span><br><span class="line">        linear <span class="number">.2</span> alpha <span class="number">1.0</span></span><br><span class="line">        pause <span class="number">.2</span></span><br><span class="line">        linear <span class="number">.2</span> alpha <span class="number">0.5</span></span><br><span class="line">        pause (cycle - <span class="number">.4</span>)</span><br><span class="line">        repeat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style skip_frame <span class="keyword">is</span> empty</span><br><span class="line">style skip_text <span class="keyword">is</span> gui_text</span><br><span class="line">style skip_triangle <span class="keyword">is</span> skip_text</span><br><span class="line"></span><br><span class="line">style skip_frame:</span><br><span class="line">    ypos gui.skip_ypos</span><br><span class="line">    background Frame(<span class="string">&quot;gui/skip.png&quot;</span>, gui.skip_frame_borders, tile=gui.frame_tile)</span><br><span class="line">    padding gui.skip_frame_borders.padding</span><br><span class="line"></span><br><span class="line">style skip_text:</span><br><span class="line">    size gui.notify_text_size</span><br><span class="line"></span><br><span class="line">style skip_triangle:</span><br><span class="line">    <span class="comment">## 我们必须使用包含“▸”（黑色右旋小三角）字形的字体。</span></span><br><span class="line">    font <span class="string">&quot;DejaVuSans.ttf&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p><code>game/tl/None/common.rpym</code>中修改<code>536~538</code>行为<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># renpy/common/00library.rpy:248</span></span><br><span class="line">old <span class="string">&quot;Skip Mode&quot;</span></span><br><span class="line">new <span class="string">&quot; &quot;</span></span><br></pre></td></tr></table></figure></p><p>底部菜单新增<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正在快进</span></span><br><span class="line"><span class="keyword">if</span> renpy.is_skipping():</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;skipping&quot;</span></span><br><span class="line">        action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 没有快进</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/skip.png&quot;</span></span><br><span class="line">        insensitive <span class="string">&quot;gui/skip_off.png&quot;</span></span><br><span class="line">        action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></p><p>帧动画定义<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#快进指示</span></span><br><span class="line">image skipping:</span><br><span class="line">    anim.Filmstrip(<span class="string">&quot;skipping.png&quot;</span>,(<span class="number">10</span>,<span class="number">10</span>),(<span class="number">1</span>,<span class="number">58</span>),<span class="number">.023</span>,loop=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></p><h1 id="通知界面"><a href="#通知界面" class="headerlink" title="通知界面"></a>通知界面</h1><p>可以不用修改，直接替换同名图像即可</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">screen notify(message):</span><br><span class="line"></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line">    style_prefix <span class="string">&quot;notify&quot;</span></span><br><span class="line"></span><br><span class="line">    frame at notify_appear:</span><br><span class="line">        text <span class="string">&quot;[message!tq]&quot;</span></span><br><span class="line"></span><br><span class="line">    timer <span class="number">3.25</span> action Hide(<span class="string">&#x27;notify&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">transform notify_appear:</span><br><span class="line">    on show:</span><br><span class="line">        alpha <span class="number">0</span></span><br><span class="line">        linear <span class="number">.25</span> alpha <span class="number">1.0</span></span><br><span class="line">    on hide:</span><br><span class="line">        linear <span class="number">.5</span> alpha <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style notify_frame <span class="keyword">is</span> empty</span><br><span class="line">style notify_text <span class="keyword">is</span> gui_text</span><br><span class="line"></span><br><span class="line">style notify_frame:</span><br><span class="line">    ypos gui.notify_ypos</span><br><span class="line"></span><br><span class="line">    background Frame(<span class="string">&quot;gui/notify.png&quot;</span>, gui.notify_frame_borders, tile=gui.frame_tile)</span><br><span class="line">    padding gui.notify_frame_borders.padding</span><br><span class="line"></span><br><span class="line">style notify_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;notify&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 系统设置界面修改(三)</title>
      <link href="/posts/d87f7e0c.html"/>
      <url>/posts/d87f7e0c.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文修改全部位于<code>screens.rpy</code>文件中</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li><a href="https://doc.renpy.cn/zh-CN/voice.html#voice-actions">角色音量</a></li><li><a href="https://doc.renpy.cn/zh-CN/config.html#var-config.emphasize_audio_channels">播放语音时BGM音量</a></li><li><a href="https://www.renpy.cn/forum.php?mod=viewthread&amp;tid=1616&amp;highlight=%E9%9F%B3%E9%87%8F">非线性问题解决</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1zMqLYVE94&cid=27229423555&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="常规音量设置"><a href="#常规音量设置" class="headerlink" title="常规音量设置"></a>常规音量设置</h1><h2 id="新建界面"><a href="#新建界面" class="headerlink" title="新建界面"></a>新建界面</h2><p>先新建一个界面，添加必要部分，参考代码如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">screen sound():</span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;preference_bg.png&quot;</span></span><br><span class="line">    <span class="comment">## 子菜单</span></span><br><span class="line">    hbox:</span><br><span class="line">        pos(<span class="number">260</span>,<span class="number">40</span>)</span><br><span class="line">        spacing <span class="number">30</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;system.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;hover_system.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;message.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;hover_message.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;message&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;sound_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;sound&#x27;</span>)</span><br><span class="line">    hbox:</span><br><span class="line">        pos(<span class="number">1260</span>,<span class="number">40</span>)</span><br><span class="line">        spacing <span class="number">30</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;dialog.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;dialog_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;dialog&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;voi.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;voi_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;voice&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;shortcut.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;shortcut_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;shortcut&#x27;</span>)</span><br><span class="line">   <span class="comment">## 返回按钮</span></span><br><span class="line">    hbox:</span><br><span class="line">        align (<span class="number">1.0</span>,<span class="number">1.0</span>)</span><br><span class="line">        xoffset -<span class="number">50</span></span><br><span class="line">        yoffset -<span class="number">50</span></span><br><span class="line">        spacing <span class="number">20</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> main_menu:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;return_title.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;return_title_hover.png&quot;</span></span><br><span class="line">                action MainMenu()</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;end_game.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;end_game_hover.png&quot;</span></span><br><span class="line">            action Quit()</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;return_game.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;return_game_hover.png&quot;</span></span><br><span class="line">            action Return()</span><br></pre></td></tr></table></figure><h2 id="功能选项"><a href="#功能选项" class="headerlink" title="功能选项"></a>功能选项</h2><h3 id="全部音量"><a href="#全部音量" class="headerlink" title="全部音量"></a>全部音量</h3><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;主音量&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    vbox:</span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            bar:</span><br><span class="line">                value Preference(<span class="string">&quot;main volume&quot;</span>,<span class="built_in">range</span>=<span class="number">100</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                $ main_volume = <span class="built_in">int</span>(preferences.get_mixer(<span class="string">&quot;main&quot;</span>)*<span class="number">100</span>)</span><br><span class="line">                text <span class="string">&quot;[main_volume]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure><h3 id="音乐音量"><a href="#音乐音量" class="headerlink" title="音乐音量"></a>音乐音量</h3><p>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;BGM音量&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    vbox:</span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            bar:</span><br><span class="line">                value Preference(<span class="string">&quot;music volume&quot;</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                $ music_volume = <span class="built_in">int</span>(preferences.get_mixer(<span class="string">&quot;music&quot;</span>)*<span class="number">100</span>)</span><br><span class="line">                text <span class="string">&quot;[music_volume]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure></p><h3 id="音效音量"><a href="#音效音量" class="headerlink" title="音效音量"></a>音效音量</h3><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;音效音量&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    vbox:</span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            bar:</span><br><span class="line">                value Preference(<span class="string">&quot;sound volume&quot;</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                $ sound_volume = <span class="built_in">int</span>(preferences.get_mixer(<span class="string">&quot;sfx&quot;</span>)*<span class="number">100</span>)</span><br><span class="line">                text <span class="string">&quot;[sound_volume]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure><h3 id="播放语音时BGM音量"><a href="#播放语音时BGM音量" class="headerlink" title="播放语音时BGM音量"></a>播放语音时BGM音量</h3><ol><li><p>定义</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 播放语音时降低bgm音量</span></span><br><span class="line">default preferences.emphasize_audio = <span class="literal">True</span></span><br><span class="line"><span class="comment">## 只能使用define</span></span><br><span class="line">define config.emphasize_audio_channels = [ <span class="string">&#x27;voice&#x27;</span> ]</span><br><span class="line">define config.emphasize_audio_time = <span class="number">0.5</span></span><br><span class="line">define config.emphasize_audio_volume = <span class="number">0.5</span></span><br><span class="line"><span class="comment">## 自定义变量解决上面问题</span></span><br><span class="line">default voicing_bgm_volume = <span class="number">0.5</span></span><br></pre></td></tr></table></figure></li><li><p>设置</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;播放语音时BGM音量&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    vbox:</span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            bar:</span><br><span class="line">                value VariableValue(<span class="string">&quot;voicing_bgm_volume&quot;</span>,<span class="built_in">range</span>=<span class="number">1.0</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                $ config.emphasize_audio_volume = voicing_bgm_volume</span><br><span class="line">                $ text_voicing_bgm_volume = <span class="built_in">int</span>(voicing_bgm_volume*<span class="number">100</span>)</span><br><span class="line">                text <span class="string">&quot;[text_voicing_bgm_volume]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="显示BGM名称"><a href="#显示BGM名称" class="headerlink" title="显示BGM名称"></a>显示BGM名称</h3><ol><li><p>定义</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 显示歌曲名称</span></span><br><span class="line">default music_name_always = <span class="literal">True</span></span><br><span class="line">default music_name_five_seconds = <span class="literal">False</span></span><br><span class="line">default music_name_never = <span class="literal">False</span></span><br></pre></td></tr></table></figure></li><li><p>新建界面</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 音乐弹窗</span></span><br><span class="line">default bgm_name=<span class="string">&quot; &quot;</span></span><br><span class="line"></span><br><span class="line">screen music_name():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 获取当前正在播放的BGM</span></span><br><span class="line">    $ music_file_name=renpy.music.get_playing(channel = <span class="string">&#x27;music&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保显示为正确的文件名</span></span><br><span class="line">    timer <span class="number">0.01</span>:</span><br><span class="line">        action SetVariable(<span class="string">&quot;music_file_name&quot;</span>,renpy.music.get_playing(channel = <span class="string">&#x27;music&#x27;</span>))</span><br><span class="line">        repeat <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">## 将文件名替换为歌曲名</span></span><br><span class="line">    <span class="keyword">if</span> music_file_name == <span class="string">&quot;bgm22.ogg&quot;</span>:</span><br><span class="line">        $ bgm_name = <span class="string">&quot;红茶与布丁&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> music_file_name == <span class="string">&quot;bgm12.ogg&quot;</span>:</span><br><span class="line">        $ bgm_name = <span class="string">&quot;星空下的芭芭露&quot;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">## 总是显示</span></span><br><span class="line">    <span class="keyword">if</span> music_name_always:</span><br><span class="line">        <span class="keyword">if</span> renpy.music.is_playing(channel = <span class="string">&#x27;music&#x27;</span>):</span><br><span class="line">            frame:</span><br><span class="line">                at music_name_always_appear</span><br><span class="line">                background <span class="string">&quot;music_name_bg.png&quot;</span></span><br><span class="line">                text <span class="string">&quot;[bgm_name]&quot;</span>:</span><br><span class="line">                    xoffset <span class="number">80</span></span><br><span class="line">                    yoffset <span class="number">10</span></span><br><span class="line">    <span class="comment">## 显示五秒</span></span><br><span class="line">    <span class="keyword">elif</span> music_name_five_seconds:</span><br><span class="line">        <span class="keyword">if</span> renpy.music.is_playing(channel = <span class="string">&#x27;music&#x27;</span>):</span><br><span class="line">            frame:</span><br><span class="line">                at music_name_five_seconds_appear</span><br><span class="line">                background <span class="string">&quot;music_name_bg.png&quot;</span></span><br><span class="line">                text <span class="string">&quot;[bgm_name]&quot;</span>:</span><br><span class="line">                    xoffset <span class="number">80</span></span><br><span class="line">                    yoffset <span class="number">10</span></span><br><span class="line">    <span class="comment">## 不显示</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 总是显示</span></span><br><span class="line">transform music_name_always_appear:</span><br><span class="line">    xoffset -<span class="number">600</span></span><br><span class="line">    easein <span class="number">1.0</span> xoffset <span class="number">0</span></span><br><span class="line"><span class="comment">## 显示五秒</span></span><br><span class="line">transform music_name_five_seconds_appear:</span><br><span class="line">    xoffset -<span class="number">600</span></span><br><span class="line">    easein <span class="number">1.0</span> xoffset <span class="number">0</span></span><br><span class="line">    pause <span class="number">5.0</span></span><br><span class="line">    easeout <span class="number">1.0</span> xoffset -<span class="number">600</span></span><br></pre></td></tr></table></figure></li><li><p>设置</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;显示歌曲名称&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    vbox:</span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            <span class="comment">## 总是显示</span></span><br><span class="line">            <span class="keyword">if</span> music_name_always:</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_always_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_five_seconds.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;music_name_five_seconds_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_never.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;music_name_never_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>,<span class="literal">True</span> )]</span><br><span class="line">            <span class="comment">## 显示五秒</span></span><br><span class="line">            <span class="keyword">elif</span> music_name_five_seconds:</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_always.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;music_name_always_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_five_seconds_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_never.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;music_name_never_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>,<span class="literal">True</span> )]</span><br><span class="line">            <span class="comment">## 不显示</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_always.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;music_name_always_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_five_seconds.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;music_name_five_seconds_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;music_name_never_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;music_name_always&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_five_seconds&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;music_name_never&quot;</span>,<span class="literal">True</span> )]</span><br></pre></td></tr></table></figure></li><li><p>使用方法<br> 每次播放音乐时展示该界面，停止播放音乐时隐藏该界面，添加<code>pause</code>语句增强视觉体验效果</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">stop music</span><br><span class="line">hide screen music_name</span><br><span class="line">pause <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">play music <span class="string">&quot;bgm22.ogg&quot;</span></span><br><span class="line">show screen music_name</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>开发日志</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 日志</span></span><br><span class="line"><span class="comment">## 2024.11.23</span></span><br><span class="line"><span class="comment">## 尝试使用 config.overlay_screens.append(&quot;music_name&quot;) 显示该界面</span></span><br><span class="line"><span class="comment">## 结果 1. 总是显示切换bgm时歌曲信息会直接覆盖，需要隐藏或回退</span></span><br><span class="line"><span class="comment">##      2. 显示五秒只会显示第一次播放的bgm，后续切换bgm无法显示</span></span><br><span class="line"><span class="comment">##      3. 历史记录跳转等情况下，歌曲信息更新不及时</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 尝试直接在 say 界面运行</span></span><br><span class="line"><span class="comment">## 结果 每次点击都会重新运行</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 尝试使用自定义变量对比当前正在播放的音乐文件名</span></span><br><span class="line"><span class="comment">## 结果 获取值为固定值</span></span><br><span class="line"><span class="comment">## </span></span><br><span class="line"><span class="comment">## 尝试定义不同的界面实现不同的设置</span></span><br><span class="line"><span class="comment">## 结果 无法获取 music_file_name</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 本质问题 切换 bgm 时需要重新运行该界面，但 renpy 并没有提供切换音乐相关说明</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 2024.11.27</span></span><br><span class="line"><span class="comment">## 放弃使用函数、变量等，直接在 play/stop music 后添加 show/hide screen music_name</span></span><br><span class="line"><span class="comment">## 结果 除切换 bgm 展示该界面时会与前一个叠加外，效果意外不错，添加 pause 语句设置为 0.5 达到理想效果</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 继续尝试添加 on &quot;hide&quot; 语句，发生报错，无法与 pause 语句一同使用</span></span><br><span class="line"><span class="comment">## 尝试将 pause 语句加入 transform 语句中，表现效果不佳，放弃使用 on &quot;hide&quot; 语句</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 最终解决方法 1. 尝试添加 timer 语句，控制为 0.01 解决歌曲信息更新不及时问题</span></span><br><span class="line"><span class="comment">##             2. 每次播放 bgm 时显示该界面，停止播放时隐藏该界面，同时暂停0.5s</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 测试 除需要每次使用 play/stop music 时要添加额外语句外，暂未发现问题</span></span><br><span class="line"><span class="comment">## 新游戏，读档，历史记录跳转，更改该界面相关设置等行为会重新显示该界面，</span></span><br><span class="line"><span class="comment">## 其他情况下保持不变，同一 bgm 下保留音乐播放进度</span></span><br></pre></td></tr></table></figure></li></ol><h1 id="角色音量设置"><a href="#角色音量设置" class="headerlink" title="角色音量设置"></a>角色音量设置</h1><h2 id="新建界面-1"><a href="#新建界面-1" class="headerlink" title="新建界面"></a>新建界面</h2><p>先新建一个界面，添加必要部分，参考代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">screen voice:</span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;preference_bg.png&quot;</span></span><br><span class="line">    <span class="comment">## 子菜单</span></span><br><span class="line">    hbox:</span><br><span class="line">        pos(<span class="number">260</span>,<span class="number">40</span>)</span><br><span class="line">        spacing <span class="number">30</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;system.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;hover_system.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;message.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;hover_message.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;message&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;sound.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;sound_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;sound&#x27;</span>)</span><br><span class="line">    hbox:</span><br><span class="line">        pos(<span class="number">1260</span>,<span class="number">40</span>)</span><br><span class="line">        spacing <span class="number">30</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;dialog.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;dialog_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;dialog&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;voi_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;voice&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;shortcut.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;shortcut_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;shortcut&#x27;</span>)</span><br><span class="line">    <span class="comment">## 返回按钮</span></span><br><span class="line">    hbox:</span><br><span class="line">        align (<span class="number">1.0</span>,<span class="number">1.0</span>)</span><br><span class="line">        xoffset -<span class="number">50</span></span><br><span class="line">        yoffset -<span class="number">50</span></span><br><span class="line">        spacing <span class="number">20</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> main_menu:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;return_title.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;return_title_hover.png&quot;</span></span><br><span class="line">                action MainMenu()</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;end_game.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;end_game_hover.png&quot;</span></span><br><span class="line">            action Quit()</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;return_game.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;return_game_hover.png&quot;</span></span><br><span class="line">            action Return()</span><br></pre></td></tr></table></figure></p><h2 id="功能选项-1"><a href="#功能选项-1" class="headerlink" title="功能选项"></a>功能选项</h2><h3 id="语音音量"><a href="#语音音量" class="headerlink" title="语音音量"></a>语音音量</h3><p>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;主音量&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    vbox:</span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            bar:</span><br><span class="line">                value Preference(<span class="string">&quot;voice volume&quot;</span>,<span class="built_in">range</span>=<span class="number">100</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                $ voice_volume=<span class="built_in">int</span>(preferences.get_mixer(<span class="string">&quot;voice&quot;</span>)*<span class="number">100</span>)</span><br><span class="line">                text <span class="string">&quot;[voice_volume]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure></p><h3 id="单独角色音量"><a href="#单独角色音量" class="headerlink" title="单独角色音量"></a>单独角色音量</h3><p>添加如下代码</p><ol><li>定义 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">init python:</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 判断字典存不存在，不存在则创建</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(persistent, <span class="string">&#x27;_character_volume&#x27;</span>):</span><br><span class="line">        persistent._character_volume = &#123;&#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">## 判断字典的 key 存不存在，不存在创建 key 并赐值</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;bingzhi&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> persistent._character_volume:</span><br><span class="line">        persistent._character_volume[<span class="string">&#x27;bingzhi&#x27;</span>] = <span class="number">1.0</span>  </span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;yaliu&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> persistent._character_volume:</span><br><span class="line">        persistent._character_volume[<span class="string">&#x27;yaliu&#x27;</span>] = <span class="number">1.0</span>  </span><br></pre></td></tr></table></figure></li><li>设置 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;圣代桥冰织&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    vbox:</span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            bar:</span><br><span class="line">                value DictValue(<span class="built_in">dict</span>=persistent._character_volume ,key=<span class="string">&quot;bingzhi&quot;</span>, <span class="built_in">range</span>=<span class="number">1.0</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                $ bz_voice_volume = <span class="built_in">int</span>(GetCharacterVolume(<span class="string">&quot;bingzhi&quot;</span>)*<span class="number">100</span>)</span><br><span class="line">                text <span class="string">&quot;[bz_voice_volume]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="单独角色静音"><a href="#单独角色静音" class="headerlink" title="单独角色静音"></a>单独角色静音</h3><ol><li>定义<br> Ren’py中没有返回<code>voice_tag</code>相关混音器状态的函数，但默认都是启用的，使用自定义变量达到相同效果 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">default bz_mute = <span class="literal">False</span></span><br><span class="line">default yl_mute = <span class="literal">False</span></span><br><span class="line">default others_mute = <span class="literal">False</span></span><br></pre></td></tr></table></figure></li><li>设置 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">hbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    <span class="comment">## 静音</span></span><br><span class="line">    <span class="keyword">if</span> bz_mute:</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">            action [SetVoiceMute(voice_tag=<span class="string">&quot;bingzhi&quot;</span>, mute=<span class="literal">False</span>),SetVariable(<span class="string">&quot;bz_mute&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">            action [SetVoiceMute(voice_tag=<span class="string">&quot;bingzhi&quot;</span>, mute=<span class="literal">True</span>),SetVariable(<span class="string">&quot;bz_mute&quot;</span>, <span class="literal">True</span>)]</span><br><span class="line">    <span class="comment">## 正常情况下</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">            action [SetVoiceMute(voice_tag=<span class="string">&quot;bingzhi&quot;</span>, mute=<span class="literal">False</span>),SetVariable(<span class="string">&quot;bz_mute&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">            action [SetVoiceMute(voice_tag=<span class="string">&quot;bingzhi&quot;</span>, mute=<span class="literal">True</span>),SetVariable(<span class="string">&quot;bz_mute&quot;</span>, <span class="literal">True</span>)]</span><br></pre></td></tr></table></figure></li></ol><h1 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h1><p>按钮可以使用如下属性</p><ol><li>使用<code>hover_sound</code>可以在悬停时播放音效</li><li>使用<code>activate_sound</code>可以在点击时播放音效(系统语音的本质，不过是随机或是指定的)</li><li>使用<code>mouse</code>可以更改悬停在其上时鼠标光标样式</li></ol>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 系统设置界面修改(二)</title>
      <link href="/posts/ffb5ca8d.html"/>
      <url>/posts/ffb5ca8d.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文修改全部位于<code>screens.rpy</code>文件中</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li><a href="https://www.renpy.cn/forum.php?mod=viewthread&amp;tid=1067">文字显示速度预览</a></li><li><a href="https://www.bilibili.com/opus/917056160034455554">对话框透明度调整</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1pZziY7En4&cid=27089634189&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="新建界面"><a href="#新建界面" class="headerlink" title="新建界面"></a>新建界面</h1><p>先新建一个界面，添加必要部分，参考代码如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">screen message():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    </span><br><span class="line">    add <span class="string">&quot;preference_bg.png&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 子菜单</span></span><br><span class="line">    hbox:</span><br><span class="line">        pos(<span class="number">260</span>,<span class="number">40</span>)</span><br><span class="line">        spacing <span class="number">30</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;system.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;hover_system.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;hover_message.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;message&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;sound.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;sound_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;sound&#x27;</span>)</span><br><span class="line">    hbox:</span><br><span class="line">        pos(<span class="number">1260</span>,<span class="number">40</span>)</span><br><span class="line">        spacing <span class="number">30</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;dialog.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;dialog_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;dialog&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;voi.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;voi_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;voice&#x27;</span>)</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;shortcut.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;shortcut_hover.png&quot;</span></span><br><span class="line">            action ShowMenu(<span class="string">&#x27;shortcut&#x27;</span>)</span><br><span class="line">   <span class="comment">## 返回按钮</span></span><br><span class="line">    hbox:</span><br><span class="line">        align (<span class="number">1.0</span>,<span class="number">1.0</span>)</span><br><span class="line">        xoffset -<span class="number">50</span></span><br><span class="line">        yoffset -<span class="number">50</span></span><br><span class="line">        spacing <span class="number">20</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> main_menu:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;return_title.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;return_title_hover.png&quot;</span></span><br><span class="line">                action MainMenu()</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;end_game.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;end_game_hover.png&quot;</span></span><br><span class="line">            action Quit()</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle <span class="string">&quot;return_game.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;return_game_hover.png&quot;</span></span><br><span class="line">            action Return()</span><br></pre></td></tr></table></figure><h1 id="功能选项"><a href="#功能选项" class="headerlink" title="功能选项"></a>功能选项</h1><h2 id="文字显示速度"><a href="#文字显示速度" class="headerlink" title="文字显示速度"></a>文字显示速度</h2><p>由于文字显示速度只受<code>preferences.text_cps</code>影响，但我们需要至少<code>常规模式下文本显示速度</code>和<code>自动模式下文本显示速度</code>两个选项，所以采用自定义变量的方法实现</p><ol><li>自定义变量 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 常规模式下文本显示速度</span></span><br><span class="line">default normal_text_cps=<span class="number">50</span></span><br><span class="line"><span class="comment">## 自动模式下文本显示速度</span></span><br><span class="line">default afm_text_cps = <span class="number">50</span></span><br></pre></td></tr></table></figure></li><li><code>say</code>界面中添加如下代码<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 常规文本显示速度</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> _preferences.afm_enable:</span><br><span class="line">    $ preferences.text_cps = normal_text_cps</span><br><span class="line"><span class="comment">## 自动模式下文本显示速度</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    $ preferences.text_cps = afm_text_cps</span><br></pre></td></tr></table></figure></li><li>添加如下代码<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    xpos <span class="number">100</span></span><br><span class="line">    yalign <span class="number">0.5</span></span><br><span class="line">    spacing <span class="number">50</span></span><br><span class="line">    vbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">            text <span class="string">&quot;文本显示速度&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">            </span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">5</span></span><br><span class="line">            bar:</span><br><span class="line">                value VariableValue(<span class="string">&quot;normal_text_cps&quot;</span>,<span class="built_in">range</span>=<span class="number">100</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                text <span class="string">&quot;[normal_text_cps]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br><span class="line">vbox:</span><br><span class="line">    xpos <span class="number">750</span></span><br><span class="line">    yoffset -<span class="number">73</span></span><br><span class="line">    yalign <span class="number">0.5</span></span><br><span class="line">    spacing <span class="number">50</span></span><br><span class="line">    vbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">            text <span class="string">&quot;自动模式文本阅读速度&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">5</span></span><br><span class="line">            bar:</span><br><span class="line">                value VariableValue(<span class="string">&quot;afm_text_cps&quot;</span>,<span class="built_in">range</span>=<span class="number">100</span>)</span><br><span class="line">                xsize <span class="number">425</span></span><br><span class="line">                right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">                left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">                thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">                text <span class="string">&quot;[afm_text_cps]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="自动模式下等待时间"><a href="#自动模式下等待时间" class="headerlink" title="自动模式下等待时间"></a>自动模式下等待时间</h2><p>添加如下代码即可<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;自动模式速度&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">5</span></span><br><span class="line">        bar:</span><br><span class="line">            value Preference(<span class="string">&quot;auto-forward time&quot;</span>,<span class="built_in">range</span>=<span class="number">100</span>)</span><br><span class="line">            xsize <span class="number">425</span></span><br><span class="line">            right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">            left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">            thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">        frame:</span><br><span class="line">            background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">            $ auto_text_speed=<span class="built_in">int</span>(preferences.afm_time)</span><br><span class="line">            text <span class="string">&quot;[auto_text_speed]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure></p><h2 id="自动模式下是否等待语音播放完毕"><a href="#自动模式下是否等待语音播放完毕" class="headerlink" title="自动模式下是否等待语音播放完毕"></a>自动模式下是否等待语音播放完毕</h2><p>添加如下代码即可<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;自动模式下是否等待语音播放完毕&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 等待语音播放完毕</span></span><br><span class="line">        <span class="keyword">if</span> preferences.wait_voice ==<span class="literal">True</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;wait for voice&quot;</span>, <span class="string">&quot;enable&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;wait for voice&quot;</span>, <span class="string">&quot;disable&quot;</span>) </span><br><span class="line">        <span class="comment">## 不等待语音播放完毕</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;wait for voice&quot;</span>, <span class="string">&quot;enable&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;wait for voice&quot;</span>, <span class="string">&quot;disable&quot;</span>) </span><br></pre></td></tr></table></figure></p><h2 id="对话框透明度"><a href="#对话框透明度" class="headerlink" title="对话框透明度"></a>对话框透明度</h2><ol><li><p>自定义变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 对话框不透明度</span></span><br><span class="line">default persistent.textbox_transparency = <span class="number">0.2</span></span><br></pre></td></tr></table></figure></li><li><p><code>say</code>界面中做出如下修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 文本框透明度</span></span><br><span class="line">$ textbox_alpha = <span class="number">1</span> - persistent.textbox_transparency</span><br><span class="line">window:</span><br><span class="line">    <span class="built_in">id</span> <span class="string">&quot;window&quot;</span></span><br><span class="line">    <span class="comment">## 调节对话框透明度</span></span><br><span class="line">    background Image(im.Alpha(<span class="string">&quot;gui/textbox.png&quot;</span>, textbox_alpha), xalign=<span class="number">0.5</span>, yalign=<span class="number">1.0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> who <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">        window:</span><br><span class="line">            <span class="built_in">id</span> <span class="string">&quot;namebox&quot;</span></span><br><span class="line">            <span class="comment">## 调节姓名框透明度</span></span><br><span class="line">            background Image(im.Alpha(<span class="string">&quot;gui/namebox.png&quot;</span>, textbox_alpha))</span><br><span class="line">            style <span class="string">&quot;namebox&quot;</span></span><br><span class="line">            text who <span class="built_in">id</span> <span class="string">&quot;who&quot;</span> xoffset <span class="number">60</span> yoffset -<span class="number">30</span></span><br></pre></td></tr></table></figure></li><li><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;对话框透明度&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">5</span></span><br><span class="line">        bar:</span><br><span class="line">            value FieldValue(persistent, <span class="string">&quot;textbox_transparency&quot;</span>, <span class="built_in">range</span>=<span class="number">1.0</span>, style=<span class="string">&quot;slider&quot;</span>)</span><br><span class="line">            xsize <span class="number">425</span></span><br><span class="line">            right_bar <span class="string">&quot;volume.png&quot;</span></span><br><span class="line">            left_bar <span class="string">&quot;volume_left.png&quot;</span></span><br><span class="line">            thumb <span class="string">&quot;thu.png&quot;</span></span><br><span class="line">        frame:</span><br><span class="line">            background <span class="string">&quot;volume_num.png&quot;</span></span><br><span class="line">            $ textbox_alpha=<span class="built_in">int</span>(persistent.textbox_transparency*<span class="number">100</span>)</span><br><span class="line">            text <span class="string">&quot;[textbox_alpha]&quot;</span> xoffset <span class="number">10</span> yoffset -<span class="number">8</span></span><br></pre></td></tr></table></figure></li></ol><div class="note info modern"><p><code>preference</code>为声明为持久化变量的标识，在设置界面中，请尽量使用持久化数据</p></div><h2 id="文字阴影"><a href="#文字阴影" class="headerlink" title="文字阴影"></a>文字阴影</h2><ol><li><p>自定义变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 文字阴影</span></span><br><span class="line">default text_shadow = <span class="literal">True</span></span><br></pre></td></tr></table></figure></li><li><p><code>say</code>界面中做出如下修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 已读文本变色</span></span><br><span class="line"><span class="keyword">if</span> text_color_changeable == <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 有文字阴影</span></span><br><span class="line">    <span class="keyword">if</span> text_shadow == <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">        <span class="comment">## 已被查看(不包括当前文本)</span></span><br><span class="line">        <span class="keyword">if</span> renpy.is_seen(ever = <span class="literal">True</span>):</span><br><span class="line">            text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color  <span class="string">&quot;#FFFF00&quot;</span> outlines [(<span class="number">4</span>,<span class="string">&quot;#000000&quot;</span>,<span class="number">0</span>,<span class="number">0</span>)]</span><br><span class="line">        <span class="comment">## 未被查看</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color <span class="string">&quot;#fff&quot;</span> outlines [(<span class="number">4</span>,<span class="string">&quot;#000000&quot;</span>,<span class="number">0</span>,<span class="number">0</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 无文字阴影</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment">## 已被查看(不包括当前文本)</span></span><br><span class="line">        <span class="keyword">if</span> renpy.is_seen(ever = <span class="literal">True</span>):</span><br><span class="line">            text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color  <span class="string">&quot;#FFFF00&quot;</span></span><br><span class="line">        <span class="comment">## 未被查看</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color <span class="string">&quot;#fff&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 不允许已读文本变色</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment">## 有文字阴影</span></span><br><span class="line">    <span class="keyword">if</span> text_shadow == <span class="literal">True</span>:</span><br><span class="line">        text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color <span class="string">&quot;#fff&quot;</span> outlines [(<span class="number">4</span>,<span class="string">&quot;#000000&quot;</span>,<span class="number">0</span>,<span class="number">0</span>)]</span><br><span class="line">    <span class="comment">## 无文字阴影</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color <span class="string">&quot;#fff&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;文本阴影&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 有文本阴影</span></span><br><span class="line">        <span class="keyword">if</span> text_shadow==<span class="literal">True</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_shadow&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_shadow&quot;</span>, <span class="literal">False</span>)</span><br><span class="line">        <span class="comment">## 无文本阴影</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_shadow&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_shadow&quot;</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="快进设置"><a href="#快进设置" class="headerlink" title="快进设置"></a>快进设置</h2><p>添加如下代码即可<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;快进未读文本&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 仅已读文本</span></span><br><span class="line">        <span class="keyword">if</span> preferences.skip_unseen == <span class="literal">False</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;only_read.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;skip&quot;</span>, <span class="string">&quot;seen&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;all_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;all.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;skip&quot;</span>, <span class="string">&quot;all&quot;</span>)</span><br><span class="line">        <span class="comment">## 全部</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;only_read_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;only_read.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;skip&quot;</span>, <span class="string">&quot;seen&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;all.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;skip&quot;</span>, <span class="string">&quot;all&quot;</span>)</span><br></pre></td></tr></table></figure></p><h2 id="语音中断"><a href="#语音中断" class="headerlink" title="语音中断"></a>语音中断</h2><p>添加如下代码即可<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;语音中断&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 语音中断</span></span><br><span class="line">        <span class="keyword">if</span> preferences.voice_sustain ==<span class="literal">False</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;voice sustain&quot;</span>, <span class="string">&quot;disable&quot;</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;voice sustain&quot;</span>, <span class="string">&quot;enable&quot;</span>)</span><br><span class="line">        <span class="comment">## 不中断</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;voice sustain&quot;</span>, <span class="string">&quot;disable&quot;</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;voice sustain&quot;</span>, <span class="string">&quot;enable&quot;</span>)</span><br></pre></td></tr></table></figure></p><h2 id="文本显示速度预览"><a href="#文本显示速度预览" class="headerlink" title="文本显示速度预览"></a>文本显示速度预览</h2><ol><li><p>新建界面</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">screen textbox_preview():</span><br><span class="line">    tag preview</span><br><span class="line">    frame:</span><br><span class="line">        pos (<span class="number">750</span>,<span class="number">750</span>)</span><br><span class="line">        background <span class="literal">None</span></span><br><span class="line">        <span class="comment">## 默认模式</span></span><br><span class="line">        <span class="keyword">if</span> text_normal:</span><br><span class="line">            <span class="keyword">if</span> text_shadow:</span><br><span class="line">                text <span class="string">&quot;文本展示速度\n这是文本播放时的速度&quot;</span>:</span><br><span class="line">                    xoffset <span class="number">20</span></span><br><span class="line">                    yoffset <span class="number">10</span></span><br><span class="line">                    color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">                    outlines [(<span class="number">2</span>, <span class="string">&quot;#000&quot;</span>,<span class="number">0</span>, <span class="number">0</span>)] </span><br><span class="line">                    slow_cps normal_text_cps</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                text <span class="string">&quot;文本展示速度\n这是文本播放时的速度&quot;</span>:</span><br><span class="line">                    xoffset <span class="number">20</span></span><br><span class="line">                    yoffset <span class="number">10</span></span><br><span class="line">                    color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">                    slow_cps normal_text_cps</span><br><span class="line">        <span class="comment">## 自动模式</span></span><br><span class="line">        <span class="keyword">elif</span> text_auto:</span><br><span class="line">            <span class="keyword">if</span> text_shadow:</span><br><span class="line">                text <span class="string">&quot;自动模式速度\n这是自动模式下的速度&quot;</span>:</span><br><span class="line">                    xoffset <span class="number">20</span></span><br><span class="line">                    yoffset <span class="number">10</span></span><br><span class="line">                    color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">                    outlines [(<span class="number">2</span>, <span class="string">&quot;#000&quot;</span>,<span class="number">0</span>, <span class="number">0</span>)] </span><br><span class="line">                    slow_cps afm_text_cps</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                text <span class="string">&quot;自动模式速度\n这是自动模式下的速度&quot;</span>:</span><br><span class="line">                    xoffset <span class="number">20</span></span><br><span class="line">                    yoffset <span class="number">10</span></span><br><span class="line">                    color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">                    slow_cps afm_text_cps</span><br><span class="line">        <span class="comment">## 不显示</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            text <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>轮换时间</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 轮换时间</span></span><br><span class="line">define textbox_preview_repeat_time = <span class="number">3.0</span></span><br><span class="line">default countdown_time = <span class="number">0.0</span></span><br></pre></td></tr></table></figure></li><li><p>启用设置</p><ol><li><p><code>message</code>界面中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">default display_preview = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> display_preview:</span><br><span class="line"></span><br><span class="line">        timer <span class="number">0.2</span>:</span><br><span class="line">            action Show(<span class="string">&quot;textbox_preview&quot;</span>)</span><br><span class="line"></span><br><span class="line">    timer <span class="number">2.0</span>:</span><br><span class="line">        repeat <span class="literal">True</span></span><br><span class="line">        action [Hide(<span class="string">&#x27;textbox_preview&#x27;</span>),SetVariable(<span class="string">&quot;countdown_time&quot;</span>,textbox_preview_repeat_time+<span class="number">1.0</span>),Show(<span class="string">&quot;textbox_preview&quot;</span>)]</span><br><span class="line"></span><br><span class="line">$ box_alpha = <span class="number">1</span> - persistent.textbox_transparency</span><br><span class="line">frame:</span><br><span class="line">    xpos <span class="number">750</span></span><br><span class="line">    ypos <span class="number">750</span></span><br><span class="line">    background Image(im.Alpha(<span class="string">&quot;text_bg.png&quot;</span>, box_alpha), xalign=<span class="number">0.5</span>, yalign=<span class="number">1.0</span>)</span><br></pre></td></tr></table></figure></li><li><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;文字显示速度预览&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 默认模式</span></span><br><span class="line">        <span class="keyword">if</span> text_normal:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;normal.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;auto_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;auto.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;none_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;none.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>,<span class="literal">True</span> )]</span><br><span class="line">        <span class="comment">## 自动模式</span></span><br><span class="line">        <span class="keyword">elif</span> text_auto:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;normal_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;normal.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;auto.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;none_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;none.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>,<span class="literal">True</span> )]</span><br><span class="line">        <span class="comment">## 不显示</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;normal_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;normal.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;auto_hover.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;auto.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;none.png&quot;</span></span><br><span class="line">                action [SetVariable(<span class="string">&quot;text_normal&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_auto&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;text_none&quot;</span>,<span class="literal">True</span> )]</span><br></pre></td></tr></table></figure></li></ol></li><li><p>日志&amp;<code>bug</code>排查</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 文字显示速度预览</span></span><br><span class="line"><span class="comment">## 代码来源 https://www.renpy.cn/forum.php?mod=viewthread&amp;tid=1067</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 问题 存在 bug 前往其他界面时文字会卡到其他界面</span></span><br><span class="line"><span class="comment">## 产生bug的原因 timer 语句不间断的 hide 与 show 行为</span></span><br><span class="line"><span class="comment">## 解决方法 前往其他界面的 action 行为中添加 Hide(&quot;textbox_preview&quot;)</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 2024.11.15</span></span><br><span class="line"><span class="comment">## 问题 添加背景后，文字显示于背景下方</span></span><br><span class="line"><span class="comment">## 解决方法 将 use textbox_preview 删去，第一个 timer 语句改为0.2s后显示 textbox_preview</span></span><br><span class="line"><span class="comment">## 最终效果还算理想</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 系统设置界面修改(一)</title>
      <link href="/posts/508451ef.html"/>
      <url>/posts/508451ef.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文修改全部位于<code>screens.rpy</code>文件中</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li><a href="https://doc.renpy.cn/zh-CN/preferences.html">环境变量</a></li><li><a href="https://doc.renpy.cn/zh-CN/screen_actions.html#Preference">Preference行为</a></li></ol><p><strong>特别感谢renpy官方交流群群友倾情相助</strong></p><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1EkUmY8Ey3&cid=26870417035&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h1><p>打开<code>screens.rpy</code>文件，你可以在708行看到如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 设置屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 设置屏幕允许用户配置游戏，使其更适合自己。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://doc.renpy.cn/zh-CN/screen_special.html#preferences</span></span><br><span class="line"></span><br><span class="line">screen preferences():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    use game_menu(_(<span class="string">&quot;设置&quot;</span>), scroll=<span class="string">&quot;viewport&quot;</span>):</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line"></span><br><span class="line">            hbox:</span><br><span class="line">                box_wrap <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> renpy.variant(<span class="string">&quot;pc&quot;</span>) <span class="keyword">or</span> renpy.variant(<span class="string">&quot;web&quot;</span>):</span><br><span class="line"></span><br><span class="line">                    vbox:</span><br><span class="line">                        style_prefix <span class="string">&quot;radio&quot;</span></span><br><span class="line">                        label _(<span class="string">&quot;显示&quot;</span>)</span><br><span class="line">                        textbutton _(<span class="string">&quot;窗口&quot;</span>) action Preference(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;window&quot;</span>)</span><br><span class="line">                        textbutton _(<span class="string">&quot;全屏&quot;</span>) action Preference(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;fullscreen&quot;</span>)</span><br><span class="line"></span><br><span class="line">                vbox:</span><br><span class="line">                    style_prefix <span class="string">&quot;check&quot;</span></span><br><span class="line">                    label _(<span class="string">&quot;快进&quot;</span>)</span><br><span class="line">                    textbutton _(<span class="string">&quot;未读文本&quot;</span>) action Preference(<span class="string">&quot;skip&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                    textbutton _(<span class="string">&quot;选项后继续&quot;</span>) action Preference(<span class="string">&quot;after choices&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                    textbutton _(<span class="string">&quot;忽略转场&quot;</span>) action InvertSelected(Preference(<span class="string">&quot;transitions&quot;</span>, <span class="string">&quot;toggle&quot;</span>))</span><br><span class="line"></span><br><span class="line">                <span class="comment">## 可在此处添加 radio_pref 或 check_pref 类型的额外 vbox，以添加</span></span><br><span class="line">                <span class="comment">## 额外的创建者定义的偏好设置。</span></span><br><span class="line"></span><br><span class="line">            null height (<span class="number">4</span> * gui.pref_spacing)</span><br><span class="line"></span><br><span class="line">            hbox:</span><br><span class="line">                style_prefix <span class="string">&quot;slider&quot;</span></span><br><span class="line">                box_wrap <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                vbox:</span><br><span class="line"></span><br><span class="line">                    label _(<span class="string">&quot;文字速度&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    bar value Preference(<span class="string">&quot;text speed&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    label _(<span class="string">&quot;自动前进时间&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    bar value Preference(<span class="string">&quot;auto-forward time&quot;</span>)</span><br><span class="line"></span><br><span class="line">                vbox:</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> config.has_music:</span><br><span class="line">                        label _(<span class="string">&quot;音乐音量&quot;</span>)</span><br><span class="line"></span><br><span class="line">                        hbox:</span><br><span class="line">                            bar value Preference(<span class="string">&quot;music volume&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> config.has_sound:</span><br><span class="line"></span><br><span class="line">                        label _(<span class="string">&quot;音效音量&quot;</span>)</span><br><span class="line"></span><br><span class="line">                        hbox:</span><br><span class="line">                            bar value Preference(<span class="string">&quot;sound volume&quot;</span>)</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> config.sample_sound:</span><br><span class="line">                                textbutton _(<span class="string">&quot;测试&quot;</span>) action Play(<span class="string">&quot;sound&quot;</span>, config.sample_sound)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> config.has_voice:</span><br><span class="line">                        label _(<span class="string">&quot;语音音量&quot;</span>)</span><br><span class="line"></span><br><span class="line">                        hbox:</span><br><span class="line">                            bar value Preference(<span class="string">&quot;voice volume&quot;</span>)</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> config.sample_voice:</span><br><span class="line">                                textbutton _(<span class="string">&quot;测试&quot;</span>) action Play(<span class="string">&quot;voice&quot;</span>, config.sample_voice)</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> config.has_music <span class="keyword">or</span> config.has_sound <span class="keyword">or</span> config.has_voice:</span><br><span class="line">                        null height gui.pref_spacing</span><br><span class="line"></span><br><span class="line">                        textbutton _(<span class="string">&quot;全部静音&quot;</span>):</span><br><span class="line">                            action Preference(<span class="string">&quot;all mute&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                            style <span class="string">&quot;mute_all_button&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style pref_label <span class="keyword">is</span> gui_label</span><br><span class="line">style pref_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line">style pref_vbox <span class="keyword">is</span> vbox</span><br><span class="line"></span><br><span class="line">style radio_label <span class="keyword">is</span> pref_label</span><br><span class="line">style radio_label_text <span class="keyword">is</span> pref_label_text</span><br><span class="line">style radio_button <span class="keyword">is</span> gui_button</span><br><span class="line">style radio_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line">style radio_vbox <span class="keyword">is</span> pref_vbox</span><br><span class="line"></span><br><span class="line">style check_label <span class="keyword">is</span> pref_label</span><br><span class="line">style check_label_text <span class="keyword">is</span> pref_label_text</span><br><span class="line">style check_button <span class="keyword">is</span> gui_button</span><br><span class="line">style check_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line">style check_vbox <span class="keyword">is</span> pref_vbox</span><br><span class="line"></span><br><span class="line">style slider_label <span class="keyword">is</span> pref_label</span><br><span class="line">style slider_label_text <span class="keyword">is</span> pref_label_text</span><br><span class="line">style slider_slider <span class="keyword">is</span> gui_slider</span><br><span class="line">style slider_button <span class="keyword">is</span> gui_button</span><br><span class="line">style slider_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line">style slider_pref_vbox <span class="keyword">is</span> pref_vbox</span><br><span class="line"></span><br><span class="line">style mute_all_button <span class="keyword">is</span> check_button</span><br><span class="line">style mute_all_button_text <span class="keyword">is</span> check_button_text</span><br><span class="line"></span><br><span class="line">style pref_label:</span><br><span class="line">    top_margin gui.pref_spacing</span><br><span class="line">    bottom_margin <span class="number">3</span></span><br><span class="line"></span><br><span class="line">style pref_label_text:</span><br><span class="line">    yalign <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">style pref_vbox:</span><br><span class="line">    xsize <span class="number">338</span></span><br><span class="line"></span><br><span class="line">style radio_vbox:</span><br><span class="line">    spacing gui.pref_button_spacing</span><br><span class="line"></span><br><span class="line">style radio_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;radio_button&quot;</span>)</span><br><span class="line">    foreground <span class="string">&quot;gui/button/radio_[prefix_]foreground.png&quot;</span></span><br><span class="line"></span><br><span class="line">style radio_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;radio_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style check_vbox:</span><br><span class="line">    spacing gui.pref_button_spacing</span><br><span class="line"></span><br><span class="line">style check_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;check_button&quot;</span>)</span><br><span class="line">    foreground <span class="string">&quot;gui/button/check_[prefix_]foreground.png&quot;</span></span><br><span class="line"></span><br><span class="line">style check_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;check_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slider_slider:</span><br><span class="line">    xsize <span class="number">525</span></span><br><span class="line"></span><br><span class="line">style slider_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;slider_button&quot;</span>)</span><br><span class="line">    yalign <span class="number">0.5</span></span><br><span class="line">    left_margin <span class="number">15</span></span><br><span class="line"></span><br><span class="line">style slider_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;slider_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slider_vbox:</span><br><span class="line">    xsize <span class="number">675</span></span><br></pre></td></tr></table></figure><h1 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h1><p>我们先确定系统设置界面的功能，这里我分为六部分</p><p>由于<code>imagebutton</code>使用效果不佳，同时为给用户提示当前设置，我们使用<code>if</code>语句对当前环境变量进行判断，不过有些未给出的变量需要我们自定义</p><h2 id="全屏窗口切换"><a href="#全屏窗口切换" class="headerlink" title="全屏窗口切换"></a>全屏窗口切换</h2><p>修改为如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;屏幕尺寸&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span></span><br><span class="line">        <span class="comment">## 窗口状态下</span></span><br><span class="line">        <span class="keyword">if</span> preferences.fullscreen == <span class="literal">False</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;fullscreen.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;hover_fullscreen.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;fullscreen&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_window.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;window&quot;</span>)</span><br><span class="line">        <span class="comment">## 全屏状态下</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_fullscreen.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;fullscreen&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;window.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;hover_window.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;window&quot;</span>)</span><br></pre></td></tr></table></figure></p><h2 id="是否显示转场"><a href="#是否显示转场" class="headerlink" title="是否显示转场"></a>是否显示转场</h2><p>修改为如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;转场效果&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 显示所有转场</span></span><br><span class="line">        <span class="keyword">if</span> preferences.transitions == <span class="number">2</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;transitions&quot;</span>, <span class="string">&quot;all&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;transitions&quot;</span>, <span class="string">&quot;none&quot;</span>)</span><br><span class="line">        <span class="comment">## 忽略所有转场</span></span><br><span class="line">        <span class="keyword">if</span> preferences.transitions == <span class="number">0</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;transitions&quot;</span>, <span class="string">&quot;all&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;transitions&quot;</span>, <span class="string">&quot;none&quot;</span>)</span><br></pre></td></tr></table></figure></p><div class="note info modern"><p>忽略转场实际上忽略的是<code>with</code>从句的效果</p></div><h2 id="鼠标自动移动"><a href="#鼠标自动移动" class="headerlink" title="鼠标自动移动"></a>鼠标自动移动</h2><p>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;鼠标自动移动&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 允许鼠标自动移动</span></span><br><span class="line">        <span class="keyword">if</span> preferences.mouse_move == <span class="literal">True</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;automatic move&quot;</span>, <span class="string">&quot;enable&quot;</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;automatic move&quot;</span>, <span class="string">&quot;disable&quot;</span>)</span><br><span class="line">        <span class="comment">## 禁止鼠标自动移动</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;automatic move&quot;</span>, <span class="string">&quot;enable&quot;</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;automatic move&quot;</span>, <span class="string">&quot;disable&quot;</span>)</span><br></pre></td></tr></table></figure><br>来到<code>screens.rpy</code>文件第1121行，你会看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 确认屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 当 Ren&#x27;Py 需要询问用户有关确定或取消的问题时，会调用确认屏幕。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://doc.renpy.cn/zh-CN/screen_special.html#confirm</span></span><br><span class="line"></span><br><span class="line">screen confirm(message, yes_action, no_action):</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 显示此屏幕时，确保其他屏幕无法输入。</span></span><br><span class="line">    modal <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    zorder <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    style_prefix <span class="string">&quot;confirm&quot;</span></span><br><span class="line"></span><br><span class="line">    add <span class="string">&quot;gui/overlay/confirm.png&quot;</span></span><br><span class="line"></span><br><span class="line">    frame:</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            xalign <span class="number">.5</span></span><br><span class="line">            yalign <span class="number">.5</span></span><br><span class="line">            spacing <span class="number">45</span></span><br><span class="line"></span><br><span class="line">            label _(message):</span><br><span class="line">                style <span class="string">&quot;confirm_prompt&quot;</span></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">            hbox:</span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                spacing <span class="number">150</span></span><br><span class="line"></span><br><span class="line">                textbutton _(<span class="string">&quot;确定&quot;</span>) action yes_action</span><br><span class="line">                textbutton _(<span class="string">&quot;取消&quot;</span>) action no_action</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 右键点击退出并答复 no（取消）。</span></span><br><span class="line">    key <span class="string">&quot;game_menu&quot;</span> action no_action</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style confirm_frame <span class="keyword">is</span> gui_frame</span><br><span class="line">style confirm_prompt <span class="keyword">is</span> gui_prompt</span><br><span class="line">style confirm_prompt_text <span class="keyword">is</span> gui_prompt_text</span><br><span class="line">style confirm_button <span class="keyword">is</span> gui_medium_button</span><br><span class="line">style confirm_button_text <span class="keyword">is</span> gui_medium_button_text</span><br><span class="line"></span><br><span class="line">style confirm_frame:</span><br><span class="line">    background Frame([ <span class="string">&quot;gui/confirm_frame.png&quot;</span>, <span class="string">&quot;gui/frame.png&quot;</span>], gui.confirm_frame_borders, tile=gui.frame_tile)</span><br><span class="line">    padding gui.confirm_frame_borders.padding</span><br><span class="line">    xalign <span class="number">.5</span></span><br><span class="line">    yalign <span class="number">.5</span></span><br><span class="line"></span><br><span class="line">style confirm_prompt_text:</span><br><span class="line">    textalign <span class="number">0.5</span></span><br><span class="line">    layout <span class="string">&quot;subtitle&quot;</span></span><br><span class="line"></span><br><span class="line">style confirm_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;confirm_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style confirm_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;confirm_button&quot;</span>)</span><br></pre></td></tr></table></figure><br>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on <span class="string">&quot;show&quot;</span> action MouseMove(<span class="number">850</span>,<span class="number">570</span>)</span><br></pre></td></tr></table></figure></p><div class="note info modern"><p>这里添加的是没有自定义的参数，可以等自定义确认界面后再做修改</p></div><h2 id="已读文本变色"><a href="#已读文本变色" class="headerlink" title="已读文本变色"></a>已读文本变色</h2><p>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;已读文本变色&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 允许已读文本变色</span></span><br><span class="line">        <span class="keyword">if</span> text_color_changeable==<span class="literal">True</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_color_changeable&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_color_changeable&quot;</span>, <span class="literal">False</span>)</span><br><span class="line">        <span class="comment">## 禁止已读文本变色</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_color_changeable&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;text_color_changeable&quot;</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure></p><p>自定义变量<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 已读文本变色</span></span><br><span class="line">default text_color_changeable=<span class="literal">True</span></span><br></pre></td></tr></table></figure></p><p><code>say</code>界面修改为如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 已读文本变色</span></span><br><span class="line"><span class="keyword">if</span> text_color_changeable==<span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 已被查看(不包括当前文本)</span></span><br><span class="line">    <span class="keyword">if</span> renpy.is_seen(ever = <span class="literal">True</span>):</span><br><span class="line">        text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color  <span class="string">&quot;#FFFF00&quot;</span></span><br><span class="line">    <span class="comment">## 未被查看</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color <span class="string">&quot;#fff&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 不允许已读文本变色</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span> color <span class="string">&quot;#fff&quot;</span></span><br></pre></td></tr></table></figure></p><h2 id="已选选项变色"><a href="#已选选项变色" class="headerlink" title="已选选项变色"></a>已选选项变色</h2><p>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;已选选项变色&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 允许已选选项变色</span></span><br><span class="line">        <span class="keyword">if</span> choice_color_changeable==<span class="literal">True</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;choice_color_changeable&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;choice_color_changeable&quot;</span>, <span class="literal">False</span>)</span><br><span class="line">        <span class="comment">## 禁止已选选项变色</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;choice_color_changeable&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;choice_color_changeable&quot;</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure></p><p>自定义变量<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 已选选项变色</span></span><br><span class="line">default choice_color_changeable=<span class="literal">True</span></span><br></pre></td></tr></table></figure></p><p>来到<code>screens.rpy</code>文件第195行，你会看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 选择屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 此屏幕用于显示由 menu 语句生成的游戏内选项。参数 items 是一个对象列表，每个对</span></span><br><span class="line"><span class="comment">## 象都有字幕和动作字段。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://doc.renpy.cn/zh-CN/screen_special.html#choice</span></span><br><span class="line"></span><br><span class="line">screen choice(items):</span><br><span class="line">    style_prefix <span class="string">&quot;choice&quot;</span></span><br><span class="line"></span><br><span class="line">    vbox:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> items:</span><br><span class="line">            textbutton i.caption action i.action</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style choice_vbox <span class="keyword">is</span> vbox</span><br><span class="line">style choice_button <span class="keyword">is</span> button</span><br><span class="line">style choice_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style choice_vbox:</span><br><span class="line">    xalign <span class="number">0.5</span></span><br><span class="line">    ypos <span class="number">405</span></span><br><span class="line">    yanchor <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">    spacing gui.choice_spacing</span><br><span class="line"></span><br><span class="line">style choice_button <span class="keyword">is</span> default:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;choice_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style choice_button_text <span class="keyword">is</span> default:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;choice_button&quot;</span>)</span><br></pre></td></tr></table></figure><br>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> items:</span><br><span class="line">        <span class="comment">## 允许已选选项变色</span></span><br><span class="line">        <span class="keyword">if</span> choice_color_changeable==<span class="literal">True</span>:</span><br><span class="line">            <span class="comment">## 已选选项</span></span><br><span class="line">            <span class="keyword">if</span> i.chosen:</span><br><span class="line">                textbutton i.caption:</span><br><span class="line">                    text_color <span class="string">&quot;#FFFF00&quot;</span></span><br><span class="line">                    action i.action</span><br><span class="line">            <span class="comment">## 未选选项</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton i.caption:</span><br><span class="line">                    text_color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">                    action i.action</span><br><span class="line">        <span class="comment">## 禁止已选选项变色</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton i.caption:</span><br><span class="line">                text_color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">                action i.action</span><br></pre></td></tr></table></figure></p><h2 id="侧边栏存档读档"><a href="#侧边栏存档读档" class="headerlink" title="侧边栏存档读档"></a>侧边栏存档读档</h2><p>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">vbox:</span><br><span class="line">    spacing <span class="number">10</span></span><br><span class="line">    xpos <span class="number">750</span></span><br><span class="line">    ypos <span class="number">207</span></span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">10</span></span><br><span class="line">        add <span class="string">&quot;label.png&quot;</span></span><br><span class="line">        text <span class="string">&quot;侧边存档读档栏显示&quot;</span> color <span class="string">&quot;#4e021f&quot;</span> </span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span> </span><br><span class="line">        <span class="comment">## 允许侧边栏存档读档显示</span></span><br><span class="line">        <span class="keyword">if</span> side_save_load==<span class="literal">True</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;side_save_load&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_off.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;side_save_load&quot;</span>, <span class="literal">False</span>)</span><br><span class="line">        <span class="comment">## 禁止侧边栏存档读档显示</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;hover_on.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;on.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;side_save_load&quot;</span>, <span class="literal">True</span>) </span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;off.png&quot;</span></span><br><span class="line">                action SetVariable(<span class="string">&quot;side_save_load&quot;</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure><br>自定义变量<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 侧边栏存档读档</span></span><br><span class="line">default side_save =<span class="literal">True</span></span><br><span class="line">default side_load =<span class="literal">False</span></span><br><span class="line">default side_save_load=<span class="literal">True</span></span><br></pre></td></tr></table></figure></p><p>新建界面<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 鼠标位于侧边栏显示侧边栏存档</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;mini_save_show_area&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 鼠标位置判定</span></span><br><span class="line">screen mini_save_show_area():</span><br><span class="line">    zorder <span class="number">250</span></span><br><span class="line"></span><br><span class="line">    mousearea:</span><br><span class="line">        area (<span class="number">1820</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">1080</span>)</span><br><span class="line">        hovered Show(<span class="string">&quot;mini_save_load&quot;</span>)</span><br><span class="line">        unhovered Hide(<span class="string">&quot;mini_save_load&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 侧边栏存档读档</span></span><br><span class="line">screen mini_save_load():</span><br><span class="line">    </span><br><span class="line">    zorder <span class="number">200</span></span><br><span class="line">    <span class="keyword">if</span> side_save_load==<span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> side_save ==<span class="literal">True</span>:</span><br><span class="line">            vbox:</span><br><span class="line">                xalign <span class="number">1.0</span></span><br><span class="line">                xoffset <span class="number">420</span></span><br><span class="line">                <span class="comment">## 切换存档读档</span></span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;load.png&quot;</span></span><br><span class="line">                    xoffset -<span class="number">50</span></span><br><span class="line">                    hover <span class="string">&quot;load_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;side_load&quot;</span>, <span class="literal">True</span>),SetVariable(<span class="string">&quot;side_save&quot;</span>, <span class="literal">False</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;up.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;up_hover.png&quot;</span></span><br><span class="line">                    action FilePagePrevious(<span class="built_in">max</span>=<span class="number">9</span>,wrap=<span class="literal">True</span>,auto=<span class="literal">False</span>,quick=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 存档槽总数</span></span><br><span class="line">                grid <span class="number">1</span> gui.file_slot_cols*gui.file_slot_rows*<span class="number">9</span>:</span><br><span class="line">                    style_prefix <span class="string">&quot;slot&quot;</span></span><br><span class="line">                    spacing -<span class="number">150</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line">                        $ slot = i + <span class="number">1</span></span><br><span class="line">                        </span><br><span class="line">                        button:</span><br><span class="line">                            </span><br><span class="line">                            action FileSave(slot)</span><br><span class="line">                            <span class="comment">#存档按钮背景图</span></span><br><span class="line">                            background <span class="string">&quot;mini_bg.png&quot;</span> </span><br><span class="line">                            <span class="comment">#存档按钮悬停图</span></span><br><span class="line">                            hover_background <span class="string">&quot;mini_bg_hover.png&quot;</span> </span><br><span class="line">                            <span class="comment">#存档编号</span></span><br><span class="line">                            text FileSlotName(slot, gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line">                                size <span class="number">30</span></span><br><span class="line">                            tooltip [FileSaveName(slot)]</span><br><span class="line">                            hovered [SetVariable(<span class="string">&quot;ToolTipSlot&quot;</span>, <span class="built_in">int</span>(FileSlotName(slot, gui.file_slot_cols * gui.file_slot_rows)))]</span><br><span class="line">                            unhovered [SetVariable(<span class="string">&quot;ToolTipSlot&quot;</span>, <span class="literal">None</span>)]</span><br><span class="line"></span><br><span class="line">            imagebutton:</span><br><span class="line">                align (<span class="number">1.0</span>,<span class="number">0.8</span>)</span><br><span class="line">                yoffset -<span class="number">15</span></span><br><span class="line">                xoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;down.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;down_hover.png&quot;</span></span><br><span class="line">                action FilePageNext(<span class="built_in">max</span>=<span class="number">9</span>,wrap=<span class="literal">True</span>,auto=<span class="literal">False</span>,quick=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> side_load ==<span class="literal">True</span>:</span><br><span class="line">            vbox:</span><br><span class="line">                xalign <span class="number">1.0</span></span><br><span class="line">                xoffset <span class="number">420</span></span><br><span class="line">                imagebutton:</span><br><span class="line">                    xoffset -<span class="number">50</span></span><br><span class="line">                    idle <span class="string">&quot;save.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;save_hover.png&quot;</span></span><br><span class="line">                    action [SetVariable(<span class="string">&quot;side_load&quot;</span>, <span class="literal">False</span>),SetVariable(<span class="string">&quot;side_save&quot;</span>, <span class="literal">True</span>)]</span><br><span class="line">                imagebutton:</span><br><span class="line">                    idle <span class="string">&quot;up.png&quot;</span></span><br><span class="line">                    hover <span class="string">&quot;up_hover.png&quot;</span></span><br><span class="line">                    action FilePagePrevious(<span class="built_in">max</span>=<span class="number">9</span>,wrap=<span class="literal">True</span>,auto=<span class="literal">False</span>,quick=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 存档槽总数</span></span><br><span class="line">                grid <span class="number">1</span> gui.file_slot_cols*gui.file_slot_rows*<span class="number">9</span>:</span><br><span class="line">                    style_prefix <span class="string">&quot;slot&quot;</span></span><br><span class="line">                    spacing -<span class="number">150</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line">                        $ slot = i + <span class="number">1</span></span><br><span class="line">                        </span><br><span class="line">                        button:</span><br><span class="line">                            </span><br><span class="line">                            action FileLoad(slot)</span><br><span class="line">                            <span class="comment">#存档按钮背景图</span></span><br><span class="line">                            background <span class="string">&quot;mini_bg.png&quot;</span> </span><br><span class="line">                            <span class="comment">#存档按钮悬停图</span></span><br><span class="line">                            hover_background <span class="string">&quot;mini_bg_hover.png&quot;</span> </span><br><span class="line">                            <span class="comment">#存档编号</span></span><br><span class="line">                            text FileSlotName(slot, gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line">                                size <span class="number">30</span></span><br><span class="line">                            tooltip [FileSaveName(slot)]</span><br><span class="line">                            hovered [SetVariable(<span class="string">&quot;ToolTipSlot&quot;</span>, <span class="built_in">int</span>(FileSlotName(slot, gui.file_slot_cols * gui.file_slot_rows)))]</span><br><span class="line">                            unhovered [SetVariable(<span class="string">&quot;ToolTipSlot&quot;</span>, <span class="literal">None</span>)]</span><br><span class="line"></span><br><span class="line">            imagebutton:</span><br><span class="line">                align (<span class="number">1.0</span>,<span class="number">0.8</span>)</span><br><span class="line">                yoffset -<span class="number">15</span></span><br><span class="line">                xoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;down.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;down_hover.png&quot;</span></span><br><span class="line">                action FilePageNext(<span class="built_in">max</span>=<span class="number">9</span>,wrap=<span class="literal">True</span>,auto=<span class="literal">False</span>,quick=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    $ tooltip = GetTooltip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> tooltip:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line">            $ slot = i + <span class="number">1</span></span><br><span class="line">            frame:</span><br><span class="line">                xpos <span class="number">1300</span></span><br><span class="line">                background <span class="string">&quot;gui/button/slot_hover_background.png&quot;</span> at tip</span><br><span class="line">                </span><br><span class="line">                add renpy.slot_screenshot(<span class="string">f&quot;<span class="subst">&#123;<span class="number">1</span> + <span class="built_in">int</span>((ToolTipSlot-<span class="number">1</span>) / <span class="number">9</span>)&#125;</span>-<span class="subst">&#123;<span class="number">1</span> + (<span class="built_in">int</span>(ToolTipSlot-<span class="number">1</span>) % <span class="number">9</span>)&#125;</span>&quot;</span>) xysize(<span class="number">231</span>,<span class="number">130</span>) xoffset <span class="number">6</span> yoffset <span class="number">72</span></span><br><span class="line">                frame:</span><br><span class="line">                    background <span class="literal">None</span></span><br><span class="line">                    xysize(<span class="number">210</span>,<span class="number">110</span>)</span><br><span class="line">                    xoffset <span class="number">240</span></span><br><span class="line">                    yoffset <span class="number">65</span></span><br><span class="line">                    text tooltip at tip size <span class="number">25</span> color <span class="string">&quot;#fff&quot;</span> outlines [(<span class="number">2</span>,<span class="string">&quot;#000000&quot;</span>,<span class="number">0</span>,<span class="number">0</span>)] </span><br></pre></td></tr></table></figure><br><div class="note warning simple"><p>这里的悬停提示可能会与底部菜单的悬停提示有所冲突，可修改为如下代码</p></div></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> tooltip <span class="keyword">and</span> side_save_load ==<span class="literal">False</span>:</span><br><span class="line">    frame:</span><br><span class="line">        background <span class="literal">None</span></span><br><span class="line">        yalign <span class="number">1.0</span></span><br><span class="line">        xoffset <span class="number">580</span></span><br><span class="line">        yoffset -<span class="number">7</span></span><br><span class="line">        text <span class="string">&quot;[tooltip]&quot;</span>:</span><br><span class="line">            size <span class="number">30</span></span><br><span class="line">            color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">            outlines [(<span class="number">2</span>,<span class="string">&quot;#35ceff&quot;</span>,<span class="number">0</span>,<span class="number">0</span>)]</span><br><span class="line">            at tip</span><br></pre></td></tr></table></figure><h1 id="必要部分"><a href="#必要部分" class="headerlink" title="必要部分"></a>必要部分</h1><p>添加返回按钮，返回标题菜单和结束游戏按钮<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">hbox:</span><br><span class="line">    align (1.0,1.0)</span><br><span class="line">    xoffset -50</span><br><span class="line">    yoffset -50</span><br><span class="line">    spacing 20</span><br><span class="line">    if not main_menu:</span><br><span class="line">        imagebutton:</span><br><span class="line">            idle &quot;return_title.png&quot;</span><br><span class="line">            hover &quot;return_title_hover.png&quot;</span><br><span class="line">            action MainMenu()</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle &quot;end_game.png&quot;</span><br><span class="line">        hover &quot;end_game_hover.png&quot;</span><br><span class="line">        action Quit()</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle &quot;return_game.png&quot;</span><br><span class="line">        hover &quot;return_game_hover.png&quot;</span><br><span class="line">        action Return()</span><br></pre></td></tr></table></figure></p><h1 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h1><p>新建一个<code>rpy</code>文件，用于存放自定义变量</p><div class="note info simple"><p>新建<code>txt</code>文本文档，直接修改文件后缀即可</p></div>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux命令行(三)</title>
      <link href="/posts/d5a6d90f.html"/>
      <url>/posts/d5a6d90f.html</url>
      
        <content type="html"><![CDATA[<h1 id="管道符、重定向与环境变量"><a href="#管道符、重定向与环境变量" class="headerlink" title="管道符、重定向与环境变量"></a>管道符、重定向与环境变量</h1><h2 id="输入输出重定向"><a href="#输入输出重定向" class="headerlink" title="输入输出重定向"></a>输入输出重定向</h2><p>输入重定向是指把文件导入到命令中，输出重定向是指把原本要输出到屏幕的数据信息写入到指定文件中<br>相比于输入重定向，输出重定向使用频率要更高，所以进一步划分为标准输出重定向和错误输出重定向，以及覆盖写和追加写两种写入方式</p><ol><li>标准输入重定向(STDIN，文件描述为0):<br>默认从键盘输入，也可以从其他文件或命令中输入</li><li>标准输出重定向(STDOUT，文件描述为1):<br>默认输出到屏幕</li><li>错误输出重定向(STDERR，文件描述为2):<br>默认输出到屏幕</li></ol><p>输入重定向中用到的符号及其作用如下表所示</p><div class="table-container"><table><thead><tr><th>符号</th><th>作用</th></tr></thead><tbody><tr><td>命令 &lt; 文件</td><td>将文件作为命令的标准输入</td></tr><tr><td>命令 &lt;&lt; 文件</td><td>从标准输入中读入，直到遇见分界符才停止</td></tr><tr><td>命令 &lt; 文件1 &gt; 文件2</td><td>将文件1作为命令的标准输入并将标准输出到文件2</td></tr></tbody></table></div><p>输出重定向中用到的符号及其作用</p><div class="table-container"><table><thead><tr><th>符号</th><th>作用</th></tr></thead><tbody><tr><td>命令 &gt; 文件</td><td>将标准输出重定向到一个文件中(清空原有文件的数据)</td></tr><tr><td>命令 2&gt; 文件</td><td>将错误输出重定向到一个文件中(清空原有文件的数据)</td></tr><tr><td>命令 &gt;&gt; 文件</td><td>将标准输出重定向到一个文件中(追加到原有内容的后面)</td></tr><tr><td>命令 2&gt;&gt; 文件</td><td>将错误输出重定向到一个文件中(追加到原有内容的后面)</td></tr><tr><td>命令 &gt;&gt; 文件2&gt;&amp;1 或 命令 &amp;&gt;&gt; 文件</td><td>将标准输出与错误输出共同写入到文件中(追加到原有内容的后面)</td></tr></tbody></table></div><blockquote><p>例：<br>通过标准重定向将<code>man bash</code>命令原本要输出到屏幕的信息写入到文件<code>readme.txt</code>中<br>man bash &gt; readme.txt</p></blockquote><h1 id="管道命令符"><a href="#管道命令符" class="headerlink" title="管道命令符"></a>管道命令符</h1><p>把前一个命令原本要输出到屏幕的信息当作后一个命令的标准输入</p><blockquote><p>例：<br>统计被限制登录的用户<br>grep /sbin/nologin /etc/passwd | wc -l</p></blockquote><div class="note info modern"><p>可使用多次管道命令符，如<code>命令A | 命令B | 命令C</code></p></div><h1 id="命令行的通配符"><a href="#命令行的通配符" class="headerlink" title="命令行的通配符"></a>命令行的通配符</h1><p>通配符就是通用匹配信息的符号，比如</p><ol><li>星号<code>*</code>代表匹配0个或多个字符</li><li>问号<code>?</code>代表匹配单个字符</li></ol><p>更多通配符如下表所示</p><div class="table-container"><table><thead><tr><th>通配符</th><th>含义</th></tr></thead><tbody><tr><td>[a-z]</td><td>单个小写字母</td></tr><tr><td>[A-Z]</td><td>单个大写字母</td></tr><tr><td>[a-Z]</td><td>单个字母</td></tr><tr><td>[0-9]</td><td>单个数字</td></tr><tr><td>[[:alpha:]]</td><td>任意字母</td></tr><tr><td>[[:upper:]]</td><td>任意大写字母</td></tr><tr><td>[[:lower:]]</td><td>任意小写字母</td></tr><tr><td>[[:digit:]]</td><td>所以数字</td></tr><tr><td>[[:alnum:]]</td><td>任意字母加数字</td></tr><tr><td>[[:punct:]]</td><td>标点符号</td></tr></tbody></table></div><h1 id="常用转义字符"><a href="#常用转义字符" class="headerlink" title="常用转义字符"></a>常用转义字符</h1><p>四个最常用转义字符</p><ol><li>反斜杠 \</li><li>单引号 ‘’</li><li>双引号 “”</li><li>反引号 ``</li></ol><blockquote><p>例：<br>衬衫的价格是九磅十五便士<br>echo “Price is \￡9.15”</p></blockquote><h1 id="重要的环境变量"><a href="#重要的环境变量" class="headerlink" title="重要的环境变量"></a>重要的环境变量</h1><p>在Linux系统中，变量名称一般都是大写的，命令都是小写的<br>Linux中最重要的环境变量如下表所示</p><div class="table-container"><table><thead><tr><th>环境变量</th><th>作用</th></tr></thead><tbody><tr><td>HOME</td><td>用户的主目录(家目录)</td></tr><tr><td>SHELL</td><td>用户在使用的Shell解释器名称</td></tr><tr><td>HISTSIZE</td><td>输出的历史命令记录条数</td></tr><tr><td>HISTFILESIZE</td><td>保存的历史命令记录条数</td></tr><tr><td>MAIL</td><td>邮件保存路径</td></tr><tr><td>LANG</td><td>系统语言、语系名称</td></tr><tr><td>RANDOM</td><td>生成一个随机数字</td></tr><tr><td>PS1</td><td>Bash解释器的提示符</td></tr><tr><td>PATH</td><td>定义解释器搜索用户执行命令的路径</td></tr><tr><td>EDITOR</td><td>用户默认的文本编辑器</td></tr></tbody></table></div><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>正则表达式，又称正规表示式、正规表示法、正规表达式、规则表达式、常规表示法（英语：Regular Expression，在代码中常简写为 regex、regexp 或 RE），计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本。</p><div class="table-container"><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td>\</td><td>将下一个字符标记为一个特殊字符、或一个原义字符<br>例如，“n”匹配字符“n”。“\n”匹配一个换行符。序列“\”匹配“\”而“(”则匹配“(”</td></tr><tr><td>^</td><td>匹配输入字符串的开始位置</td></tr><tr><td>$</td><td>匹配输入字符串的结束位置</td></tr><tr><td>{n}</td><td>n 是一个非负整数。匹配确定的 n 次<br>例如，“o{2}”不能匹配“Bob”中的“o”，但是能匹配“food”中的两个 o</td></tr><tr><td>{n,}</td><td>n 是一个非负整数。至少匹配 n 次<br>例如，“o{2,}”不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有 o。“o{1,}”等价于“o+”。“o{0,}”则等价于“o*”</td></tr><tr><td>{n,m}</td><td>m 和 n 均为非负整数，其中 n&lt;=m。最少匹配 n 次且最多匹配 m 次<br>例如，“o{1,3}”将匹配“fooooood”中的前三个 o。“o{0,1}”等价于“o?”。请注意在逗号和两个数之间不能有空格</td></tr><tr><td>*</td><td>匹配前面的子表达式零次或多次<br>例如，zo*能匹配“z”、“zo”以及“zoo”。*等价于{0,}</td></tr><tr><td>+</td><td>匹配前面的子表达式一次或多次<br>例如，“zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。+等价于{1,}</td></tr><tr><td>?</td><td>匹配前面的子表达式零次或一次<br>例如，“do(es)?”可以匹配“do”或“does”中的“do”。?等价于{0,1}</td></tr><tr><td>?</td><td>当该字符紧跟在任何一个其他限制符（*,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串<br>例如，对于字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”</td></tr><tr><td>.</td><td>匹配除“\n”之外的任何单个字符。要匹配包括“\n”在内的任何字符，请使用像“(.｜\n)”的模式</td></tr><tr><td>(pattern)</td><td>匹配 pattern 并获取这一匹配的子字符串。该子字符串用于向后引用。要匹配圆括号字符，请使用 “(”，右括号同样</td></tr><tr><td>x ｜ y</td><td>匹配 x 或 y<br>例如，“z ｜ food” 能匹配 “z” 或 “food”。“(z ｜ f)ood”则匹配“zood”或“food”</td></tr><tr><td>[xyz]</td><td>字符集合（character class）。匹配所包含的任意一个字符<br>例如，“[abc]”可以匹配“plain”中的“a”。其中特殊字符仅有反斜线\保持特殊含义，用于转义字符。其它特殊字符如星号、加号、各种括号等均作为普通字符。脱字符^如果出现在首位则表示负值字符集合；如果出现在字符串中间就仅作为普通字符。连字符 - 如果出现在字符串中间表示字符范围描述；如果出现在首位则仅作为普通字符</td></tr><tr><td>[^xyz]</td><td>排除型（negate）字符集合。匹配未列出的任意字符<br>例如，“[^abc]”可以匹配“plain”中的“plin”</td></tr><tr><td>[a-z]</td><td>字符范围。匹配指定范围内的任意字符<br>例如，“[a-z]”可以匹配“a”到“z”范围内的任意小写字母字符</td></tr><tr><td>[^a-z]</td><td>排除型的字符范围。匹配任何不在指定范围内的任意字符<br>例如，“[^a-z]”可以匹配任何不在“a”到“z”范围内的任意字符</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL语法使用(四)</title>
      <link href="/posts/b3623411.html"/>
      <url>/posts/b3623411.html</url>
      
        <content type="html"><![CDATA[<h1 id="多关系数据查询"><a href="#多关系数据查询" class="headerlink" title="多关系数据查询"></a>多关系数据查询</h1><h2 id="多关系查询结构"><a href="#多关系查询结构" class="headerlink" title="多关系查询结构"></a>多关系查询结构</h2><p>表的连接方法有以下两种</p><ol><li>表之间满足一定条件的进行连接时，<code>FROM</code>子句指明进行连接的表名，<code>WHERE</code>子句指明连接的列名及其连接条件。语法格式为<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>] [TOP N [<span class="keyword">PERCENT</span>] [<span class="keyword">WITH</span> TIES]] <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">AS</span> 别名<span class="number">1</span>] [&#123;,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">AS</span> 别名<span class="number">2</span>]&#125;]</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="number">1</span><span class="operator">&gt;</span> [[<span class="keyword">AS</span>] 表<span class="number">1</span>别名] [&#123;,<span class="operator">&lt;</span>表名<span class="number">2</span><span class="operator">&gt;</span> [[<span class="keyword">AS</span>] 表<span class="number">2</span>别名,……]&#125;]</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>检索条件<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>列名<span class="number">1</span><span class="operator">&gt;</span> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>列名<span class="number">2</span><span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]];  </span><br></pre></td></tr></table></figure></li><li>利用关键字<code>JOIN</code>进行连接，格式语法如下<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>] [TOP N [<span class="keyword">PERCENT</span>] [<span class="keyword">WITH</span> TIES]] 字段名<span class="number">1</span> [<span class="keyword">AS</span> 别名<span class="number">1</span>] [,字段名<span class="number">2</span> [<span class="keyword">AS</span> 别名<span class="number">2</span>]……]</span><br><span class="line"><span class="keyword">FROM</span> 表名<span class="number">1</span> [[<span class="keyword">AS</span>] 表<span class="number">1</span>别名] [<span class="keyword">INNER</span><span class="operator">|</span>[<span class="keyword">LEFT</span><span class="operator">|</span><span class="keyword">RIGHT</span><span class="operator">|</span><span class="keyword">FULL</span><span class="operator">|</span>[<span class="keyword">OUTER</span>]]<span class="operator">|</span><span class="keyword">CROSS</span>] <span class="keyword">JOIN</span> 表名<span class="number">2</span> [[<span class="keyword">AS</span>] 表<span class="number">2</span>别名]</span><br><span class="line"><span class="keyword">ON</span> 条件;  </span><br></pre></td></tr></table></figure>相关说明如下<blockquote><p><code>LNNER JOIN</code>成为内连接，用于显示符合条件的记录，此为默认值<br><code>LEFT[OUTER] JOIN</code>称为左连接(外连接)，用于显示符合条件的记录以及左边表中不符合条件的记录(此时右边表记录会以<code>NIULL</code>来显示)<br><code>RIGHT[OUTER] JOIN</code>称为右连接(外连接)，用于显示符合条件的记录以及右边表中不符合条件的记录(此时左边表记录会以<code>NIULL</code>来显示)<br><code>FULL[OUTER] JOIN</code>称为全连接(外连接)，用于显示符合条件的记录以及左边表和右边表中不符合条件的记录(此时缺乏的数据会以<code>NIULL</code>来显示)。目前MYSQL暂不支持全外连接，但可以通过左外连接和右外连接联合实现<br><code>CROSS JOIN</code>称为交叉连接，用于将一个表的记录和另一个表的每个记录匹配成新的记录<br>当将<code>JOIN</code>关键字放于<code>FROM</code>子句中时，应有关键词<code>ON</code>与之对应，以表名连接的条件</p></blockquote></li></ol><h2 id="内连接查询"><a href="#内连接查询" class="headerlink" title="内连接查询"></a>内连接查询</h2><p>实例讲解，现有s和sc两个表，s表中包含学生基本信息(学号(sno)，姓名(sname)，性别(sex)，年龄(age)，专业(major)……)，sc表中包含学生各科成绩(学号(sno)，姓名(sname)，数学(math)，语文(chinese)……)，现要查询学号为<code>114514</code>的学生的学号，姓名，性别，年龄，数学成绩，语文成绩</p><ol><li><p>方法一</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sno,s.sname,sex,age,math,chinese</span><br><span class="line"><span class="keyword">FROM</span> s,sc</span><br><span class="line"><span class="keyword">WHERE</span> s.sno<span class="operator">=</span>&quot;114514&quot; <span class="keyword">AND</span> s.sno<span class="operator">=</span>sc.sno</span><br></pre></td></tr></table></figure></li><li><p>方法二</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sno,s.sname,sex,age,math,chinese</span><br><span class="line"><span class="keyword">FROM</span> s <span class="keyword">INNER</span> <span class="keyword">JOIN</span> sc</span><br><span class="line"><span class="keyword">ON</span> s.sno<span class="operator">=</span>&quot;114514&quot; <span class="keyword">AND</span> s.sno<span class="operator">=</span>sc.sno;</span><br></pre></td></tr></table></figure></li></ol><div class="note info modern"><p>上述语句的学号<code>sno</code>和姓名<code>sname</code>需要加上表名作为前缀(因为两个表中都有，如果不加，学号和姓名会出现两次)，其他字段名由于只出现一次，可以不用添加前缀,<code>s.sno=sc.sno</code>则是将s表中的sno和sc表中的sno进行等值连接</p></div><h2 id="外连接查询"><a href="#外连接查询" class="headerlink" title="外连接查询"></a>外连接查询</h2><p>在内连接查询中，不满足连接条件的元组不能作为查询结果输出，而在外连接查询中，参与连接的表有主从之分，以主表的每行数据去匹配从表的数据列，符合连接条件的数据将直接返回到结果中，对于那些不符合连接条件的列，被填上<code>NULL</code>值后，在返回到结果中<br>外连接查询分为左外连接查询和右外连接查询两种，以主表所在的方向区分外连接查询，主表在左边，则称为左外连接查询，主表在右边，则称其为右外连接查询</p><blockquote><p>例:<br>查询所有学生的学号，姓名，性别，年龄，数学成绩，语文成绩，并按学号排序<br>SELECT s.sno,s.sname,sex,age,math,chinese<br>FROM s LEFT OUTER JOIN sc ON  s.sno=sc.sno<br>ORDER BY sno;</p></blockquote><h2 id="交叉连接查询"><a href="#交叉连接查询" class="headerlink" title="交叉连接查询"></a>交叉连接查询</h2><p>交叉连接查询为连接查询没有特殊的要求，任何表都可以进行交叉查询操作</p><blockquote><p>例:<br>对s表和sc表进行交叉查询<br>SELECT *<br>FROM s CROSS JOIN sc;</p></blockquote><h2 id="自连接查询"><a href="#自连接查询" class="headerlink" title="自连接查询"></a>自连接查询</h2><p>当一个表与其自身进行连接查询操作时，称为表的自连接查询<br>比如，查询学号比<code>114514</code>大的学生的学号，姓名，性别</p><ol><li>方法一<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> x.sno <span class="keyword">AS</span> 学号, x.sname <span class="keyword">AS</span> 姓名,x.sex <span class="keyword">AS</span> 性别</span><br><span class="line"><span class="keyword">FROM</span> s <span class="keyword">AS</span> x,s <span class="keyword">AS</span> y</span><br><span class="line"><span class="keyword">WHERE</span> x.sno<span class="operator">&gt;</span>y.sno <span class="keyword">AND</span> y.sno<span class="operator">=</span>&quot;114514&quot;;</span><br></pre></td></tr></table></figure></li><li>方法二<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> x.sno <span class="keyword">AS</span> 学号, x.sname <span class="keyword">AS</span> 姓名,x.sex <span class="keyword">AS</span> 性别</span><br><span class="line"><span class="keyword">FROM</span> s <span class="keyword">AS</span> x <span class="keyword">INNER</span> <span class="keyword">JOIN</span> s <span class="keyword">AS</span> y</span><br><span class="line"><span class="keyword">On</span> x.sno<span class="operator">&gt;</span>y.sno <span class="keyword">AND</span> y.sno<span class="operator">=</span>&quot;114514&quot;;</span><br></pre></td></tr></table></figure><h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><h2 id="普通子查询"><a href="#普通子查询" class="headerlink" title="普通子查询"></a>普通子查询</h2>普通子查询的执行顺序：首先执行子查询，然后把子查询的结果带入父查询的查询条件中，普通子查询只执行一次，而父查询所涉及的所有记录行都与其查询结果进行比较以确保查询结果集合<h3 id="返回一个值的普通子查询"><a href="#返回一个值的普通子查询" class="headerlink" title="返回一个值的普通子查询"></a>返回一个值的普通子查询</h3>当子查询的返回值只有一个时，可以使用比较运算符将父查询和子查询连接起来<br>比如，查询比张三年龄大的学生的学号，姓名，年龄<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sno,sname,age</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> age<span class="operator">&gt;</span>(<span class="keyword">SELECT</span> age</span><br><span class="line">           <span class="keyword">FROM</span> s</span><br><span class="line">           <span class="keyword">WHERE</span> sname<span class="operator">=</span>&quot;张三&quot;)</span><br></pre></td></tr></table></figure><h3 id="返回一组值的普通子查询"><a href="#返回一组值的普通子查询" class="headerlink" title="返回一组值的普通子查询"></a>返回一组值的普通子查询</h3>如果子查询的返回值不止一个，而是一个集合，则不能直接使用比较运算符，可以在比较运算符和子查询之间插入<code>ANY</code>和<code>ALL</code>，其中等值关系可以用<code>IN</code>，不等值关系则可使用<code>NOT IN</code><div class="note info modern"><p><code>ANY</code>可以与<code>=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;</code>结合起来使⽤，分别表示等于、⼤于、⼤于等于、⼩于、⼩于等于、不等于其中的任何⼀个数据。也就是说只要有任意一个满足就是true，并且显示满足条件的数据。<br><code>ALL</code>可以与<code>=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;</code>结合是来使⽤，分别表示等于、⼤于、⼤于等于、 ⼩于、⼩于等于、不等于其中的所有数据。当所有数据都满足才是true，会返回满足所有条件的数据。</p></div>现添加c表和stuc表，c表中包含课程基本信息(课程号(cno)，课程名(cname)，任教教师(cteacher)，课时(ctime)……)，stuc表中包含学生选课基本信息(学号(sno)，姓名(sname)，课程号(cno)，课程名(cname)……)，现要查询姓名为张三的学生所选课程的课程号，课程名，任教教师<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> cno,cname,cteacher</span><br><span class="line"><span class="keyword">FROM</span> c</span><br><span class="line"><span class="keyword">WHERE</span> cno<span class="operator">=</span><span class="keyword">ANY</span>(<span class="keyword">SELECT</span> cno</span><br><span class="line">              <span class="keyword">FROM</span> stuc</span><br><span class="line">              <span class="keyword">WHERE</span> sname<span class="operator">=</span>&quot;张三&quot;)</span><br></pre></td></tr></table></figure><h3 id="用于数据操纵的普通查询"><a href="#用于数据操纵的普通查询" class="headerlink" title="用于数据操纵的普通查询"></a>用于数据操纵的普通查询</h3>比如，将sc表中数学平均成绩进行赋分(平均成绩*80%+20)<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> math<span class="operator">=</span>(<span class="keyword">SELECT</span> <span class="number">0.8</span><span class="operator">*</span><span class="built_in">AVG</span>(math)<span class="operator">+</span><span class="number">20</span></span><br><span class="line">          <span class="keyword">FROM</span> sc); </span><br></pre></td></tr></table></figure></li></ol><h2 id="相关子查询"><a href="#相关子查询" class="headerlink" title="相关子查询"></a>相关子查询</h2><p>在某些查询任务中，子查询的查询条件需要引用父查询表中的属性值，这类查询成为相关子查询</p><p>相关子查询的查询顺序：首先，选取父查询表中的第一行记录，子查询利用此行中相关的属性值在子查询涉及的基本表中进行查询，然后，父查询根据子查询返回的结果判断父查询表中的此行是否满足条件如果满足条件，则把该行放入父查询的查询结果集合中，重复执行这一过程，知道处理完父查询表中的每一行数据</p><p>比如，查询学生的学号，姓名，查询条件是该学生选课中有c1课程<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sno,sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> &quot;c1&quot; <span class="keyword">IN</span> (<span class="keyword">SELECT</span> cno</span><br><span class="line">               <span class="keyword">FROM</span> stuc</span><br><span class="line">               <span class="keyword">WHERE</span> sno<span class="operator">=</span>s.sno);</span><br></pre></td></tr></table></figure></p><h2 id="集合运算查询"><a href="#集合运算查询" class="headerlink" title="集合运算查询"></a>集合运算查询</h2><p>集合运算查询是使用<code>UNION</code>关键字将来自不同查询的数据组合起来，形成一个具有综合信息的查询结果，使用<code>UNION</code>时，系统会自动将重复的数据行剔除</p><div class="note danger morden flat"><p>参加集合运算查询的各子查询，其查询结果的结果应该是相同的，即各子查询结果中数据的数目和对应的数据类型都必须相同</p></div><p>比如，查询主修为计算机专业的学生，再查询主修为数学的学生<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> major<span class="operator">=</span>&quot;计算机&quot;</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> major<span class="operator">=</span>&quot;数学&quot;;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux命令行(二)</title>
      <link href="/posts/ab55f924.html"/>
      <url>/posts/ab55f924.html</url>
      
        <content type="html"><![CDATA[<h1 id="查找定位文件命令"><a href="#查找定位文件命令" class="headerlink" title="查找定位文件命令"></a>查找定位文件命令</h1><h2 id="pwd命令"><a href="#pwd命令" class="headerlink" title="pwd命令"></a><code>pwd</code>命令</h2><p>显示用户当前所在目录</p><blockquote><p>例：<br>显示当前所在目录<br>pwd</p></blockquote><h2 id="cd命令"><a href="#cd命令" class="headerlink" title="cd命令"></a><code>cd</code>命令</h2><p>切换当前工作路径</p><blockquote><p>例：<br>切换到<code>/etc</code>目录<br>cd /etc</p><p>例：<br>返回上一级目录<br>cd -</p></blockquote><h2 id="ls命令"><a href="#ls命令" class="headerlink" title="ls命令"></a><code>ls</code>命令</h2><p>显示目录文件中文件信息，可搭配<code>-a</code>显示全部文件，<code>-l</code>查看文件属性、大小等详细信息</p><blockquote><p>例：<br>显示目录中全部文件信息<br>ls -a</p></blockquote><h2 id="tree命令"><a href="#tree命令" class="headerlink" title="tree命令"></a><code>tree</code>命令</h2><p>以树状图的形式列出目录内容及结构</p><blockquote><p>例：<br>以树状图的形式列出目录内容及结构<br>tree</p></blockquote><h2 id="find命令"><a href="#find命令" class="headerlink" title="find命令"></a><code>find</code>命令</h2><p>按照指定条件查找文件所在位置，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-name</td><td>匹配名称</td></tr><tr><td>-perm</td><td>匹配权限(mode为完全匹配，-mode为包含即可)</td></tr><tr><td>-user</td><td>匹配所有者</td></tr><tr><td>-group</td><td>匹配所属组</td></tr><tr><td>-mtime -n +n</td><td>匹配修改内容的时间(-n为n天以内，+n为n天以前)</td></tr><tr><td>-atime -n +n</td><td>匹配访问文件的时间(-n为n天以内，+n为n天以前)</td></tr><tr><td>-ctime -n +n</td><td>匹配修改文件权限的时间(-n为n天以内，+n为n天以前)</td></tr><tr><td>-nouser</td><td>匹配无所有者文件</td></tr><tr><td>-nogroup</td><td>匹配无所属组的文件</td></tr><tr><td>-newer f1 !f2</td><td>匹配比文件f1新但比文件f2旧的文件</td></tr><tr><td>-type</td><td>匹配文件类型(b块设备，d目录，c字符设备，p管道，l链接文件，f文本文件)</td></tr><tr><td>-size</td><td>匹配文件大小(+50KB为查找超过50KB的文件，-50KB为查找小于50KB的文件)</td></tr><tr><td>-prune</td><td>忽略某个目录</td></tr><tr><td>-exec…… {}\;</td><td>后面可跟用于进一步处理搜索结果的命令</td></tr></tbody></table></div><blockquote><p>例：<br>搜索所有以<code>host</code>开头的文件<br>find /etc -name “host*”</p></blockquote><h2 id="locate命令"><a href="#locate命令" class="headerlink" title="locate命令"></a><code>locate</code>命令</h2><p>按照名称快速搜索文件所对应的位置</p><div class="note info modern"><p>首次使用<code>locate</code>命令前，需要使用<code>updatedb</code>命令来生成索引数据库<br>updatedb</p></div><blockquote><p>例：<br>搜索所有包含<code>whereis</code>名称的文件所在的位置<br>locate whereis</p></blockquote><h2 id="whereis命令"><a href="#whereis命令" class="headerlink" title="whereis命令"></a><code>whereis</code>命令</h2><p>按照名称快速搜索二进制程序(命令)、源代码以及帮助文件所对应的位置</p><blockquote><p>例：<br>查找<code>ls</code>命令所在位置<br>whereis ls</p></blockquote><h2 id="which命令"><a href="#which命令" class="headerlink" title="which命令"></a><code>which</code>命令</h2><p>按照指定名称快速搜索二进制程序(命令)所对应的位置</p><blockquote><p>例：<br>查找<code>locate</code>命令所在位置<br>which locate</p></blockquote><h1 id="文本文件编辑命令"><a href="#文本文件编辑命令" class="headerlink" title="文本文件编辑命令"></a>文本文件编辑命令</h1><h2 id="cat命令"><a href="#cat命令" class="headerlink" title="cat命令"></a><code>cat</code>命令</h2><p>查看纯文本文件(内容较少)</p><blockquote><p>例：<br>查看<code>initial-setup-ks.cfg</code>文件(添加<code>-n</code>可以显示行号)<br>cat -n initial-setup-ks.cfg</p></blockquote><h2 id="more命令"><a href="#more命令" class="headerlink" title="more命令"></a><code>more</code>命令</h2><p>查看纯文本文件(内容较多)</p><blockquote><p>例：<br>查看<code>initial-setup-ks.cfg</code>文件<br>more initial-setup-ks.cfg</p></blockquote><h2 id="head命令"><a href="#head命令" class="headerlink" title="head命令"></a><code>head</code>命令</h2><p>查看纯文本文件的前N行</p><blockquote><p>例：<br>查看<code>initial-setup-ks.cfg</code>文件前10行<br>head -n 10 initial-setup-ks.cfg</p></blockquote><h2 id="tail命令"><a href="#tail命令" class="headerlink" title="tail命令"></a><code>tail</code>命令</h2><p>查看纯文本文件的后N行</p><blockquote><p>例：<br>查看<code>initial-setup-ks.cfg</code>文件(添加<code>-n</code>可以显示行号)<br>tail -n 10 initial-setup-ks.cfg</p></blockquote><h2 id="tr命令"><a href="#tr命令" class="headerlink" title="tr命令"></a><code>tr</code>命令</h2><p>用于替换文本内容中的字符</p><blockquote><p>例：<br>将文本中的英文替换为大写<br>cat anaconda-ks.cfg | tr [a-z] [A-Z]</p></blockquote><h2 id="wc命令"><a href="#wc命令" class="headerlink" title="wc命令"></a><code>wc</code>命令</h2><p>统计指定文本文件的行数、字数或字节数，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-l</td><td>只显示行数</td></tr><tr><td>-w</td><td>只显示单词数</td></tr><tr><td>-c</td><td>只显示字节数</td></tr></tbody></table></div><blockquote><p>例：<br>查看当前系统有多少用户<br>wc -l /etc/passwd</p></blockquote><h2 id="stat命令"><a href="#stat命令" class="headerlink" title="stat命令"></a><code>stat</code>命令</h2><p>用于查看文件的具体存储细节和时间等信息</p><blockquote><p>例：<br>查看<code>anaconda-ks.cfg</code>文件信息<br>stat anaconda-ks.cfg</p></blockquote><h2 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a><code>grep</code>命令</h2><p>按行提取文本内容，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-b</td><td>将可执行文件(binary)当作文本文件(text)来搜索</td></tr><tr><td>-c</td><td>仅显示找到的行数</td></tr><tr><td>-I</td><td>忽略大小写</td></tr><tr><td>-n</td><td>显示行号</td></tr><tr><td>-v</td><td>反向选择——仅列出没有关键词的行</td></tr></tbody></table></div><blockquote><p>例：<br>查看当前系统中不允许登录系统的所有用户信息<br>grep /sbin/nologin /etc/passwd</p></blockquote><h2 id="cut命令"><a href="#cut命令" class="headerlink" title="cut命令"></a><code>cut</code>命令</h2><p>按列提取文本内容，<code>-f</code>设置需要查看的列数，<code>-d</code>设置间隔符号</p><blockquote><p>例：<br>提取<code>passwd</code>文件中用户名信息，提取以<code>:</code>为间隔符的第一列内容<br>cut -d : -f 1 /etc/passwd</p></blockquote><h2 id="diff命令"><a href="#diff命令" class="headerlink" title="diff命令"></a><code>diff</code>命令</h2><p>比较多个文件之间内容的差异，<code>--brief</code>确认两个文件是否相同，<code>-c</code>详细比较多个文件的差异之处</p><blockquote><p>例：<br>比较<code>fileA.txt</code>和<code>fileB.txt</code>内容具体不同<br>diff -c fileA.txt fileB.txt</p></blockquote><h2 id="uniq命令"><a href="#uniq命令" class="headerlink" title="uniq命令"></a><code>uniq</code>命令</h2><p>去除文本中连续的重复行</p><blockquote><p>例：<br>去除<code>fileA.txt</code>文件中重复行<br>uniq fileA.txt</p></blockquote><h2 id="sort命令"><a href="#sort命令" class="headerlink" title="sort命令"></a><code>sort</code>命令</h2><p>对文本内容进行再排序</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-f</td><td>忽略大小写</td></tr><tr><td>-b</td><td>忽略缩进与空格</td></tr><tr><td>-n</td><td>以数值型排序</td></tr><tr><td>-r</td><td>反向排序</td></tr><tr><td>-u</td><td>去除重复行</td></tr><tr><td>-t</td><td>指定间隔符</td></tr><tr><td>-k</td><td>设置字段范围</td></tr></tbody></table></div><blockquote><p>例：<br>默认按照字母顺序排序<br>sort fileA.txt</p></blockquote><h1 id="文件目录管理命令"><a href="#文件目录管理命令" class="headerlink" title="文件目录管理命令"></a>文件目录管理命令</h1><h2 id="touch命令"><a href="#touch命令" class="headerlink" title="touch命令"></a><code>touch</code>命令</h2><p>创建空白文件或设置文件的时间，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>仅修改”访问时间”</td></tr><tr><td>-m</td><td>仅修改”修改时间”</td></tr><tr><td>-d</td><td>同时修改”访问时间”和”修改时间”</td></tr></tbody></table></div><blockquote><p>例：<br>创建文件<code>test</code><br>touch test</p></blockquote><h2 id="mkdir命令"><a href="#mkdir命令" class="headerlink" title="mkdir命令"></a><code>mkdir</code>命令</h2><p>创建空白目录，可使用<code>-p</code>参数递归创建具有嵌套层叠关系的文件</p><blockquote><p>例：<br>创建空目录<code>test</code><br>mkdir test</p></blockquote><h2 id="cp命令"><a href="#cp命令" class="headerlink" title="cp命令"></a><code>cp</code>命令</h2><p>复制文件或目录，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-p</td><td>保留原始文件属性</td></tr><tr><td>-d</td><td>若对象为”链接文件”，则保留该”链接文件”的属性</td></tr><tr><td>-r</td><td>递归持续复制(用于目录)</td></tr><tr><td>-i</td><td>若目标文件存在则询问是否覆盖</td></tr><tr><td>-a</td><td>相当于<code>-pdr</code>(以上p、d、r三种效果)</td></tr></tbody></table></div><blockquote><p>例：<br>复制<code>test</code>文件<br>cp test</p></blockquote><h2 id="mv命令"><a href="#mv命令" class="headerlink" title="mv命令"></a><code>mv</code>命令</h2><p>用于剪切或重命名文件</p><blockquote><p>例:<br>将<code>test</code>文件重命名为<code>test.txt</code><br>mv test test.txt</p></blockquote><h2 id="rm命令"><a href="#rm命令" class="headerlink" title="rm命令"></a><code>rm</code>命令</h2><p>用于删除文件或目录，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-f</td><td>强制执行</td></tr><tr><td>-i</td><td>删除前询问</td></tr><tr><td>-r</td><td>删除目录</td></tr><tr><td>-v</td><td>显示过程</td></tr></tbody></table></div><blockquote><p>例：<br>删除<code>test.txt</code>文件<br>rm test.txt</p></blockquote><h2 id="dd命令"><a href="#dd命令" class="headerlink" title="dd命令"></a><code>dd</code>命令</h2><p>按照指定大小和个数的数据块来复制文件或转换文件，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>if</td><td>输入的文件名称</td></tr><tr><td>of</td><td>输出的文件名称</td></tr><tr><td>bs</td><td>设置每个块的大小</td></tr><tr><td>count</td><td>设置要复制的块的个数</td></tr></tbody></table></div><blockquote><p>例：<br>从<code>/dev/zero</code>中取出一个大小10KB的数据块存入<code>test</code>文件中<br>dd if=/dev/zero of=test count=1 bs=10KB</p></blockquote><h2 id="file命令"><a href="#file命令" class="headerlink" title="file命令"></a><code>file</code>命令</h2><p>用于查看文件类型</p><blockquote><p>例：<br>查看<code>anaconda-ks.cfg</code>文件类型<br>file anaconda-ks.cfg</p></blockquote><h2 id="tar命令"><a href="#tar命令" class="headerlink" title="tar命令"></a><code>tar</code>命令</h2><p>用于对文件进行打包压缩或解压，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-c</td><td>创建压缩文件</td></tr><tr><td>-x</td><td>解开压缩文件</td></tr><tr><td>-t</td><td>查看压缩包内有哪些文件</td></tr><tr><td>-z</td><td>用gzip压缩或解压</td></tr><tr><td>-j</td><td>用bzip2压缩或解压</td></tr><tr><td>-v</td><td>显示文件名</td></tr><tr><td>-p</td><td>保留原始的权限或属性</td></tr><tr><td>-P</td><td>使用绝对路径来压缩</td></tr><tr><td>-C</td><td>指定解压到的目录</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 历史记录界面修改</title>
      <link href="/posts/b4c31191.html"/>
      <url>/posts/b4c31191.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文主要修改文件为<code>screens.rpy</code>文件</strong></p><h1 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 滚轮下滑关闭历史记录</span></span><br><span class="line"><span class="comment">## 2024.11.27 发现历史记录对话过少时滚轮下滑无法关闭历史记录界面</span></span><br><span class="line"><span class="comment">## 解决方法 判断当前历史记录个数，小于临界值的部分使用key &quot;mousedown_5&quot; action Return()</span></span><br></pre></td></tr></table></figure><p>参考代码如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(_history_list)&lt;<span class="number">3</span>:</span><br><span class="line">    key <span class="string">&quot;mousedown_5&quot;</span> action Return()</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li>大佬教程<br> <a href="https://zhuanlan.zhihu.com/p/348107987">界面样式</a><br> <a href="https://www.bilibili.com/opus/949420104408367120">滑块居中</a><br> <a href="https://www.renpy.cn/forum.php?mod=viewthread&amp;tid=221">记录跳转</a><br> <a href="https://www.bilibili.com/opus/685189039369748514">语音重播</a><br> <a href="https://www.renpy.cn/forum.php?mod=viewthread&amp;tid=846&amp;extra=page%3D3">滚轮关闭</a></li><li>文档链接<br> <a href="https://doc.renpy.cn/zh-CN/history.html#HistoryEntry.image_tag">添加头像</a><br> <a href="https://doc.renpy.cn/zh-CN/history.html#HistoryEntry.voice">语音重播</a><br> <a href="https://doc.renpy.cn/zh-CN/history.html#HistoryEntry.rollback_identifier">记录跳转</a><br> <a href="https://doc.renpy.cn/zh-CN/screen_python.html#ui.adjustment">滚轮关闭</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV11xDqYEETf&cid=26679708170&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h1><p>打开<code>screens.rpy</code>文件，你可以在866行看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 历史屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这是一个向用户显示对话历史的屏幕。虽然此屏幕没有什么特别之处，但它必须访问储</span></span><br><span class="line"><span class="comment">## 存在 _history_list 中的对话历史记录。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://doc.renpy.cn/zh-CN/history.html</span></span><br><span class="line"></span><br><span class="line">screen history():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 避免预缓存此屏幕，因为它可能非常大。</span></span><br><span class="line">    predict <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    use game_menu(_(<span class="string">&quot;历史&quot;</span>), scroll=(<span class="string">&quot;vpgrid&quot;</span> <span class="keyword">if</span> gui.history_height <span class="keyword">else</span> <span class="string">&quot;viewport&quot;</span>), yinitial=<span class="number">1.0</span>, spacing=gui.history_spacing):</span><br><span class="line"></span><br><span class="line">        style_prefix <span class="string">&quot;history&quot;</span></span><br><span class="line">        <span class="comment">## 记录列表</span></span><br><span class="line">        <span class="keyword">for</span> h <span class="keyword">in</span> _history_list:</span><br><span class="line"></span><br><span class="line">            window:</span><br><span class="line"></span><br><span class="line">                <span class="comment">## 此代码可确保如果 history_height 为 None 时仍可正常显示条目。</span></span><br><span class="line">                has fixed:</span><br><span class="line">                    yfit <span class="literal">True</span></span><br><span class="line">                <span class="comment">## 如果有名字</span></span><br><span class="line">                <span class="keyword">if</span> h.who:</span><br><span class="line"></span><br><span class="line">                    label h.who:</span><br><span class="line">                        style <span class="string">&quot;history_name&quot;</span></span><br><span class="line">                        substitute <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">## 从 Character 对象中获取叙述角色的文字颜色，如果设置了</span></span><br><span class="line">                        <span class="comment">## 的话。</span></span><br><span class="line">                        <span class="keyword">if</span> <span class="string">&quot;color&quot;</span> <span class="keyword">in</span> h.who_args:</span><br><span class="line">                            text_color h.who_args[<span class="string">&quot;color&quot;</span>]</span><br><span class="line">                <span class="comment">## 对话</span></span><br><span class="line">                $ what = renpy.filter_text_tags(h.what, allow=gui.history_allow_tags)</span><br><span class="line">                text what:</span><br><span class="line">                    substitute <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> _history_list:</span><br><span class="line">            label _(<span class="string">&quot;尚无对话历史记录。&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码决定了允许在历史记录屏幕上显示哪些标签。</span></span><br><span class="line"></span><br><span class="line">define gui.history_allow_tags = &#123; <span class="string">&quot;alt&quot;</span>, <span class="string">&quot;noalt&quot;</span>, <span class="string">&quot;rt&quot;</span>, <span class="string">&quot;rb&quot;</span>, <span class="string">&quot;art&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style history_window <span class="keyword">is</span> empty</span><br><span class="line"></span><br><span class="line">style history_name <span class="keyword">is</span> gui_label</span><br><span class="line">style history_name_text <span class="keyword">is</span> gui_label_text</span><br><span class="line">style history_text <span class="keyword">is</span> gui_text</span><br><span class="line"></span><br><span class="line">style history_label <span class="keyword">is</span> gui_label</span><br><span class="line">style history_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line"></span><br><span class="line">style history_window:</span><br><span class="line">    xfill <span class="literal">True</span></span><br><span class="line">    ysize gui.history_height</span><br><span class="line"></span><br><span class="line">style history_name:</span><br><span class="line">    xpos gui.history_name_xpos</span><br><span class="line">    xanchor gui.history_name_xalign</span><br><span class="line">    ypos gui.history_name_ypos</span><br><span class="line">    xsize gui.history_name_width</span><br><span class="line"></span><br><span class="line">style history_name_text:</span><br><span class="line">    min_width gui.history_name_width</span><br><span class="line">    textalign gui.history_name_xalign</span><br><span class="line"></span><br><span class="line">style history_text:</span><br><span class="line">    xpos gui.history_text_xpos</span><br><span class="line">    ypos gui.history_text_ypos</span><br><span class="line">    xanchor gui.history_text_xalign</span><br><span class="line">    xsize gui.history_text_width</span><br><span class="line">    min_width gui.history_text_width</span><br><span class="line">    textalign gui.history_text_xalign</span><br><span class="line">    layout (<span class="string">&quot;subtitle&quot;</span> <span class="keyword">if</span> gui.history_text_xalign <span class="keyword">else</span> <span class="string">&quot;tex&quot;</span>)</span><br><span class="line"></span><br><span class="line">style history_label:</span><br><span class="line">    xfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style history_label_text:</span><br><span class="line">    xalign <span class="number">0.5</span></span><br></pre></td></tr></table></figure></p><h1 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h1><p>默认界面总体而言还是比较简单单调的，我们稍作修改，示例代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 历史屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这是一个向用户显示对话历史的屏幕。虽然此屏幕没有什么特别之处，但它必须访问储</span></span><br><span class="line"><span class="comment">## 存在 _history_list 中的对话历史记录。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://www.renpy.cn/doc/history.html</span></span><br><span class="line"></span><br><span class="line">screen history():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 避免预缓存此屏幕，因为它可能非常大。</span></span><br><span class="line">    predict <span class="literal">False</span></span><br><span class="line">    <span class="comment">#添加历史记录背景图</span></span><br><span class="line">    add <span class="string">&quot;history_bg.png&quot;</span></span><br><span class="line">    frame:</span><br><span class="line">        style<span class="string">&quot;history_frame_style&quot;</span></span><br><span class="line">        frame:</span><br><span class="line">            style<span class="string">&quot;history_window_frame_style&quot;</span></span><br><span class="line"></span><br><span class="line">            vpgrid <span class="built_in">id</span> <span class="string">&quot;history_list&quot;</span>:</span><br><span class="line">                <span class="comment">#行数</span></span><br><span class="line">                cols <span class="number">1</span></span><br><span class="line">                <span class="comment">#视口初始垂直偏移量</span></span><br><span class="line">                yinitial <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">                mousewheel <span class="literal">True</span></span><br><span class="line">                draggable <span class="literal">True</span></span><br><span class="line">                pagekeys <span class="literal">True</span></span><br><span class="line">                </span><br><span class="line">                side_xfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> h <span class="keyword">in</span> _history_list:</span><br><span class="line">                    </span><br><span class="line">                    window:</span><br><span class="line">                        <span class="comment"># 背景默认为对话框</span></span><br><span class="line">                        background <span class="literal">None</span></span><br><span class="line">                        <span class="comment"># 高度</span></span><br><span class="line">                        ysize <span class="number">200</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="keyword">if</span> h.who:</span><br><span class="line">                            </span><br><span class="line">                            <span class="comment"># 角色名字</span></span><br><span class="line">                            label h.who:</span><br><span class="line">                                xoffset <span class="number">100</span></span><br><span class="line">                                substitute <span class="literal">False</span></span><br><span class="line">                                text_color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">                                text_outlines [(<span class="number">3</span>, <span class="string">&quot;#000000&quot;</span>, <span class="number">0</span>, <span class="number">0</span>)]</span><br><span class="line"></span><br><span class="line">                        <span class="comment"># 历史记录</span></span><br><span class="line">                        $ what = renpy.filter_text_tags(h.what, allow=gui.history_allow_tags)</span><br><span class="line">                        text what:</span><br><span class="line">                            color <span class="string">&quot;#ffffff&quot;</span></span><br><span class="line">                            outlines [(<span class="number">3</span>, <span class="string">&quot;#000000&quot;</span>, <span class="number">0</span>, <span class="number">0</span>)]</span><br><span class="line">                            xoffset <span class="number">250</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> _history_list:</span><br><span class="line">                    label _(<span class="string">&quot;尚无对话历史记录。&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 滚动条</span></span><br><span class="line">    vbar:</span><br><span class="line">        xsize <span class="number">44</span></span><br><span class="line">        ysize <span class="number">570</span></span><br><span class="line">        align (<span class="number">0.95</span>, <span class="number">0.5</span>)</span><br><span class="line">        base_bar <span class="string">&quot;history_bar.png&quot;</span></span><br><span class="line">        thumb Frame(<span class="string">&quot;thumb.png&quot;</span>,xysize=(<span class="number">44</span>,<span class="number">44</span>))</span><br><span class="line">        thumb_offset <span class="number">14</span></span><br><span class="line">        value YScrollValue(<span class="string">&quot;history_list&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 返回按钮</span></span><br><span class="line">    imagebutton:</span><br><span class="line">        align (<span class="number">0.95</span>, <span class="number">0.9</span>)</span><br><span class="line">        idle <span class="string">&quot;return.png&quot;</span></span><br><span class="line">        hover <span class="string">&quot;return_hover.png&quot;</span></span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line"><span class="comment">#新添加样式  </span></span><br><span class="line">style history_frame_style:</span><br><span class="line">    left_padding <span class="number">200</span> <span class="comment">#左边距</span></span><br><span class="line">    right_padding <span class="number">0</span> <span class="comment">#右边距</span></span><br><span class="line"></span><br><span class="line">style history_window_frame_style:</span><br><span class="line">    top_padding <span class="number">185</span> <span class="comment">#顶部边距</span></span><br><span class="line">    bottom_padding <span class="number">150</span> <span class="comment">#底部边距</span></span><br><span class="line">    xfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码决定了允许在历史记录屏幕上显示哪些标签。</span></span><br><span class="line"></span><br><span class="line">define gui.history_allow_tags = &#123; <span class="string">&quot;alt&quot;</span>, <span class="string">&quot;noalt&quot;</span>, <span class="string">&quot;rt&quot;</span>, <span class="string">&quot;rb&quot;</span>, <span class="string">&quot;art&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style history_window <span class="keyword">is</span> empty</span><br><span class="line"></span><br><span class="line">style history_name <span class="keyword">is</span> gui_label</span><br><span class="line">style history_name_text <span class="keyword">is</span> gui_label_text</span><br><span class="line">style history_text <span class="keyword">is</span> gui_text</span><br><span class="line"></span><br><span class="line">style history_label <span class="keyword">is</span> gui_label</span><br><span class="line">style history_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line"></span><br><span class="line">style history_window:</span><br><span class="line">    xfill <span class="literal">True</span></span><br><span class="line">    ysize gui.history_height</span><br><span class="line"></span><br><span class="line">style history_name:</span><br><span class="line">    xpos gui.history_name_xpos</span><br><span class="line">    xanchor gui.history_name_xalign</span><br><span class="line">    ypos gui.history_name_ypos</span><br><span class="line">    xsize gui.history_name_width</span><br><span class="line"></span><br><span class="line">style history_name_text:</span><br><span class="line">    min_width gui.history_name_width</span><br><span class="line">    textalign gui.history_name_xalign</span><br><span class="line"></span><br><span class="line">style history_text:</span><br><span class="line">    xpos gui.history_text_xpos</span><br><span class="line">    ypos gui.history_text_ypos</span><br><span class="line">    xanchor gui.history_text_xalign</span><br><span class="line">    xsize gui.history_text_width</span><br><span class="line">    min_width gui.history_text_width</span><br><span class="line">    textalign gui.history_text_xalign</span><br><span class="line">    layout (<span class="string">&quot;subtitle&quot;</span> <span class="keyword">if</span> gui.history_text_xalign <span class="keyword">else</span> <span class="string">&quot;tex&quot;</span>)</span><br><span class="line"></span><br><span class="line">style history_label:</span><br><span class="line">    xfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style history_label_text:</span><br><span class="line">    xalign <span class="number">0.5</span></span><br></pre></td></tr></table></figure></p><h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1><p>到这里比较基础的部分就完成了，接下来我们添加一些功能选项</p><h2 id="历史记录跳转"><a href="#历史记录跳转" class="headerlink" title="历史记录跳转"></a>历史记录跳转</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 跳转按钮</span></span><br><span class="line">imagebutton:</span><br><span class="line">    idle <span class="string">&quot;jump.png&quot;</span></span><br><span class="line">    hover <span class="string">&quot;jump_hover.png&quot;</span></span><br><span class="line">    action Confirm(<span class="string">&quot;确定要跳转到该处吗？&quot;</span>,yes=RollbackToIdentifier(h.rollback_identifier), no=<span class="literal">None</span>, confirm_selected=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><h2 id="添加角色头像"><a href="#添加角色头像" class="headerlink" title="添加角色头像"></a>添加角色头像</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加头像，如果你在对话框中的头像合适的话，可以直接写为side [h.image_tag]</span></span><br><span class="line"><span class="comment"># (但大多数情况下是不合适的)</span></span><br><span class="line"><span class="keyword">if</span> h.image_tag:</span><br><span class="line">    add <span class="string">&quot;[h.image_tag]_side.png&quot;</span> xysize (<span class="number">100</span>,<span class="number">100</span>) xoffset <span class="number">90</span> yoffset <span class="number">50</span></span><br></pre></td></tr></table></figure><h2 id="角色语音重播"><a href="#角色语音重播" class="headerlink" title="角色语音重播"></a>角色语音重播</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#语音重播</span></span><br><span class="line"><span class="keyword">if</span> h.voice.filename:</span><br><span class="line">    imagebutton:</span><br><span class="line">        yoffset <span class="number">45</span></span><br><span class="line">        idle <span class="string">&quot;voice.png&quot;</span></span><br><span class="line">        hover <span class="string">&quot;voice_hover.png&quot;</span></span><br><span class="line">        action Play(<span class="string">&#x27;voice&#x27;</span>, h.voice.filename)</span><br></pre></td></tr></table></figure><h2 id="滚轮上滑打开历史记录"><a href="#滚轮上滑打开历史记录" class="headerlink" title="滚轮上滑打开历史记录"></a>滚轮上滑打开历史记录</h2><p><code>say</code>界面添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key <span class="string">&quot;mousedown_4&quot;</span> action ShowMenu(<span class="string">&#x27;history&#x27;</span>) </span><br></pre></td></tr></table></figure></p><h2 id="滚轮下滑返回游戏"><a href="#滚轮下滑返回游戏" class="headerlink" title="滚轮下滑返回游戏"></a>滚轮下滑返回游戏</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 滚轮下滑关闭历史记录</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyAdjustment</span>(renpy.display.behavior.Adjustment):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">change</span>(<span class="params">self, value, end_animation=<span class="literal">True</span></span>):</span><br><span class="line">            <span class="keyword">if</span> value &gt; <span class="variable language_">self</span>._<span class="built_in">range</span> <span class="keyword">and</span> <span class="variable language_">self</span>._value == <span class="variable language_">self</span>._<span class="built_in">range</span>:</span><br><span class="line">                <span class="comment"># 返回游戏界面</span></span><br><span class="line">                <span class="keyword">return</span> Return()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 其他情况，正常执行</span></span><br><span class="line">                <span class="keyword">return</span> renpy.display.behavior.Adjustment.change(<span class="variable language_">self</span>, value, end_animation)</span><br><span class="line"><span class="comment"># 理论上这里的range应该修改为我们需要的范围，但不做修改也不会有问题</span></span><br><span class="line">default history_bar_pos = MyAdjustment(<span class="built_in">range</span> = <span class="number">100</span>,changed =<span class="literal">None</span>,adjustable=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p><code>vpgrid</code>内<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yadjustment history_bar_pos</span><br></pre></td></tr></table></figure></p><h2 id="直达顶部底部"><a href="#直达顶部底部" class="headerlink" title="直达顶部底部"></a>直达顶部底部</h2><p>添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回顶部</span></span><br><span class="line">imagebutton:</span><br><span class="line">    idle <span class="string">&quot;top.png&quot;</span></span><br><span class="line">    hover <span class="string">&quot;top_hover.png&quot;</span></span><br><span class="line">    action Function(history_bar_pos.change,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回底部</span></span><br><span class="line">imagebutton:</span><br><span class="line">    idle <span class="string">&quot;buttom.png&quot;</span></span><br><span class="line">    hover <span class="string">&quot;buttom_hover.png&quot;</span></span><br><span class="line">    insensitive <span class="string">&quot;top.png&quot;</span></span><br><span class="line">    <span class="comment"># 历史记录最大块数乘高度</span></span><br><span class="line">    action Function(history_bar_pos.change,config.history_length*<span class="number">200</span>)</span><br></pre></td></tr></table></figure></p><h1 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h1><p>在<code>gui.rpy</code>文件中有一些有关历史记录界面的设置，你可以在317行左右看到<br>我修改后的代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 历史 ##########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 历史记录屏幕显示玩家已经阅读过的对话。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Ren&#x27;Py 将保留的对话历史块数。</span></span><br><span class="line">define config.history_length = <span class="number">250</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 历史屏幕条目的高度，或设置为 None 以使高度变量自适应。</span></span><br><span class="line">define gui.history_height = <span class="number">210</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Additional space to add between history screen entries.</span></span><br><span class="line">define gui.history_spacing = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 所指定叙述角色的标签的坐标、宽度和对齐方式。</span></span><br><span class="line">define gui.history_name_xpos = <span class="number">233</span></span><br><span class="line">define gui.history_name_ypos = <span class="number">0</span></span><br><span class="line">define gui.history_name_width = <span class="number">233</span></span><br><span class="line">define gui.history_name_xalign = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 对话文本的坐标、宽度和对齐方式。</span></span><br><span class="line">define gui.history_text_xpos = <span class="number">255</span></span><br><span class="line">define gui.history_text_ypos = <span class="number">3</span></span><br><span class="line">define gui.history_text_width = <span class="number">1110</span></span><br><span class="line">define gui.history_text_xalign = <span class="number">0.0</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux命令行(一)</title>
      <link href="/posts/9211474f.html"/>
      <url>/posts/9211474f.html</url>
      
        <content type="html"><![CDATA[<h1 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h1><ol><li><p><code>Tab</code>：补全</p></li><li><p><code>Ctrl + C</code>：中止当前正在执行的命令</p></li><li><p><code>Ctrl + D</code>：键盘输入结束</p></li><li><p><code>Ctrl + I</code>：清空终端内容</p></li></ol><h1 id="常用系统工作命令"><a href="#常用系统工作命令" class="headerlink" title="常用系统工作命令"></a>常用系统工作命令</h1><h2 id="echo命令"><a href="#echo命令" class="headerlink" title="echo命令"></a><code>echo</code>命令</h2><p>在终端设备上显示输出字符串的值或变量提取后的值</p><div class="note info modern"><p>输出字符</p></div><blockquote><p>例：<br>输出字符linux<br>echo linux</p></blockquote><div class="note info modern"><p>输出变量提取后的值</p></div><blockquote><p>例：<br>输出SHELL的值<br>echo $SHELL</p></blockquote><h2 id="date命令"><a href="#date命令" class="headerlink" title="date命令"></a><code>date</code>命令</h2><p>显示或设置系统的时间与日期，使用时需在参数前加上符号<code>+</code>, 一些参数设置如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>%S</td><td>秒(0-59)</td></tr><tr><td>%M</td><td>分(0-59)</td></tr><tr><td>%H</td><td>时(0-23)</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>%I</td><td>小时(0-12)</td></tr><tr><td>%m</td><td>月份(1-12)</td></tr><tr><td>%p</td><td>显示出AM或PM</td></tr><tr><td>%a</td><td>缩写工作日名称</td></tr><tr><td>%A</td><td>完整工作日名称</td></tr><tr><td>%b</td><td>缩写月份名称</td></tr><tr><td>%B</td><td>完整月份名称</td></tr><tr><td>%q</td><td>季度</td></tr><tr><td>%y</td><td>简写年份</td></tr><tr><td>%Y</td><td>完整年份</td></tr><tr><td>%d</td><td>本月中的第几天</td></tr><tr><td>%j</td><td>本年中的第几天</td></tr><tr><td>%n</td><td>换行符</td></tr><tr><td>%t</td><td>缩进</td></tr></tbody></table></div><blockquote><p>例：<br>查看当前系统时间<br>date</p></blockquote><div class="note info modern"><p>输出格式为 星期 月 日 时:分:秒 时区 年</p></div><blockquote><p>例：<br>以<code>年-月-日 时:分:秒</code>的格式查看当前系统时间<br>date “+%Y-%m-%d %H:%M:%S”</p></blockquote><h2 id="timedatectl命令"><a href="#timedatectl命令" class="headerlink" title="timedatectl命令"></a><code>timedatectl</code>命令</h2><p>设置系统时间，常见参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>status</td><td>显示状态信息</td></tr><tr><td>list-timezones</td><td>列出已知时区</td></tr><tr><td>set-time</td><td>设置系统时间</td></tr><tr><td>set-timezone</td><td>设置生效时区</td></tr></tbody></table></div><blockquote><p>例：<br>设置时区为上海<br>timedatectl set-timezone Asia/Shanghai</p></blockquote><h2 id="reboot命令"><a href="#reboot命令" class="headerlink" title="reboot命令"></a><code>reboot</code>命令</h2><p>重启系统(最好使用root用户)</p><blockquote><p>例：<br>重启系统<br>reboot</p></blockquote><h2 id="poweroff命令"><a href="#poweroff命令" class="headerlink" title="poweroff命令"></a><code>poweroff</code>命令</h2><p>关闭系统(最好使用root用户)</p><blockquote><p>例：<br>关闭系统<br>poweroff</p></blockquote><h2 id="wget命令"><a href="#wget命令" class="headerlink" title="wget命令"></a><code>wget</code>命令</h2><p>下载文件，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-b</td><td>后台下载模式</td></tr><tr><td>-P</td><td>下载到指定目录</td></tr><tr><td>-t</td><td>最大尝试次数</td></tr><tr><td>-c</td><td>断点续传</td></tr><tr><td>-p</td><td>下载页面所有资源</td></tr><tr><td>-r</td><td>递归下载</td></tr></tbody></table></div><blockquote><p>例：<br>下载本篇文章<br>wget <a href="https://lucylcarus.github.io/posts/9211474f.html">https://lucylcarus.github.io/posts/9211474f.html</a></p></blockquote><h2 id="ps命令"><a href="#ps命令" class="headerlink" title="ps命令"></a><code>ps</code>命令</h2><p>查看进程状态，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示所有进程</td></tr><tr><td>-u</td><td>用户以及其他详细信息</td></tr><tr><td>-x</td><td>显示没有控制终端的进程</td></tr></tbody></table></div><div class="note info modern"><p>Linux中进程常见状态<br>R(运行)  S(中断)   D(不可中断)   Z(僵死)   T(停止)</p></div><h2 id="pstree命令"><a href="#pstree命令" class="headerlink" title="pstree命令"></a><code>pstree</code>命令</h2><p>树状图展示进程间的关系</p><h2 id="top命令"><a href="#top命令" class="headerlink" title="top命令"></a><code>top</code>命令</h2><p>动态监视进程活动及系统负载信息</p><h2 id="nice命令"><a href="#nice命令" class="headerlink" title="nice命令"></a><code>nice</code>命令</h2><p>用于调整进程优先级，用法为<code>nice + 优先级数字 + 服务</code><br>优先级数字范围为-20~19，数字越小，优先级越高</p><blockquote><p>例：<br>调整bash服务的优先级为最高<br>nice -20 bash</p></blockquote><h2 id="pidof命令"><a href="#pidof命令" class="headerlink" title="pidof命令"></a><code>pidof</code>命令</h2><p>查询某个服务进程的pid号码值</p><blockquote><p>例：<br>查询sshd服务的pid<br>pidof sshd</p></blockquote><h2 id="kill命令"><a href="#kill命令" class="headerlink" title="kill命令"></a><code>kill</code>命令</h2><p>终止某个指定pid值的服务进程</p><blockquote><p>例：<br>终止sshd服务<br>kill 2156</p></blockquote><h2 id="killall命令"><a href="#killall命令" class="headerlink" title="killall命令"></a><code>killall</code>命令</h2><p>终止某个指定服务所对应的全部进程</p><blockquote><p>例：<br>终止httpd服务<br>killall httpd</p></blockquote><h1 id="系统状态检测命令"><a href="#系统状态检测命令" class="headerlink" title="系统状态检测命令"></a>系统状态检测命令</h1><h2 id="ifconfig命令"><a href="#ifconfig命令" class="headerlink" title="ifconfig命令"></a><code>ifconfig</code>命令</h2><p>用于获取网卡配置与网络状态等信息</p><blockquote><p>例：<br>查看本机网卡配置与网络状态等信息<br>ifconfig</p></blockquote><h2 id="uname命令"><a href="#uname命令" class="headerlink" title="uname命令"></a><code>uname</code>命令</h2><p>查看系统内核版本与系统结构框架等信息，一般搭配<code>-a</code>使用</p><blockquote><p>例：<br>查看本机系统内核版本与系统结构框架等信息<br>uname -a</p></blockquote><h2 id="uptime命令"><a href="#uptime命令" class="headerlink" title="uptime命令"></a><code>uptime</code>命令</h2><p>查看系统负载信息</p><blockquote><p>例：<br>查看本机系统负载信息<br>uptime</p></blockquote><h2 id="free命令"><a href="#free命令" class="headerlink" title="free命令"></a><code>free</code>命令</h2><p>显示当前系统内存使用量信息</p><blockquote><p>例：<br>显示当前系统内存使用量信息<br>free -h</p></blockquote><h2 id="who命令"><a href="#who命令" class="headerlink" title="who命令"></a><code>who</code>命令</h2><p>查看当前登入主机用户终端信息</p><blockquote><p>例：<br>查看当前登入主机用户终端信息<br>who</p></blockquote><h2 id="last命令"><a href="#last命令" class="headerlink" title="last命令"></a><code>last</code>命令</h2><p>调取主机被访问记录</p><blockquote><p>例：<br>调取主机被访问记录<br>last</p></blockquote><h2 id="ping命令"><a href="#ping命令" class="headerlink" title="ping命令"></a><code>ping</code>命令</h2><p>测试主机间的网络连通性，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-c</td><td>总共发送次数</td></tr><tr><td>-l</td><td>指定网卡名称</td></tr><tr><td>-I</td><td>每次间隔时间(秒)</td></tr><tr><td>-W</td><td>最长等待时间(秒)</td></tr></tbody></table></div><blockquote><p>例：<br>ping 百度官网<br>ping www.baidu.com</p></blockquote><h2 id="tracepath命令"><a href="#tracepath命令" class="headerlink" title="tracepath命令"></a><code>tracepath</code>命令</h2><p>显示数据包到达目的主机时途中经过的所有路由信息</p><blockquote><p>例：<br>显示数据包到达百度官网时途中经过的所有路由信息<br>tracepath www.baidu.com</p></blockquote><h2 id="netstat命令"><a href="#netstat命令" class="headerlink" title="netstat命令"></a><code>netstat</code>命令</h2><p>查看网络状态等信息，常用参数如下表所示</p><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示所有连接中的Socket</td></tr><tr><td>-p</td><td>显示正在使用的Socket信息</td></tr><tr><td>-t</td><td>显示TCP协议的连接状态</td></tr><tr><td>-u</td><td>显示UDP协议的连接状态</td></tr><tr><td>-n</td><td>使用ip地址，不使用域名</td></tr><tr><td>-l</td><td>仅列出正在监听的服务状态</td></tr><tr><td>-i</td><td>现在网卡列表信息</td></tr><tr><td>-r</td><td>显示路由表信息</td></tr></tbody></table></div><blockquote><p>例：<br>显示网卡列表<br>netstat -i</p></blockquote><h2 id="history命令"><a href="#history命令" class="headerlink" title="history命令"></a><code>history</code>命令</h2><p>显示执行过的命令历史，可以使用<code>-c</code>命令清空所有命令历史记录</p><blockquote><p>例：<br>显示执行过的命令历史<br>history -c</p></blockquote><h2 id="sosreport命令"><a href="#sosreport命令" class="headerlink" title="sosreport命令"></a><code>sosreport</code>命令</h2><p>用于收集系统配置及架构信息并输出诊断文档</p><blockquote><p>例：<br>加粗部分为收集好的资料压缩文件及校验码<br>sosreport</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 存档读档界面修改</title>
      <link href="/posts/39e7251c.html"/>
      <url>/posts/39e7251c.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文主要修改的文件为<code>screens.rpy</code>，次要修改文件为<code>gui.rpy</code></strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li>大佬教程<br> <a href="https://www.renpy.cn/forum.php?mod=viewthread&amp;tid=847">添加描述</a></li><li>文档链接<br><a href="https://doc.renpy.cn/zh-CN/other.html#last_say">最近发言</a><br><a href="https://doc.renpy.cn/zh-CN/screen_actions.html#FileSlotName">存档编号</a><br><a href="https://doc.renpy.cn/zh-CN/screen_actions.html#FileNewest">最新存档</a><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1></li></ol><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1WYSHYeECU&cid=26552764189&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h1><p>打开<code>screens.rpy</code>文件，你可以在564行看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 读取和保存屏幕 #####################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这些屏幕负责让用户保存游戏并能够再次读取。由于它们几乎完全一样，因此这两个屏</span></span><br><span class="line"><span class="comment">## 幕都是以第三个屏幕 file_slots 来实现的。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://doc.renpy.cn/zh-CN/screen_special.html#save https://doc.renpy.cn/zh-</span></span><br><span class="line"><span class="comment">## CN/screen_special.html#load</span></span><br><span class="line"><span class="comment">## 存档界面</span></span><br><span class="line">screen save():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    use file_slots(_(<span class="string">&quot;保存&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## 读档界面</span></span><br><span class="line">screen load():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    use file_slots(_(<span class="string">&quot;读取游戏&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## 调用的界面</span></span><br><span class="line">screen file_slots(title):</span><br><span class="line"><span class="comment">## 当前页数，非必须</span></span><br><span class="line">    default page_name_value = FilePageNameInputValue(pattern=_(<span class="string">&quot;第 &#123;&#125; 页&quot;</span>), auto=_(<span class="string">&quot;自动存档&quot;</span>), quick=_(<span class="string">&quot;快速存档&quot;</span>))</span><br><span class="line">    <span class="comment">## 调用game_menu界面，非必须</span></span><br><span class="line">    use game_menu(title):</span><br><span class="line"></span><br><span class="line">        fixed:</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 此代码确保输入控件在任意按钮执行前可以获取 enter 事件。</span></span><br><span class="line">            order_reverse <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">## 页面名称，可以通过单击按钮进行编辑。</span></span><br><span class="line">            button:</span><br><span class="line">                style <span class="string">&quot;page_label&quot;</span></span><br><span class="line"></span><br><span class="line">                key_events <span class="literal">True</span></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                action page_name_value.Toggle()</span><br><span class="line">                <span class="comment">## 可通过点击第几页实现页面跳转，非必须</span></span><br><span class="line">                <span class="built_in">input</span>:</span><br><span class="line">                    style <span class="string">&quot;page_label_text&quot;</span></span><br><span class="line">                    value page_name_value</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 存档位网格。</span></span><br><span class="line">            grid gui.file_slot_cols gui.file_slot_rows:</span><br><span class="line">                style_prefix <span class="string">&quot;slot&quot;</span></span><br><span class="line"></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">                spacing gui.slot_spacing</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line"></span><br><span class="line">                    $ slot = i + <span class="number">1</span></span><br><span class="line">                    <span class="comment">## 存档按钮</span></span><br><span class="line">                    button:</span><br><span class="line">                        action FileAction(slot)<span class="comment">## 执行正确的行为，如果在存档界面则为存档，如果在读档界面则为读档</span></span><br><span class="line"></span><br><span class="line">                        has vbox<span class="comment">## vbox的另一种写法，省略了缩进</span></span><br><span class="line"></span><br><span class="line">                        add FileScreenshot(slot) xalign <span class="number">0.5</span><span class="comment">## 添加屏幕快照</span></span><br><span class="line">                        <span class="comment">## 存档时间，empty为空存档的名称</span></span><br><span class="line">                        text FileTime(slot, <span class="built_in">format</span>=_(<span class="string">&quot;&#123;#file_time&#125;%Y-%m-%d %H:%M&quot;</span>), empty=_(<span class="string">&quot;空存档位&quot;</span>)):</span><br><span class="line">                            style <span class="string">&quot;slot_time_text&quot;</span></span><br><span class="line">                        <span class="comment">## 返回存档文件保存时的save_name，如果文件不存在则返回empty。</span></span><br><span class="line">                        text FileSaveName(slot):</span><br><span class="line">                            style <span class="string">&quot;slot_name_text&quot;</span></span><br><span class="line">                        <span class="comment">## 键盘delete键删除存档</span></span><br><span class="line">                        key <span class="string">&quot;save_delete&quot;</span> action FileDelete(slot)</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 用于访问其他页面的按钮。</span></span><br><span class="line">            vbox:</span><br><span class="line">                style_prefix <span class="string">&quot;page&quot;</span></span><br><span class="line"></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                yalign <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">                hbox:</span><br><span class="line">                    xalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">                    spacing gui.page_spacing</span><br><span class="line"></span><br><span class="line">                    textbutton _(<span class="string">&quot;&lt;&quot;</span>) action FilePagePrevious() <span class="comment">## 上一页</span></span><br><span class="line">                    key <span class="string">&quot;save_page_prev&quot;</span> action FilePagePrevious() <span class="comment">## 键盘上一页翻页</span></span><br><span class="line">                    <span class="comment">## 自动存档页</span></span><br><span class="line">                    <span class="keyword">if</span> config.has_autosave:</span><br><span class="line">                        textbutton _(<span class="string">&quot;&#123;#auto_page&#125;A&quot;</span>) action FilePage(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line">                    <span class="comment">## 快速存档页</span></span><br><span class="line">                    <span class="keyword">if</span> config.has_quicksave:</span><br><span class="line">                        textbutton _(<span class="string">&quot;&#123;#quick_page&#125;Q&quot;</span>) action FilePage(<span class="string">&quot;quick&quot;</span>)</span><br><span class="line">                    <span class="comment">## 普通存档页页数</span></span><br><span class="line">                    <span class="comment">## range(1, 10) 给出 1 到 9 之间的数字。</span></span><br><span class="line">                    <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">                        textbutton <span class="string">&quot;[page]&quot;</span> action FilePage(page)</span><br><span class="line"></span><br><span class="line">                    textbutton _(<span class="string">&quot;&gt;&quot;</span>) action FilePageNext() <span class="comment">## 下一页</span></span><br><span class="line">                    key <span class="string">&quot;save_page_next&quot;</span> action FilePageNext() <span class="comment">## 键盘下一页翻页</span></span><br><span class="line">                <span class="comment">## 上传下载存档，非必须</span></span><br><span class="line">                <span class="keyword">if</span> config.has_sync:</span><br><span class="line">                    <span class="keyword">if</span> CurrentScreenName() == <span class="string">&quot;save&quot;</span>:</span><br><span class="line">                        textbutton _(<span class="string">&quot;上传同步&quot;</span>):</span><br><span class="line">                            action UploadSync()</span><br><span class="line">                            xalign <span class="number">0.5</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        textbutton _(<span class="string">&quot;下载同步&quot;</span>):</span><br><span class="line">                            action DownloadSync()</span><br><span class="line">                            xalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档读档界面所需样式</span></span><br><span class="line">style page_label <span class="keyword">is</span> gui_label</span><br><span class="line">style page_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line">style page_button <span class="keyword">is</span> gui_button</span><br><span class="line">style page_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line"></span><br><span class="line">style slot_button <span class="keyword">is</span> gui_button</span><br><span class="line">style slot_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line">style slot_time_text <span class="keyword">is</span> slot_button_text</span><br><span class="line">style slot_name_text <span class="keyword">is</span> slot_button_text</span><br><span class="line"></span><br><span class="line">style page_label:</span><br><span class="line">    xpadding <span class="number">75</span></span><br><span class="line">    ypadding <span class="number">5</span></span><br><span class="line"></span><br><span class="line">style page_label_text:</span><br><span class="line">    textalign <span class="number">0.5</span></span><br><span class="line">    layout <span class="string">&quot;subtitle&quot;</span></span><br><span class="line">    hover_color gui.hover_color</span><br><span class="line"></span><br><span class="line">style page_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style page_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>由于存档界面和读档界面并无太大差别，所以在Ren’py中，存档界面和读档界面都是调用第三个界面——<code>file_slots</code>来实现的，各部分的详细作用请查看上述注释</p><h1 id="初步自定义"><a href="#初步自定义" class="headerlink" title="初步自定义"></a>初步自定义</h1><p>现在我们删去不必要的部分，添加些背景图像，并为存档添加描述，参考代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 读取和保存屏幕 #####################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这些屏幕负责让用户保存游戏并能够再次读取。由于它们几乎完全一样，因此这两个屏</span></span><br><span class="line"><span class="comment">## 幕都是以第三个屏幕 file_slots 来实现的。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">##引入必要模块</span></span><br><span class="line"></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment">#存档界面</span></span><br><span class="line">screen save():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    <span class="comment">#存档界面背景图</span></span><br><span class="line">    add <span class="string">&quot;save_load_bg&quot;</span></span><br><span class="line">    <span class="comment">#存档界面logo</span></span><br><span class="line">    add <span class="string">&quot;gui/button/save.png&quot;</span> zoom <span class="number">1.5</span> yoffset <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    fixed:</span><br><span class="line">        <span class="comment">## 此语句确保输入控件在任意按钮执行前可以获取“enter”事件。</span></span><br><span class="line">        order_reverse <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">## 存档位网格。</span></span><br><span class="line">        grid gui.file_slot_cols gui.file_slot_rows:</span><br><span class="line">            style_prefix <span class="string">&quot;slot&quot;</span> <span class="comment">#该语句不可省略</span></span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            align (<span class="number">0.7</span>, <span class="number">0.5</span>)</span><br><span class="line">            xoffset -<span class="number">10</span></span><br><span class="line">            yoffset <span class="number">25</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line"></span><br><span class="line">                $ slot = i + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">                button:</span><br><span class="line">                    </span><br><span class="line">                    action FileAction(slot)</span><br><span class="line">                    <span class="comment">#存档按钮背景图</span></span><br><span class="line">                    background <span class="string">&quot;gui/button/slot_idle_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#存档按钮悬停图</span></span><br><span class="line">                    hover_background <span class="string">&quot;gui/button/slot_hover_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#添加屏幕快照缩略图</span></span><br><span class="line">                    add FileScreenshot(slot) xysize(<span class="number">231</span>,<span class="number">130</span>) xoffset -<span class="number">3</span> yoffset <span class="number">62</span></span><br><span class="line">                    </span><br><span class="line">                    vbox:</span><br><span class="line">                        <span class="comment">#时间</span></span><br><span class="line">                        text FileTime(slot, <span class="built_in">format</span>=_(<span class="string">&quot;&#123;#file_time&#125;%Y-%m-%d %H:%M&quot;</span>), empty=_(<span class="string">&quot;空存档&quot;</span>)):</span><br><span class="line">                            style <span class="string">&quot;slot_time_text&quot;</span></span><br><span class="line">                            size <span class="number">30</span></span><br><span class="line">                        </span><br><span class="line">                        frame:</span><br><span class="line">                            background <span class="literal">None</span></span><br><span class="line">                            xysize(<span class="number">210</span>,<span class="number">110</span>)</span><br><span class="line">                            xoffset <span class="number">230</span></span><br><span class="line">                            yoffset <span class="number">20</span></span><br><span class="line">                            <span class="comment">#存档描述</span></span><br><span class="line">                            text FileSaveName(slot):</span><br><span class="line">                                size <span class="number">25</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">#添加存档描述，正则表达式，该语句只可用于存档界面</span></span><br><span class="line">                    <span class="comment">#(大佬给出的代码为固定的快速存档，会导致普通存档无法正常存档，将其修改为FileAction(slot)，执行正确的操作)</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(_last_say_what) &gt;<span class="number">15</span>:</span><br><span class="line">                        action [SetVariable(<span class="string">&quot;save_name&quot;</span>, re.sub(<span class="string">&#x27;(\&#123;.*?\&#125;)|(\\\w)|\s&#x27;</span>, <span class="string">&#x27;&#x27;</span>, _last_say_what[:<span class="number">15</span>])+<span class="string">&quot;...&quot;</span>),FileAction(slot) ]</span><br><span class="line">                    <span class="keyword">elif</span> <span class="built_in">len</span>(_last_say_what) &gt; <span class="number">0</span>:</span><br><span class="line">                        action [SetVariable(<span class="string">&quot;save_name&quot;</span>, re.sub(<span class="string">&#x27;(\&#123;.*?\&#125;)|(\\\w)|\s&#x27;</span>, <span class="string">&#x27;&#x27;</span>, _last_say_what)),FileAction(slot) ]</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        action FileAction(slot)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## 用于访问其他页面的按钮。</span></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;page&quot;</span></span><br><span class="line"></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">0.1</span></span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            <span class="keyword">if</span> config.has_autosave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#auto_page&#125;A&quot;</span>) action FilePage(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> config.has_quicksave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#quick_page&#125;Q&quot;</span>) action FilePage(<span class="string">&quot;quick&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page1.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">1</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page2.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">2</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page3.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">3</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page4.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">4</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page5.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">5</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page6.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">6</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page7.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">7</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page8.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">8</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page9.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.05</span>, <span class="number">0.95</span>)</span><br><span class="line">        text_color <span class="string">&quot;#000&quot;</span></span><br><span class="line">        text_size <span class="number">50</span></span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line"><span class="comment">#读档界面</span></span><br><span class="line">screen load():</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    <span class="comment">#读档界面背景图</span></span><br><span class="line">    add <span class="string">&quot;save_load_bg&quot;</span></span><br><span class="line">    <span class="comment">#读档界面logo</span></span><br><span class="line">    add <span class="string">&quot;gui/button/load.png&quot;</span> zoom <span class="number">1.5</span> yoffset <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    fixed:</span><br><span class="line">        <span class="comment">## 此语句确保输入控件在任意按钮执行前可以获取“enter”事件。</span></span><br><span class="line">        order_reverse <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        <span class="comment">## 存档位网格。</span></span><br><span class="line">        grid gui.file_slot_cols gui.file_slot_rows:</span><br><span class="line">            style_prefix <span class="string">&quot;slot&quot;</span> <span class="comment">#该语句不可省略</span></span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            align (<span class="number">0.7</span>, <span class="number">0.5</span>)</span><br><span class="line">            xoffset -<span class="number">10</span></span><br><span class="line">            yoffset <span class="number">25</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line"></span><br><span class="line">                $ slot = i + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">                button:</span><br><span class="line">                    </span><br><span class="line">                    action FileAction(slot)</span><br><span class="line">                    <span class="comment">#存档按钮背景图</span></span><br><span class="line">                    background <span class="string">&quot;gui/button/slot_idle_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#存档按钮悬停图</span></span><br><span class="line">                    hover_background <span class="string">&quot;gui/button/slot_hover_background.png&quot;</span></span><br><span class="line">                    <span class="comment">#添加屏幕快照缩略图</span></span><br><span class="line">                    add FileScreenshot(slot) xysize(<span class="number">231</span>,<span class="number">130</span>) xoffset -<span class="number">3</span> yoffset <span class="number">62</span></span><br><span class="line">                    </span><br><span class="line">                    vbox:</span><br><span class="line">                        <span class="comment">#时间</span></span><br><span class="line">                        text FileTime(slot, <span class="built_in">format</span>=_(<span class="string">&quot;&#123;#file_time&#125;%Y-%m-%d %H:%M&quot;</span>), empty=_(<span class="string">&quot;空存档&quot;</span>)):</span><br><span class="line">                            style <span class="string">&quot;slot_time_text&quot;</span></span><br><span class="line">                            size <span class="number">30</span></span><br><span class="line">                        </span><br><span class="line">                        frame:</span><br><span class="line">                            background <span class="literal">None</span></span><br><span class="line">                            xysize(<span class="number">210</span>,<span class="number">110</span>)</span><br><span class="line">                            xoffset <span class="number">230</span></span><br><span class="line">                            yoffset <span class="number">20</span></span><br><span class="line">                            <span class="comment">#存档描述</span></span><br><span class="line">                            text FileSaveName(slot):</span><br><span class="line">                                size <span class="number">25</span></span><br><span class="line">                    <span class="comment">#从标题界面进入读档界面无法获取_last_say_what,游戏会报错，因此将其删除</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">## 用于访问其他页面的按钮。</span></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;page&quot;</span></span><br><span class="line"></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">0.1</span></span><br><span class="line">            spacing <span class="number">20</span></span><br><span class="line">            <span class="keyword">if</span> config.has_autosave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#auto_page&#125;A&quot;</span>) action FilePage(<span class="string">&quot;auto&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> config.has_quicksave:</span><br><span class="line">                textbutton _(<span class="string">&quot;&#123;#quick_page&#125;Q&quot;</span>) action FilePage(<span class="string">&quot;quick&quot;</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page1.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover1.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">1</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page2.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover2.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">2</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page3.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover3.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">3</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page4.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover4.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">4</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page5.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover5.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">5</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page6.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover6.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">6</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page7.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover7.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">7</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page8.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover8.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">8</span>)</span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/button/page9.png&quot;</span></span><br><span class="line">                hover <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                selected_idle <span class="string">&quot;gui/button/page_hover9.png&quot;</span></span><br><span class="line">                action FilePage(<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.05</span>, <span class="number">0.95</span>)</span><br><span class="line">        text_color <span class="string">&quot;#000&quot;</span></span><br><span class="line">        text_size <span class="number">50</span></span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style page_label <span class="keyword">is</span> gui_label</span><br><span class="line">style page_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line">style page_button <span class="keyword">is</span> gui_button</span><br><span class="line">style page_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line"></span><br><span class="line">style slot_button <span class="keyword">is</span> gui_button</span><br><span class="line">style slot_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line">style slot_time_text <span class="keyword">is</span> slot_button_text</span><br><span class="line">style slot_name_text <span class="keyword">is</span> slot_button_text</span><br><span class="line"></span><br><span class="line">style page_label:</span><br><span class="line">    xpadding <span class="number">75</span></span><br><span class="line">    ypadding <span class="number">5</span></span><br><span class="line"></span><br><span class="line">style page_label_text:</span><br><span class="line">    textalign <span class="number">0.5</span></span><br><span class="line">    layout <span class="string">&quot;subtitle&quot;</span></span><br><span class="line">    hover_color gui.hover_color</span><br><span class="line"></span><br><span class="line">style page_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style page_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;page_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style slot_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;slot_button&quot;</span>)</span><br></pre></td></tr></table></figure></p><div class="note info modern"><p>由于我是将存档界面和读档界面分开编写的，所以这部分代码仅供参考，如果你想沿用源代码，请自行修改</p></div><h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1><p>其实到上一步我们的自定义就已经差不多完成了，但我们还可以在完善一下</p><h2 id="存档编号"><a href="#存档编号" class="headerlink" title="存档编号"></a>存档编号</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#存档编号</span></span><br><span class="line">text <span class="string">&quot;NO.&quot;</span>+FileSlotName(slot, gui.file_slot_cols * gui.file_slot_rows):</span><br><span class="line">    align (<span class="number">1.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    size <span class="number">30</span></span><br></pre></td></tr></table></figure><h2 id="最新存档标识"><a href="#最新存档标识" class="headerlink" title="最新存档标识"></a>最新存档标识</h2><p>添加如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#最新存档标识(只记录普通存档页)</span></span><br><span class="line"><span class="keyword">if</span> FileNewest(slot):</span><br><span class="line">    add <span class="string">&quot;gui/button/newest.png&quot;</span> align (<span class="number">0.75</span>, <span class="number">0.0</span>)</span><br></pre></td></tr></table></figure><div class="note info modern"><p>可添加一个transform组件，使最新存档标识连续闪烁</p></div><h2 id="删除存档按钮"><a href="#删除存档按钮" class="headerlink" title="删除存档按钮"></a>删除存档按钮</h2><p>源代码中使用键盘delete键删除存档并不具备标识度，我们将其改为更明显的图像按钮，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除存档</span></span><br><span class="line">imagebutton:</span><br><span class="line">    xysize(<span class="number">120</span>,<span class="number">30</span>)</span><br><span class="line">    align((<span class="number">1.0</span>, <span class="number">1.0</span>))</span><br><span class="line">    idle <span class="string">&quot;gui/button/delate.png&quot;</span></span><br><span class="line">    hove<span class="string">r&quot;gui/button/delate_hover.png&quot;</span></span><br><span class="line">    action FileDelete(slot)</span><br></pre></td></tr></table></figure></p><h1 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h1><p>别忘了修改<code>gui.rpy</code>文件中220行左右如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 存档按钮 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 存档按钮是一种特殊的按钮。它包含一个缩略图和描述该存档内容的文本。存档使用</span></span><br><span class="line"><span class="comment">## gui/button 中的图像文件，就像其他类型的按钮一样。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档位按钮。</span></span><br><span class="line">define gui.slot_button_width = <span class="number">475</span></span><br><span class="line">define gui.slot_button_height = <span class="number">227</span></span><br><span class="line">define gui.slot_button_borders = Borders(<span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>)</span><br><span class="line">define gui.slot_button_text_size = <span class="number">21</span></span><br><span class="line">define gui.slot_button_text_xalign = <span class="number">0.5</span></span><br><span class="line">define gui.slot_button_text_idle_color = gui.idle_small_color</span><br><span class="line">define gui.slot_button_text_selected_idle_color = gui.selected_color</span><br><span class="line">define gui.slot_button_text_selected_hover_color = gui.hover_color</span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档所用缩略图的宽度和高度。</span></span><br><span class="line">define config.thumbnail_width = <span class="number">384</span></span><br><span class="line">define config.thumbnail_height = <span class="number">216</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档网格中的列数和行数。</span></span><br><span class="line">define gui.file_slot_cols = <span class="number">3</span></span><br><span class="line">define gui.file_slot_rows = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 定位和间距 #######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 这些变量控制各种用户界面元素的位置和间距。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 导航按钮左侧相对于屏幕左侧的位置。</span></span><br><span class="line">define gui.navigation_xpos = <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 快进指示器的垂直位置。</span></span><br><span class="line">define gui.skip_ypos = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 通知界面的垂直位置。</span></span><br><span class="line">define gui.notify_ypos = <span class="number">68</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 菜单选项之间的间距。</span></span><br><span class="line">define gui.choice_spacing = <span class="number">33</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标题菜单和游戏菜单的导航部分中的按钮。</span></span><br><span class="line">define gui.navigation_spacing = <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 控制设置项目之间的间隔量。</span></span><br><span class="line">define gui.pref_spacing = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 控制设置按钮之间的间距。</span></span><br><span class="line">define gui.pref_button_spacing = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档页面按钮之间的间距。</span></span><br><span class="line">define gui.page_spacing = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 存档按钮之间的间距。</span></span><br><span class="line">define gui.slot_spacing = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标题菜单文本的位置。</span></span><br><span class="line">define gui.main_menu_text_xalign = <span class="number">1.0</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py自制插件</title>
      <link href="/posts/3447be97.html"/>
      <url>/posts/3447be97.html</url>
      
        <content type="html"><![CDATA[<h1 id="立绘动画效果"><a href="#立绘动画效果" class="headerlink" title="立绘动画效果"></a>立绘动画效果</h1><p>包含十余种通用动画效果和两种特殊动画效果</p><h1 id="素材"><a href="#素材" class="headerlink" title="素材"></a>素材</h1><h2 id="转场图像"><a href="#转场图像" class="headerlink" title="转场图像"></a>转场图像</h2><p>一些常用转场图像，请使用<code>ImageDissolve</code>为其定义</p><div class="note info modern"><p>图像基于<code>1920*1080</code>分辨率所制，如有需求，请修改为合适尺寸</p></div><h2 id="人物表情"><a href="#人物表情" class="headerlink" title="人物表情"></a>人物表情</h2><p>一些人物表情素材，使用 <code>show/hide</code> 进行 <code>展示/隐藏</code></p><h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><p>分为<code>可商用字体</code>和<strong><em><code>不可商用字体</code></em></strong></p><div class="note danger modern"><p>如想使用<strong><em>不可商用字体</em></strong>，请自行购买字体版权</p></div><h2 id="粒子"><a href="#粒子" class="headerlink" title="粒子"></a>粒子</h2><p>一些粒子素材，请搭配<code>SnowBlossom</code>使用</p><h2 id="图标"><a href="#图标" class="headerlink" title="图标"></a>图标</h2><p>一些图标素材，可自行修改、填充颜色</p><h2 id="帧动画"><a href="#帧动画" class="headerlink" title="帧动画"></a>帧动画</h2><p>一些帧动画素材，请参考<a href="https://www.renpy.org/wiki/renpy/doc/reference/functions/anim.Filmstrip">Ren’py Wiki文档</a>使用</p><h2 id="鼠标光标"><a href="#鼠标光标" class="headerlink" title="鼠标光标"></a>鼠标光标</h2><p>一些鼠标光标样式，分为常态，悬停和按下三种</p><h2 id="集中线"><a href="#集中线" class="headerlink" title="集中线"></a>集中线</h2><p>一些集中线图像，使用 <code>show/hide</code> 进行 <code>展示/隐藏</code></p><h2 id="精选BGM"><a href="#精选BGM" class="headerlink" title="精选BGM"></a>精选BGM</h2><p>精心挑选的免费BGM，已转换为<code>OGG</code>格式，可放心使用</p><div class="note info modern"><p>感谢<a href="https://www.sentive.net/">sentive</a>创作的免费公共素材</p></div><h2 id="音效"><a href="#音效" class="headerlink" title="音效"></a>音效</h2><p>一些较为常用音效，<code>OGG</code>格式与<code>WAV</code>格式均可使用</p><h1 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a>下载链接</h1><p><a href="https://github.com/lucylcarus/Plug-ins/archive/refs/heads/master.zip">点我下载</a></p>]]></content>
      
      
      <categories>
          
          <category> 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py say界面修改</title>
      <link href="/posts/9312ffd8.html"/>
      <url>/posts/9312ffd8.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文所有配置均位于<code>screns.rpy</code>文件中</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://doc.renpy.cn/zh-CN/screen_actions.html#tooltips">悬停提示</a></p><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1jpykYPEuW&cid=26444760861&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="底部菜单自定义"><a href="#底部菜单自定义" class="headerlink" title="底部菜单自定义"></a>底部菜单自定义</h1><p>打开<code>screens.rpy</code>文件，你会在228行左右看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line"></span><br><span class="line">            xalign <span class="number">0.5</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;回退&quot;</span>) action Rollback()</span><br><span class="line">            textbutton _(<span class="string">&quot;历史&quot;</span>) action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;快进&quot;</span>) action Skip() alternate Skip(fast=<span class="literal">True</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;自动&quot;</span>) action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;保存&quot;</span>) action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">            textbutton _(<span class="string">&quot;快存&quot;</span>) action QuickSave()</span><br><span class="line">            textbutton _(<span class="string">&quot;快读&quot;</span>) action QuickLoad()</span><br><span class="line">            textbutton _(<span class="string">&quot;设置&quot;</span>) action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>这里是游戏内的底部菜单，也可以称为快捷菜单，我们对该界面的修改基本只是将<code>textbutton</code>替换为<code>imagebutton</code>，<code>action</code>行为可以不用修改，下面给出示例代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line">            <span class="comment">#存档按钮</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/save.png&quot;</span></span><br><span class="line">                <span class="comment">#可自行添加hover等属性</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">            <span class="comment">#读档按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/load.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;load&#x27;</span>)</span><br><span class="line">            <span class="comment">#快速存档    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qsave.png&quot;</span></span><br><span class="line">                action QuickSave()</span><br><span class="line">            <span class="comment">#快速读档    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qload.png&quot;</span></span><br><span class="line">                action QuickLoad()</span><br><span class="line">            <span class="comment">#设置按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                yoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;gui/set.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">            <span class="comment">#自动按钮</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/auto.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">            <span class="comment">#快进按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/skip.png&quot;</span></span><br><span class="line">                action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">            <span class="comment">#历史按钮   </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/his.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">            <span class="comment">#隐藏对话框和底部菜单按钮    </span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/hide.png&quot;</span></span><br><span class="line">                action Call(<span class="string">&quot;_hide_windows&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line">                </span><br></pre></td></tr></table></figure><br>相比于源代码，我们添加了隐藏对话框和底部菜单的按钮，删除了用处不大的回退功能，并优化了底部菜单的位置和间距等属性</p><h1 id="底部菜单优化"><a href="#底部菜单优化" class="headerlink" title="底部菜单优化"></a>底部菜单优化</h1><h2 id="悬停提示"><a href="#悬停提示" class="headerlink" title="悬停提示"></a>悬停提示</h2><p>其实到上一步我们的自定义就已经做的差不多了，但我们还可以做一些悬停提示的优化，使用<code>tooltip</code>我们可以很轻松地达到该效果，示例代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/save.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/load.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;load&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qsave.png&quot;</span></span><br><span class="line">                action QuickSave()</span><br><span class="line">                tooltip <span class="string">&quot;快速存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qload.png&quot;</span></span><br><span class="line">                action QuickLoad()</span><br><span class="line">                tooltip <span class="string">&quot;快速读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                yoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;gui/set.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;设置&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/auto.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;自动&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/skip.png&quot;</span></span><br><span class="line">                action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">                tooltip <span class="string">&quot;快进&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/his.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;回顾&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/hide.png&quot;</span></span><br><span class="line">                action Call(<span class="string">&quot;_hide_windows&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;隐藏对话框&quot;</span></span><br><span class="line"></span><br><span class="line">            $ tooltip = GetTooltip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> tooltip:</span><br><span class="line"></span><br><span class="line">        nearrect:</span><br><span class="line">            focus <span class="string">&quot;tooltip&quot;</span></span><br><span class="line">            prefer_top <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">            frame:</span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                text tooltip</span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br></pre></td></tr></table></figure></p><h2 id="美化-amp-动画"><a href="#美化-amp-动画" class="headerlink" title="美化&amp;动画"></a>美化&amp;动画</h2><p>虽然最后呈现的效果是不错，但默认效果还是有点太过单调，同时，快进按钮没有区分可用/不可用状态，我们稍微修改一下代码，优化一下表现效果，代码示例如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 快捷菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 快捷菜单显示于游戏内，以便于访问游戏外的菜单。</span></span><br><span class="line"></span><br><span class="line">screen quick_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 确保该菜单出现在其他屏幕之上，</span></span><br><span class="line">    zorder <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> quick_menu:</span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            style_prefix <span class="string">&quot;quick&quot;</span></span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line">            xalign <span class="number">0.8</span></span><br><span class="line">            yalign <span class="number">1.0</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/save.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;save&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/load.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;load&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qsave.png&quot;</span></span><br><span class="line">                action QuickSave()</span><br><span class="line">                tooltip <span class="string">&quot;快速存档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/qload.png&quot;</span></span><br><span class="line">                action QuickLoad()</span><br><span class="line">                tooltip <span class="string">&quot;快速读档&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                yoffset -<span class="number">5</span></span><br><span class="line">                idle <span class="string">&quot;gui/set.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;preferences&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;设置&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/auto.png&quot;</span></span><br><span class="line">                action Preference(<span class="string">&quot;auto-forward&quot;</span>, <span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;自动&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/skip.png&quot;</span></span><br><span class="line">                insensitive <span class="string">&quot;gui/skip_off.png&quot;</span><span class="comment">#修改图像，将其不透明度改为50%</span></span><br><span class="line">                action Skip() alternate Skip(fast=<span class="literal">False</span>, confirm=<span class="literal">True</span>)</span><br><span class="line">                tooltip <span class="string">&quot;快进&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/his.png&quot;</span></span><br><span class="line">                action ShowMenu(<span class="string">&#x27;history&#x27;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;回顾&quot;</span></span><br><span class="line">            imagebutton:</span><br><span class="line">                idle <span class="string">&quot;gui/hide.png&quot;</span></span><br><span class="line">                action Call(<span class="string">&quot;_hide_windows&quot;</span>)</span><br><span class="line">                tooltip <span class="string">&quot;隐藏对话框&quot;</span></span><br><span class="line"></span><br><span class="line">            $ tooltip = GetTooltip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> tooltip:</span><br><span class="line"></span><br><span class="line">        nearrect:</span><br><span class="line">            focus <span class="string">&quot;tooltip&quot;</span></span><br><span class="line">            prefer_top <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">            frame:</span><br><span class="line">                background <span class="literal">None</span></span><br><span class="line">                xalign <span class="number">0.5</span></span><br><span class="line">                text tooltip at tip size <span class="number">25</span> color <span class="string">&quot;#fff&quot;</span> outlines [(<span class="number">2</span>,<span class="string">&quot;#35ceff&quot;</span>,<span class="number">0</span>,<span class="number">0</span>)] </span><br><span class="line">            </span><br><span class="line">transform tip:</span><br><span class="line">    yoffset <span class="number">10</span></span><br><span class="line">    alpha <span class="number">0.0</span></span><br><span class="line">    parallel:</span><br><span class="line">        easein <span class="number">0.5</span> yoffset <span class="number">5</span></span><br><span class="line">    parallel:</span><br><span class="line">        easein <span class="number">0.5</span> alpha <span class="number">1.0</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">## 此代码确保只要用户没有主动隐藏界面，就会在游戏中显示 quick_menu 屏幕。</span></span><br><span class="line">init python:</span><br><span class="line">    config.overlay_screens.append(<span class="string">&quot;quick_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line">default quick_menu = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style quick_button <span class="keyword">is</span> default</span><br><span class="line">style quick_button_text <span class="keyword">is</span> button_text</span><br><span class="line"></span><br><span class="line">style quick_button:</span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style quick_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;quick_button&quot;</span>)</span><br></pre></td></tr></table></figure></p><h1 id="对话框-textbox-和姓名框-namebox"><a href="#对话框-textbox-和姓名框-namebox" class="headerlink" title="对话框(textbox)和姓名框(namebox)"></a>对话框(textbox)和姓名框(namebox)</h1><p>打开<code>gui</code>文件夹，我们可以在这里看到对话框<code>textbox</code>和姓名框<code>namebox</code>两张图像，建议先拷贝一份留作备用，将我们的素材导入该文件夹进行同名替换即可</p><h2 id="问题1-对话框尺寸不合适"><a href="#问题1-对话框尺寸不合适" class="headerlink" title="问题1: 对话框尺寸不合适"></a>问题1: 对话框尺寸不合适</h2><p>解答：请鼠标右击-&gt;属性，修改对话框分辨率，建议与原对话框尺寸保持一致</p><h2 id="问题2-姓名框表现效果不佳"><a href="#问题2-姓名框表现效果不佳" class="headerlink" title="问题2: 姓名框表现效果不佳"></a>问题2: 姓名框表现效果不佳</h2><p>解答: 修改<code>namebox</code>的样式和<code>text</code>显示位置</p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>以我的代码为例，你可以在<code>screens.rpy</code>文件的85行左右看到相关代码，修改后代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">## 游戏内屏幕</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 对话屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 对话屏幕用于向用户显示对话。它需要两个参数，who 和 what，分别是叙述角色的名字</span></span><br><span class="line"><span class="comment">## 和所叙述的文本。（如果没有名字，参数 who 可以是 None。）</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 此屏幕必须创建一个 id 为 what 的文本可视控件，因为 Ren&#x27;Py 使用它来管理文本显</span></span><br><span class="line"><span class="comment">## 示。它还可以创建 id 为 who 和 id 为 window 的可视控件来应用样式属性。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://www.renpy.cn/doc/screen_special.html#say</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">screen say(who, what):</span><br><span class="line">    style_prefix <span class="string">&quot;say&quot;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    window:</span><br><span class="line">        <span class="built_in">id</span> <span class="string">&quot;window&quot;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> who <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">            window:</span><br><span class="line">                <span class="built_in">id</span> <span class="string">&quot;namebox&quot;</span></span><br><span class="line">                style <span class="string">&quot;namebox&quot;</span></span><br><span class="line">                text who <span class="built_in">id</span> <span class="string">&quot;who&quot;</span> xoffset <span class="number">45</span> yoffset -<span class="number">8</span> </span><br><span class="line">                <span class="comment">#由于角色名字会从namebox的左上角展示，为让其适应namebox的表现效果，对文字进行位置调整</span></span><br><span class="line">        </span><br><span class="line">        text what <span class="built_in">id</span> <span class="string">&quot;what&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 如果有对话框头像，会将其显示在文本之上。请不要在手机界面下显示这个，因为</span></span><br><span class="line">    <span class="comment">## 没有空间。</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> renpy.variant(<span class="string">&quot;small&quot;</span>):</span><br><span class="line">        add SideImage() xalign <span class="number">0.0</span> yalign <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 通过 Character 对象使名称框可用于样式化。</span></span><br><span class="line">init python:</span><br><span class="line">    config.character_id_prefixes.append(<span class="string">&#x27;namebox&#x27;</span>)</span><br><span class="line"></span><br><span class="line">style window <span class="keyword">is</span> default</span><br><span class="line">style say_label <span class="keyword">is</span> default</span><br><span class="line">style say_dialogue <span class="keyword">is</span> default</span><br><span class="line">style say_thought <span class="keyword">is</span> say_dialogue</span><br><span class="line"></span><br><span class="line">style namebox <span class="keyword">is</span> default</span><br><span class="line">style namebox_label <span class="keyword">is</span> say_label</span><br><span class="line"></span><br><span class="line"><span class="comment">#对话框样式</span></span><br><span class="line">style window:</span><br><span class="line">    xalign <span class="number">0.5</span></span><br><span class="line">    xfill <span class="literal">True</span></span><br><span class="line">    yalign gui.textbox_yalign</span><br><span class="line">    ysize gui.textbox_height</span><br><span class="line"></span><br><span class="line">    background Image(<span class="string">&quot;gui/textbox.png&quot;</span>, xalign=<span class="number">0.5</span>, yalign=<span class="number">1.0</span>)</span><br><span class="line"><span class="comment">#姓名框样式</span></span><br><span class="line"><span class="comment">#由于namebox的pos被占用，我们使用offest来调整namebox的位置，同时将namebox的size改为固定，防止其自适应角色名字长短变化</span></span><br><span class="line">style namebox:</span><br><span class="line">    xpos gui.name_xpos</span><br><span class="line">    xanchor gui.name_xalign</span><br><span class="line">    xsize <span class="number">238</span></span><br><span class="line">    ypos gui.name_ypos</span><br><span class="line">    yoffset -<span class="number">60</span></span><br><span class="line">    ysize <span class="number">72</span></span><br><span class="line"></span><br><span class="line">    background Frame(<span class="string">&quot;gui/namebox.png&quot;</span>, gui.namebox_borders, tile=gui.namebox_tile, xalign=gui.name_xalign)</span><br><span class="line">    padding gui.namebox_borders.padding</span><br><span class="line"></span><br><span class="line">style say_label:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;name&quot;</span>, accent=<span class="literal">True</span>)</span><br><span class="line">    xalign gui.name_xalign</span><br><span class="line">    yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">style say_dialogue:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;dialogue&quot;</span>)</span><br><span class="line"></span><br><span class="line">    xpos gui.dialogue_xpos</span><br><span class="line">    xsize gui.dialogue_width</span><br><span class="line">    ypos gui.dialogue_ypos</span><br><span class="line"></span><br><span class="line">    adjust_spacing <span class="literal">False</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL语法使用(三)</title>
      <link href="/posts/4921db1e.html"/>
      <url>/posts/4921db1e.html</url>
      
        <content type="html"><![CDATA[<h1 id="单关系数据查询"><a href="#单关系数据查询" class="headerlink" title="单关系数据查询"></a>单关系数据查询</h1><h2 id="单关系数据查询结构"><a href="#单关系数据查询结构" class="headerlink" title="单关系数据查询结构"></a>单关系数据查询结构</h2><p>数据查询是数据库中最常用的操作。SQL提供<code>SELECT</code>语句，用户通过查询操作可得到所需的信息<br>关系表的<code>SELECT</code>语句一般语法如下<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>] <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">AS</span> 别名] [&#123;,<span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">AS</span> 别名]&#125;]</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [[<span class="keyword">AS</span>] 表别名]</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>检索条件<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]]</span><br><span class="line">[LIMIT子句]</span><br></pre></td></tr></table></figure><br><code>SELECT</code>子句从列的角度进行投影操作，指定要在查询结果中显示的字段名。用户也可以用关键字<code>AS</code>为字段名指定别名<br>关键字<code>ALL</code>表示所有元组，关键字<code>DISTINCT</code>表示消除查询结果中的重复元组<br><code>FROM</code>子句指定要查询的表明或视图名，如果有多个，应用逗号隔开<br><code>WHERE</code>子句从行的角度进行选取操作，只有满足条件的元组才会出现在查询结果中<br><code>GROUP BY</code>子句将查询结果按照其后的<code>&lt;字段名&gt;</code>的值进行分组<br><code>HAVING</code>子句不能单据存在，必须跟在<code>GROUP BY</code>子句后面<br><code>ORDER BY</code>子句用于对查询结果进行排序，<code>ASC</code>为升序，<code>DESC</code>为降序<br><code>LIMIT</code>子句限制查询结果行数</p><h2 id="无条件查询"><a href="#无条件查询" class="headerlink" title="无条件查询"></a>无条件查询</h2><p>无条件查询只包含<code>SELECT……FROM……</code>语句</p><h3 id="查询表中指定字段名"><a href="#查询表中指定字段名" class="headerlink" title="查询表中指定字段名"></a>查询表中指定字段名</h3><blockquote><p>例:查询student表中学生姓名<br>SELECT sname AS 学生姓名<br>FROM student;</p></blockquote><h3 id="查询表中全部字段名"><a href="#查询表中全部字段名" class="headerlink" title="查询表中全部字段名"></a>查询表中全部字段名</h3><blockquote><p>例:查询student表中全部字段名<br>SELECT *<br>FROM student;</p></blockquote><h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p>条件查询需要用到<code>WHERE</code>子句指定查询条件<br>查询条件中，字段名与字段名之间，或字段名与常数之间，通常使用比较运算符连接<br>常用比较运算符如下</p><div class="table-container"><table><thead><tr><th>运算符</th><th>含义</th></tr></thead><tbody><tr><td>=、&gt;、&lt;、&gt;=、&lt;=、!=、&lt;&gt;</td><td>比较大小</td></tr><tr><td>AND、OR、NOT</td><td>多重条件</td></tr><tr><td>BETWEEN AND、NOT BETWEEN AND</td><td>确定范围</td></tr><tr><td>IN、NOT IN</td><td>确定集合</td></tr><tr><td>LIKE、NOT LIKE</td><td>字符匹配</td></tr><tr><td>IS NULL、IS NOT NULL</td><td>空值</td></tr></tbody></table></div><div class="note info modern"><p>比较大小中<code>!=</code>和<code>&lt;&gt;</code>表示不等于<br>多重条件中，<code>AND</code>可表示为<code>&amp;&amp;</code>，<code>OR</code>可表示为<code>||</code>，<code>NOT</code>可表示为<code>!</code></p></div><h3 id="比较大小"><a href="#比较大小" class="headerlink" title="比较大小"></a>比较大小</h3><blockquote><p>例:查询student表中已成年学生<br>SELECT *<br>FROM student<br>WHERE age&gt;=18;</p></blockquote><h3 id="多重条件"><a href="#多重条件" class="headerlink" title="多重条件"></a>多重条件</h3><blockquote><p>例:查询student表中已成年且性别为女的学生<br>SELECT *<br>FROM student<br>WHERE age&gt;=18 AND sex=”女”;</p></blockquote><h3 id="确定范围"><a href="#确定范围" class="headerlink" title="确定范围"></a>确定范围</h3><blockquote><p>例:查询student表中年龄段在18-20的学生<br>SELECT *<br>FROM student<br>WHERE age EBETWEEN 18 AND 20;</p></blockquote><h3 id="确定集合"><a href="#确定集合" class="headerlink" title="确定集合"></a>确定集合</h3><blockquote><p>例:查询student表中所学专业为计算机的学生<br>SELECT *<br>FROM student<br>WHERE major=”计算机”;</p></blockquote><h3 id="字符匹配"><a href="#字符匹配" class="headerlink" title="字符匹配"></a>字符匹配</h3><p>利用通配符，可以进行模糊查询<br>常用通配符如下</p><div class="table-container"><table><thead><tr><th>通配符</th><th>功能</th></tr></thead><tbody><tr><td>%</td><td>代表0个或多个字符</td></tr><tr><td>_</td><td>代表一个字符</td></tr><tr><td>[ ]</td><td>表示在某一范围的字符</td></tr><tr><td>[^]</td><td>表示不在某一范围的字符</td></tr></tbody></table></div><blockquote><p>例:查询student表中学号带有数字7的学生<br>SELECT *<br>FROM student<br>WHERE sno LIKE “%7%”;</p></blockquote><h3 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h3><blockquote><p>例:查询student表中未选定专业的学生<br>SELECT *<br>FROM student<br>WHERE major IS NULL;</p></blockquote><h2 id="聚合函数查询"><a href="#聚合函数查询" class="headerlink" title="聚合函数查询"></a>聚合函数查询</h2><p>SQL提供了许多使用的聚合函数，常用聚合函数如下</p><div class="table-container"><table><thead><tr><th>函数名称</th><th>功能</th></tr></thead><tbody><tr><td>AVG</td><td>按列计算平均值</td></tr><tr><td>SUM</td><td>按列计算值的总和</td></tr><tr><td>MAX</td><td>求一列中的最大值</td></tr><tr><td>MIN</td><td>求一列中的最小值</td></tr><tr><td>COUNT</td><td>按列值统计个数</td></tr></tbody></table></div><blockquote><p>例:查询student表中年龄最小的学生<br>SELECT MIN(age)<br>FROM student;</p></blockquote><h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><blockquote><p>例:查询student表中已成年的学生，按性别分组<br>SELECT *<br>FROM student<br>WHERE age&gt;=18<br>GROUP BY sex;</p></blockquote><h2 id="查询结果排序"><a href="#查询结果排序" class="headerlink" title="查询结果排序"></a>查询结果排序</h2><blockquote><p>例:查询student表中已成年的学生，按年龄大小降序排列<br>SELECT *<br>FROM student<br>WHERE age&gt;=18<br>ORDER BY age DESC;</p></blockquote><h2 id="限制查询结果数量"><a href="#限制查询结果数量" class="headerlink" title="限制查询结果数量"></a>限制查询结果数量</h2><blockquote><p>例:查询student表中已成年的学生，按年龄大小降序排列，只显示前三人<br>SELECT *<br>FROM student<br>WHERE age&gt;=18<br>ORDER BY age DESC<br>LIMIT 3;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 标题菜单界面</title>
      <link href="/posts/e6e80026.html"/>
      <url>/posts/e6e80026.html</url>
      
        <content type="html"><![CDATA[<p><strong>本文主要修改的文件为<code>screens.rpy</code>，次要修改文件为<code>gui.rpy</code>以及<code>script.rpy</code></strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://zhuanlan.zhihu.com/p/346838182">被诅咒的章鱼大佬的Ren’py教程</a></p><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1QryAYmE6C&cid=26326863249&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="背景图修改"><a href="#背景图修改" class="headerlink" title="背景图修改"></a>背景图修改</h1><p>打开<code>gui.rpy</code>，在86行左右可以看到标题菜单界面，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 标题和游戏菜单 #####################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标题菜单和游戏菜单使用的图像。</span></span><br><span class="line">define gui.main_menu_background = <span class="string">&quot;gui/main_menu.png&quot;</span></span><br><span class="line">define gui.game_menu_background = <span class="string">&quot;gui/game_menu.png&quot;</span></span><br></pre></td></tr></table></figure><br>打开<code>screens.rpy</code>,在335行左右可以看到如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 标题菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 用于在 Ren&#x27;Py 启动时显示标题菜单。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## https://www.renpy.cn/doc/screen_special.html#main-menu</span></span><br><span class="line"></span><br><span class="line">screen main_menu():</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 此语句可确保替换掉任何其他菜单屏幕。</span></span><br><span class="line">    tag menu</span><br><span class="line"></span><br><span class="line">    add gui.main_menu_background</span><br><span class="line"></span><br><span class="line">    <span class="comment">## 此空框可使标题菜单变暗。</span></span><br><span class="line">    frame:</span><br><span class="line">        style <span class="string">&quot;main_menu_frame&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## use 语句将其他的屏幕包含进此屏幕。标题屏幕的实际内容在导航屏幕中。</span></span><br><span class="line">    use navigation</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> gui.show_name:</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            style <span class="string">&quot;main_menu_vbox&quot;</span></span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;[config.name!t]&quot;</span>:</span><br><span class="line">                style <span class="string">&quot;main_menu_title&quot;</span></span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;[config.version]&quot;</span>:</span><br><span class="line">                style <span class="string">&quot;main_menu_version&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style main_menu_frame <span class="keyword">is</span> empty</span><br><span class="line">style main_menu_vbox <span class="keyword">is</span> vbox</span><br><span class="line">style main_menu_text <span class="keyword">is</span> gui_text</span><br><span class="line">style main_menu_title <span class="keyword">is</span> main_menu_text</span><br><span class="line">style main_menu_version <span class="keyword">is</span> main_menu_text</span><br><span class="line"></span><br><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    background <span class="string">&quot;gui/overlay/main_menu.png&quot;</span></span><br><span class="line"></span><br><span class="line">style main_menu_vbox:</span><br><span class="line">    xalign <span class="number">1.0</span></span><br><span class="line">    xoffset -<span class="number">30</span></span><br><span class="line">    xmaximum <span class="number">1200</span></span><br><span class="line">    yalign <span class="number">1.0</span></span><br><span class="line">    yoffset -<span class="number">30</span></span><br><span class="line"></span><br><span class="line">style main_menu_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;main_menu&quot;</span>, accent=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">style main_menu_title:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;title&quot;</span>)</span><br><span class="line"></span><br><span class="line">style main_menu_version:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;version&quot;</span>)</span><br></pre></td></tr></table></figure><br>另外在<code>screens.rpy</code>文件中,在396行左右可以看到游戏菜单界面，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 游戏菜单屏幕 ######################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 此屏幕列出了游戏菜单的基本共同结构。可使用屏幕标题调用，并显示背景、标题和导</span></span><br><span class="line"><span class="comment">## 航菜单。</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## scroll 参数可以是 None，也可以是 viewport 或 vpgrid。此屏幕旨在与一个或多个子</span></span><br><span class="line"><span class="comment">## 屏幕同时使用，这些子屏幕将被嵌入（放置）在其中。</span></span><br><span class="line"></span><br><span class="line">screen game_menu(title, scroll=<span class="literal">None</span>, yinitial=<span class="number">0.0</span>, spacing=<span class="number">0</span>):</span><br><span class="line"></span><br><span class="line">    style_prefix <span class="string">&quot;game_menu&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> main_menu:</span><br><span class="line">        add gui.main_menu_background</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        add gui.game_menu_background</span><br><span class="line"></span><br><span class="line">    frame:</span><br><span class="line">        style <span class="string">&quot;game_menu_outer_frame&quot;</span></span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 导航部分的预留空间。</span></span><br><span class="line">            frame:</span><br><span class="line">                style <span class="string">&quot;game_menu_navigation_frame&quot;</span></span><br><span class="line"></span><br><span class="line">            frame:</span><br><span class="line">                style <span class="string">&quot;game_menu_content_frame&quot;</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> scroll == <span class="string">&quot;viewport&quot;</span>:</span><br><span class="line"></span><br><span class="line">                    viewport:</span><br><span class="line">                        yinitial yinitial</span><br><span class="line">                        scrollbars <span class="string">&quot;vertical&quot;</span></span><br><span class="line">                        mousewheel <span class="literal">True</span></span><br><span class="line">                        draggable <span class="literal">True</span></span><br><span class="line">                        pagekeys <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        side_yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        vbox:</span><br><span class="line">                            spacing spacing</span><br><span class="line"></span><br><span class="line">                            transclude</span><br><span class="line"></span><br><span class="line">                <span class="keyword">elif</span> scroll == <span class="string">&quot;vpgrid&quot;</span>:</span><br><span class="line"></span><br><span class="line">                    vpgrid:</span><br><span class="line">                        cols <span class="number">1</span></span><br><span class="line">                        yinitial yinitial</span><br><span class="line"></span><br><span class="line">                        scrollbars <span class="string">&quot;vertical&quot;</span></span><br><span class="line">                        mousewheel <span class="literal">True</span></span><br><span class="line">                        draggable <span class="literal">True</span></span><br><span class="line">                        pagekeys <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        side_yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                        spacing spacing</span><br><span class="line"></span><br><span class="line">                        transclude</span><br><span class="line"></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">                    transclude</span><br><span class="line"></span><br><span class="line">    use navigation</span><br><span class="line"></span><br><span class="line">    textbutton _(<span class="string">&quot;返回&quot;</span>):</span><br><span class="line">        style <span class="string">&quot;return_button&quot;</span></span><br><span class="line"></span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line">    label title</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> main_menu:</span><br><span class="line">        key <span class="string">&quot;game_menu&quot;</span> action ShowMenu(<span class="string">&quot;main_menu&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style game_menu_outer_frame <span class="keyword">is</span> empty</span><br><span class="line">style game_menu_navigation_frame <span class="keyword">is</span> empty</span><br><span class="line">style game_menu_content_frame <span class="keyword">is</span> empty</span><br><span class="line">style game_menu_viewport <span class="keyword">is</span> gui_viewport</span><br><span class="line">style game_menu_side <span class="keyword">is</span> gui_side</span><br><span class="line">style game_menu_scrollbar <span class="keyword">is</span> gui_vscrollbar</span><br><span class="line"></span><br><span class="line">style game_menu_label <span class="keyword">is</span> gui_label</span><br><span class="line">style game_menu_label_text <span class="keyword">is</span> gui_label_text</span><br><span class="line"></span><br><span class="line">style return_button <span class="keyword">is</span> navigation_button</span><br><span class="line">style return_button_text <span class="keyword">is</span> navigation_button_text</span><br><span class="line"></span><br><span class="line">style game_menu_outer_frame:</span><br><span class="line">    bottom_padding <span class="number">45</span></span><br><span class="line">    top_padding <span class="number">180</span></span><br><span class="line"></span><br><span class="line">    background <span class="string">&quot;gui/overlay/game_menu.png&quot;</span></span><br><span class="line"></span><br><span class="line">style game_menu_navigation_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">style game_menu_content_frame:</span><br><span class="line">    left_margin <span class="number">60</span></span><br><span class="line">    right_margin <span class="number">30</span></span><br><span class="line">    top_margin <span class="number">15</span></span><br><span class="line"></span><br><span class="line">style game_menu_viewport:</span><br><span class="line">    xsize <span class="number">1380</span></span><br><span class="line"></span><br><span class="line">style game_menu_vscrollbar:</span><br><span class="line">    unscrollable gui.unscrollable</span><br><span class="line"></span><br><span class="line">style game_menu_side:</span><br><span class="line">    spacing <span class="number">15</span></span><br><span class="line"></span><br><span class="line">style game_menu_label:</span><br><span class="line">    xpos <span class="number">75</span></span><br><span class="line">    ysize <span class="number">180</span></span><br><span class="line"></span><br><span class="line">style game_menu_label_text:</span><br><span class="line">    size gui.title_text_size</span><br><span class="line">    color gui.accent_color</span><br><span class="line">    yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">style return_button:</span><br><span class="line">    xpos gui.navigation_xpos</span><br><span class="line">    yalign <span class="number">1.0</span></span><br><span class="line">    yoffset -<span class="number">45</span></span><br></pre></td></tr></table></figure></p><div class="note info modern"><p><code>screens.rpy</code>文件中，<code>style</code>的部分为样式，一般情况下我们不需要修改，如需修改，会特别指示</p></div><p>对比两个文件，我们可以发现<code>gui.rpy</code>文件中的两句代码对应<code>screens.rpy</code>文件中如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#标题菜单界面</span></span><br><span class="line">add gui.main_menu_background</span><br><span class="line"><span class="comment">#游戏菜单界面</span></span><br><span class="line"><span class="keyword">if</span> main_menu:</span><br><span class="line">        add gui.main_menu_background</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        add gui.game_menu_background</span><br></pre></td></tr></table></figure><br>由此我们可以了解到，<code>define gui.main_menu_background = &quot;gui/main_menu.png&quot;</code>为标题界面背景，<code>define gui.game_menu_background = &quot;gui/game_menu.png&quot;</code>为游戏菜单背景，不过，在游戏菜单界面中，还加了当前界面的判断语句，如果是标题菜单界面就展示标题菜单背景，否则就展示游戏菜单界面</p><div class="note warning modern"><p>一般情况下，我们会为各个界面设定单独的背景图，所以游戏菜单界面功能用处不大，当然，如果想设定一致背景图，该功能还是很方便的</p></div><p>我们打开其所对应的文件夹，可以看到两张图片是一样的<br><img src="https://www.helloimg.com/i/2024/11/19/673c17d82b89c.png" alt=""><br>修改代码指向文件，如下所示<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define gui.main_menu_background = <span class="string">&quot;gui/main.png&quot;</span></span><br><span class="line"></span><br><span class="line">define gui.game_menu_background = <span class="string">&quot;gui/game.png&quot;</span></span><br></pre></td></tr></table></figure><br><img src="https://www.helloimg.com/i/2024/11/19/673c182b3fed5.png" alt=""><br>运行游戏，可以发现背景图已经更换<br><img src="https://www.helloimg.com/i/2024/11/19/673c19e13d8b3.png" alt=""><br>但我们可以发现，游戏的侧边栏会遮挡部分背景图，让视觉体验大打折扣，这时我们继续查看<code>screens.rpy</code>文件中有关标题菜单界面的代码，可以发现在该样式中，额外添加了<code>background</code>属性<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    background <span class="string">&quot;gui/overlay/main_menu.png&quot;</span></span><br></pre></td></tr></table></figure><br>我们打开其所指定文件夹，即可发现问题所在<br><img src="https://www.helloimg.com/i/2024/11/19/673c1a1fc8f0d.png" alt=""><br>将该样式中的<code>background</code>属性改为<code>None</code>或直接删除该行代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    background <span class="literal">None</span></span><br><span class="line"><span class="comment">######或改成如下样式</span></span><br><span class="line">style main_menu_frame:</span><br><span class="line">    xsize <span class="number">420</span></span><br><span class="line">    yfill <span class="literal">True</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br>再次运行游戏，即可发现侧边栏消失了</p><p><img src="https://www.helloimg.com/i/2024/11/19/673c7a2bbec0a.png" alt=""></p><h1 id="按钮按键修改"><a href="#按钮按键修改" class="headerlink" title="按钮按键修改"></a>按钮按键修改</h1><p>该部分比较简单，如果想轻松点可以直接修改<code>screens.rpy</code>文件中280行左右代码，也就是navigation，导航菜单界面，代码如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 导航屏幕 ########################################################################</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 该屏幕包含在标题菜单和游戏菜单中，并提供导航到其他菜单，以及启动游戏。</span></span><br><span class="line"></span><br><span class="line">screen navigation():</span><br><span class="line"></span><br><span class="line">    vbox:</span><br><span class="line">        style_prefix <span class="string">&quot;navigation&quot;</span></span><br><span class="line"></span><br><span class="line">        xpos gui.navigation_xpos</span><br><span class="line">        yalign <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">        spacing gui.navigation_spacing</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> main_menu:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;开始游戏&quot;</span>) action Start()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;历史&quot;</span>) action ShowMenu(<span class="string">&quot;history&quot;</span>)</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;保存&quot;</span>) action ShowMenu(<span class="string">&quot;save&quot;</span>)</span><br><span class="line"></span><br><span class="line">        textbutton _(<span class="string">&quot;读取游戏&quot;</span>) action ShowMenu(<span class="string">&quot;load&quot;</span>)</span><br><span class="line"></span><br><span class="line">        textbutton _(<span class="string">&quot;设置&quot;</span>) action ShowMenu(<span class="string">&quot;preferences&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> _in_replay:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;结束回放&quot;</span>) action EndReplay(confirm=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> <span class="keyword">not</span> main_menu:</span><br><span class="line"></span><br><span class="line">            textbutton _(<span class="string">&quot;标题菜单&quot;</span>) action MainMenu()</span><br><span class="line"></span><br><span class="line">        textbutton _(<span class="string">&quot;关于&quot;</span>) action ShowMenu(<span class="string">&quot;about&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.variant(<span class="string">&quot;pc&quot;</span>) <span class="keyword">or</span> (renpy.variant(<span class="string">&quot;web&quot;</span>) <span class="keyword">and</span> <span class="keyword">not</span> renpy.variant(<span class="string">&quot;mobile&quot;</span>)):</span><br><span class="line"></span><br><span class="line">            <span class="comment">## “帮助”对移动设备来说并非必需或相关。</span></span><br><span class="line">            textbutton _(<span class="string">&quot;帮助&quot;</span>) action ShowMenu(<span class="string">&quot;help&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> renpy.variant(<span class="string">&quot;pc&quot;</span>):</span><br><span class="line"></span><br><span class="line">            <span class="comment">## 退出按钮在 iOS 上是被禁止使用的，在安卓和网页上也不是必要的。</span></span><br><span class="line">            textbutton _(<span class="string">&quot;退出&quot;</span>) action Quit(confirm=<span class="keyword">not</span> main_menu)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">style navigation_button <span class="keyword">is</span> gui_button</span><br><span class="line">style navigation_button_text <span class="keyword">is</span> gui_button_text</span><br><span class="line"></span><br><span class="line">style navigation_button:</span><br><span class="line">    size_group <span class="string">&quot;navigation&quot;</span></span><br><span class="line">    properties gui.button_properties(<span class="string">&quot;navigation_button&quot;</span>)</span><br><span class="line"></span><br><span class="line">style navigation_button_text:</span><br><span class="line">    properties gui.text_properties(<span class="string">&quot;navigation_button&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>基本上将<code>textbutton</code>更改为<code>imagebutton</code>即可，位置、大小、间距和横竖排列请自行更改<br>如果想更贴合标题背景，推荐删除标题菜单界面如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## use 语句将其他的屏幕包含进此屏幕。标题屏幕的实际内容在导航屏幕中。</span></span><br><span class="line">use navigation</span><br></pre></td></tr></table></figure><br>之后添加按钮代码，action行为可以从navigation界面获取，代码参考如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">hbox:</span><br><span class="line">    align (<span class="number">0.2</span>, <span class="number">0.85</span>)</span><br><span class="line">    spacing <span class="number">50</span></span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/new_game.png&quot;</span></span><br><span class="line">        action Start()</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/load_game.png&quot;</span></span><br><span class="line">        action ShowMenu(<span class="string">&quot;load&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/extra.png&quot;</span></span><br><span class="line">        action ShowMenu(<span class="string">&quot;extra&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/setting.png&quot;</span></span><br><span class="line">        action ShowMenu(<span class="string">&quot;preferences&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/end_game.png&quot;</span></span><br><span class="line">        action Quit(confirm=<span class="keyword">not</span> main_menu)</span><br></pre></td></tr></table></figure><br>表现效果如下<br><img src="https://www.helloimg.com/i/2024/11/19/673c7b214e73c.png" alt=""></p><h1 id="背景图切换"><a href="#背景图切换" class="headerlink" title="背景图切换"></a>背景图切换</h1><p>一般情况下，GALGAME的标题背景图会随游戏内容的推进而切换，在Ren’py中，我们可以使用解锁画廊的条件，也就是<code>persistent.unlock</code>达到该效果<br>在<code>script.rpy</code>文件中添加如下代码初始化<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_1 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_1 ==<span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_2 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_2 ==<span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_3 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_3 ==<span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_4 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_4 ==<span class="literal">False</span></span><br></pre></td></tr></table></figure><br>之后在结局内添加如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局一</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局二</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局三</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span> <span class="comment">#结局四</span></span><br></pre></td></tr></table></figure><br>通常情况下，标题界面的背景图在更换后不会切换回原背景图，我们需要修改如下代码<br><code>gui.rpy</code>文件中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define gui.main_menu_background = <span class="string">&quot;gui/main.png&quot;</span></span><br><span class="line">define gui.main_menu_background1 = <span class="string">&quot;gui/main1.png&quot;</span></span><br><span class="line">define gui.main_menu_background2 = <span class="string">&quot;gui/main2.png&quot;</span></span><br><span class="line">define gui.main_menu_background3 = <span class="string">&quot;gui/main3.png&quot;</span></span><br></pre></td></tr></table></figure><br><code>screens.rpy</code>文件中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> persistent.unlock_1:</span><br><span class="line">    add gui.main_menu_background1</span><br><span class="line"><span class="keyword">elif</span> persistent.unlock_2:</span><br><span class="line">    add gui.main_menu_background2</span><br><span class="line"><span class="keyword">elif</span> persistent.unlock_3:</span><br><span class="line">    add gui.main_menu_background3</span><br><span class="line"><span class="keyword">elif</span> persistent.unlock_4:</span><br><span class="line">    add gui.main_menu_background4</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    add gui.main_menu_background</span><br></pre></td></tr></table></figure><br>如果你想恢复原背景图，可以使用如下代码<br><code>script.rpy</code>文件中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入新游戏，中途返回即可恢复原背景图</span></span><br><span class="line"></span><br><span class="line">label start:</span><br><span class="line">    <span class="comment">#清空持久化数据</span></span><br><span class="line">    $ persistent._clear(progress=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">####更推荐使用如下代码</span></span><br><span class="line">label start:</span><br><span class="line">    <span class="comment">#将解锁条件改为false，解锁条件不可与画廊解锁条件一致</span></span><br><span class="line">    $ persistent.unlock_1 =<span class="literal">False</span></span><br><span class="line">    $ persistent.unlock_2 =<span class="literal">False</span></span><br><span class="line">    $ persistent.unlock_3 =<span class="literal">False</span></span><br><span class="line">    $ persistent.unlock_4 =<span class="literal">False</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><div class="note danger modern"><p><code>persistent._clear(progress=True)</code><br>该语句只允许出现在开发阶段</p></div></p><h1 id="动画效果"><a href="#动画效果" class="headerlink" title="动画效果"></a>动画效果</h1><p>使用transform函数，我们可以添加动画效果<br>首先，我们需要定义一个动画效果<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#delay为延迟时间</span></span><br><span class="line">transform main_menu_transform(delay):</span><br><span class="line">    alpha <span class="number">0.0</span></span><br><span class="line">    on start:</span><br><span class="line">        time delay</span><br><span class="line">        easein <span class="number">2.0</span> alpha <span class="number">1.0</span></span><br></pre></td></tr></table></figure><br>之后使用at语句添加动画效果(以按钮为例)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">hbox:</span><br><span class="line">    align (<span class="number">0.2</span>, <span class="number">0.85</span>)</span><br><span class="line">    spacing <span class="number">50</span></span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/new_game.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">0.4</span>)</span><br><span class="line">        action Start()</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/load_game.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">0.8</span>)</span><br><span class="line">        action ShowMenu(<span class="string">&quot;load&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/extra.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">1.2</span>)</span><br><span class="line">        action ShowMenu(<span class="string">&quot;extra&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/setting.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">1.6</span>)</span><br><span class="line">        action ShowMenu(<span class="string">&quot;preferences&quot;</span>)</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&quot;gui/end_game.png&quot;</span></span><br><span class="line">+       at main_menu_transform(<span class="number">2.0</span>)</span><br><span class="line">        action Quit(confirm=<span class="keyword">not</span> main_menu)</span><br></pre></td></tr></table></figure><br><div class="note info modern"><p>+所在行表示所添加的代码</p></div></p><h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1><p><code>screens.rpy</code>文件中，如下代码分别表示游戏名字，版本号<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> gui.show_name:</span><br><span class="line"></span><br><span class="line">    vbox:</span><br><span class="line">        style <span class="string">&quot;main_menu_vbox&quot;</span></span><br><span class="line"></span><br><span class="line">        text <span class="string">&quot;[config.name!t]&quot;</span>:</span><br><span class="line">            style <span class="string">&quot;main_menu_title&quot;</span></span><br><span class="line"></span><br><span class="line">        text <span class="string">&quot;[config.version]&quot;</span>:</span><br><span class="line">            style <span class="string">&quot;main_menu_version&quot;</span></span><br></pre></td></tr></table></figure><br>如果不想显示，可以在<code>options.rpy</code>文件中找到如下代码，并将其改为<code>False</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 决定上面给出的标题是否显示在标题界面屏幕。设置为 False 来隐藏标题。</span></span><br><span class="line"></span><br><span class="line">define gui.show_name = <span class="literal">True</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 鉴赏空间</title>
      <link href="/posts/b576c088.html"/>
      <url>/posts/b576c088.html</url>
      
        <content type="html"><![CDATA[<p><strong>若无特殊说明，默认是在<code>script.rpy</code>文件中进行编写</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>Ren’py官方文档相关链接:</p><ol><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#music-room">音乐空间</a></li><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#image-gallery">画廊</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1ef19YwEAH&cid=26155682972&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><p>之前编写的<code>init python</code>代码，基本不用修改。</p><h2 id="音乐空间相关"><a href="#音乐空间相关" class="headerlink" title="音乐空间相关"></a>音乐空间相关</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#音乐空间背景</span></span><br><span class="line">image music_background:</span><br><span class="line">    <span class="string">&quot;music_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#音乐列表</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="comment">#淡入淡出</span></span><br><span class="line">    mr = MusicRoom(fadein = <span class="number">1.0</span> , fadeout = <span class="number">1.0</span>)</span><br><span class="line">    <span class="comment">#音乐列表，第一个用于主界面bgm，设为默认解锁</span></span><br><span class="line">    mr.add(<span class="string">&quot;bgm01.ogg&quot;</span>,always_unlocked = <span class="literal">True</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多音乐请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#时长参数</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_duration</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        duration = renpy.music.get_duration(channel)</span><br><span class="line">        <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(duration))</span><br><span class="line">        </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_position</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        music_pos = renpy.music.get_pos(channel)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> music_pos:</span><br><span class="line">            <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(music_pos))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;00:00&quot;</span></span><br><span class="line">    <span class="comment">#时间转换</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">convert_format</span>(<span class="params">second</span>):</span><br><span class="line">        minute = second // <span class="number">60</span></span><br><span class="line">        second = second % <span class="number">60</span></span><br><span class="line">        result = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#可用于59分59秒内音乐</span></span><br><span class="line">        <span class="keyword">if</span> minute:</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> minute &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result =<span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result = <span class="built_in">str</span>(minute) + <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                       </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="画廊相关"><a href="#画廊相关" class="headerlink" title="画廊相关"></a>画廊相关</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#画廊/CG鉴赏</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#背景图片</span></span><br><span class="line">image gallery_background:</span><br><span class="line">    <span class="string">&quot;gallery_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#前提条件</span></span><br><span class="line">init python:</span><br><span class="line"></span><br><span class="line">    g = Gallery()</span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;bg&quot;</span>)<span class="comment">#类似于标签</span></span><br><span class="line">    g.image(<span class="string">&quot;bg01.png&quot;</span>)<span class="comment">#真正的图片</span></span><br><span class="line">    g.unlock_image(<span class="string">&quot;bg03.png&quot;</span>)<span class="comment">#差分</span></span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;cg&quot;</span>)</span><br><span class="line">    g.condition(<span class="string">&quot;persistent.unlock_1&quot;</span>)<span class="comment">#解锁限制</span></span><br><span class="line">    g.image(<span class="string">&quot;cg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#未解锁</span></span><br><span class="line">    g.button(<span class="string">&quot;unlock&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多图像请自行添加</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 图像切换使用的转场。</span></span><br><span class="line">    g.transition = dissolve</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="界面编写"><a href="#界面编写" class="headerlink" title="界面编写"></a>界面编写</h1><p>由于空间有限，我们舍弃掉画廊的快速定位功能，同时为避免产生歧义，CG鉴赏采取翻页效果，音乐鉴赏采取滚动条效果，具体代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#音乐列表顶部底部按钮定位</span></span><br><span class="line">default extra_music_pos = ui.adjustment()</span><br><span class="line"></span><br><span class="line"><span class="comment">#鉴赏空间界面</span></span><br><span class="line">screen extra(cg_page=<span class="number">0</span>):</span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;extra_bg.jpg&quot;</span> </span><br><span class="line">    text <span class="string">&quot;EXTRA&quot;</span> size <span class="number">80</span> color <span class="string">&quot;#000000&quot;</span> align (<span class="number">0.05</span>, <span class="number">0.1</span>) <span class="comment">#调整大小，颜色，位置</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#######画廊部分</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#CG列表</span></span><br><span class="line">    viewport:</span><br><span class="line"></span><br><span class="line">        xysize (<span class="number">1044</span>, <span class="number">690</span>)</span><br><span class="line">        align (<span class="number">0.1</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            <span class="comment">#间距</span></span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">#页数判断</span></span><br><span class="line">            <span class="keyword">if</span> (cg_page == <span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">3</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    <span class="comment">#解锁判断，后续判断请自行添加</span></span><br><span class="line">                    <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                        add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                        add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                        add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)  </span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)         </span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (cg_page == <span class="number">1</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">3</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (cg_page == <span class="number">2</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">3</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">    <span class="comment">#翻页按钮</span></span><br><span class="line">    hbox:</span><br><span class="line">        xalign <span class="number">0.2</span> yalign <span class="number">0.85</span></span><br><span class="line">        spacing <span class="number">60</span></span><br><span class="line">        <span class="keyword">if</span> cg_page &lt; <span class="number">2</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=(cg_page+<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">        textbutton <span class="string">&quot;1&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=<span class="number">0</span>)</span><br><span class="line">        textbutton <span class="string">&quot;2&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=<span class="number">1</span>)</span><br><span class="line">        textbutton <span class="string">&quot;3&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> cg_page &gt; <span class="number">0</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;extra&quot;</span>,cg_page=(cg_page-<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action NullAction()</span><br><span class="line">                </span><br><span class="line">    </span><br><span class="line">    <span class="comment">######音乐部分</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#更新renpy.music.get_position()和get_music_duration()</span></span><br><span class="line">    timer <span class="number">0.1</span>:</span><br><span class="line">        action [SetVariable(<span class="string">&#x27;duration&#x27;</span>,get_audio_duration()),SetVariable(<span class="string">&#x27;music_pos&#x27;</span>,get_audio_position())]</span><br><span class="line">        repeat <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#音乐列表</span></span><br><span class="line">    viewport <span class="built_in">id</span> <span class="string">&quot;MUSIC_list&quot;</span>:</span><br><span class="line">        mousewheel <span class="literal">True</span> <span class="comment">#垂直滚动</span></span><br><span class="line">        xysize (<span class="number">500</span>, <span class="number">600</span>)</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.4</span>)</span><br><span class="line">        draggable <span class="literal">True</span>  <span class="comment">#鼠标拖动可滚动视口</span></span><br><span class="line">        yadjustment extra_music_pos <span class="comment">#快速定位</span></span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            </span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line"></span><br><span class="line">            textbutton <span class="string">&quot;bgm01&quot;</span> action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">#解锁判断</span></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm02.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm02&quot;</span> action mr.Play(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm03.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm03&quot;</span> action mr.Play(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#顶部底部按钮</span></span><br><span class="line">    vbox:</span><br><span class="line">        align (<span class="number">0.95</span>, <span class="number">0.4</span>)</span><br><span class="line">        textbutton <span class="string">&quot;顶部&quot;</span> action Function(extra_music_pos.change,<span class="number">0</span>)</span><br><span class="line">        vbar:</span><br><span class="line">            xysize (<span class="number">10</span>, <span class="number">500</span>)</span><br><span class="line">            align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">            value YScrollValue(<span class="string">&quot;MUSIC_list&quot;</span>)</span><br><span class="line">        <span class="comment">#如果不想算，只需保证该值足够大</span></span><br><span class="line">        textbutton <span class="string">&quot;底部&quot;</span> action Function(extra_music_pos.change,<span class="number">500000</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#功能按钮</span></span><br><span class="line">    hbox:</span><br><span class="line"></span><br><span class="line">        align (<span class="number">0.85</span>, <span class="number">0.85</span>)</span><br><span class="line">        spacing <span class="number">40</span></span><br><span class="line">        textbutton <span class="string">&quot;下一首&quot;</span> action mr.Next()</span><br><span class="line">        imagebutton:</span><br><span class="line">            </span><br><span class="line">            idle <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            selected_idle <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            selected_hover <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> renpy.music.is_playing() <span class="keyword">and</span> <span class="keyword">not</span> renpy.music.get_pause():</span><br><span class="line">                action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                action PauseAudio(channel=<span class="string">&quot;music&quot;</span>,value=<span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                </span><br><span class="line">        textbutton <span class="string">&quot;上一首&quot;</span> action mr.Previous()</span><br><span class="line">        textbutton <span class="string">&quot;随机播放&quot;</span> action mr.RandomPlay()</span><br><span class="line"></span><br><span class="line">    vbox:</span><br><span class="line">        xpos <span class="number">0.5</span></span><br><span class="line">        ypos <span class="number">0.2</span></span><br><span class="line">        python:</span><br><span class="line">            duration = get_audio_duration()</span><br><span class="line">            music_pos = get_audio_position()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#音量调节，可有可无</span></span><br><span class="line">    hbox:</span><br><span class="line">        text <span class="string">&quot;音量&quot;</span></span><br><span class="line">        align (<span class="number">0.85</span>, <span class="number">0.12</span>)</span><br><span class="line">        bar:</span><br><span class="line">            value Preference(<span class="string">&quot;music volume&quot;</span>)</span><br><span class="line">            thumb <span class="string">&quot;dot.png&quot;</span></span><br><span class="line">            thumb_offset <span class="number">3</span></span><br><span class="line">            xysize (<span class="number">400</span>, <span class="number">5</span>)</span><br><span class="line">            align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#进度条，时长显示</span></span><br><span class="line">    hbox:</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">        bar:</span><br><span class="line">            value AudioPositionValue(channel=<span class="string">&#x27;music&#x27;</span>, update_interval=<span class="number">0.1</span>)</span><br><span class="line">            xysize (<span class="number">400</span>,<span class="number">5</span>)</span><br><span class="line">            align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">            thumb <span class="string">&quot;dot.png&quot;</span></span><br><span class="line">            thumb_offset <span class="number">3</span></span><br><span class="line"></span><br><span class="line">        hbox:</span><br><span class="line">            spacing <span class="number">10</span></span><br><span class="line">            text music_pos</span><br><span class="line">            text <span class="string">&quot;/&quot;</span></span><br><span class="line">            text duration</span><br><span class="line">  </span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.05</span>, <span class="number">0.95</span>)</span><br><span class="line">        text_color <span class="string">&quot;#000&quot;</span></span><br><span class="line">        text_size <span class="number">50</span></span><br><span class="line">        action [Return(), Play(<span class="string">&quot;music&quot;</span>, <span class="string">&quot;bgm01.ogg&quot;</span>)]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="周目解锁"><a href="#周目解锁" class="headerlink" title="周目解锁"></a>周目解锁</h1><p>添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">init python:</span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_1 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_1 ==<span class="literal">False</span></span><br><span class="line">    <span class="comment">#更多条件限制请自行添加</span></span><br></pre></td></tr></table></figure><p>在某一结局内添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解锁条件1</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span></span><br><span class="line"><span class="comment">#更多周目请自行添加</span></span><br></pre></td></tr></table></figure><h1 id="添加入口"><a href="#添加入口" class="headerlink" title="添加入口"></a>添加入口</h1><p>完成上述操作后，我们还需要添加主界面进入按钮，打开<code>screens.rpy</code>，找到<code>screen navigation()</code>(287行左右)，在合适位置添加下面的代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textbutton <span class="string">&quot;EXTRA&quot;</span> action ShowMenu(<span class="string">&quot;extra&quot;</span>)</span><br></pre></td></tr></table></figure><p>现在运行游戏，即可在主界面看到鉴赏空间进入按钮，请检查各功能是否可用。</p>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 画廊</title>
      <link href="/posts/b5b066b2.html"/>
      <url>/posts/b5b066b2.html</url>
      
        <content type="html"><![CDATA[<p><strong>若无特殊说明，默认是在<code>script.rpy</code>文件中进行编写</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>Ren’py官方文档相关链接:</p><ol><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#image-gallery">画廊</a></li><li><a href="https://doc.renpy.cn/zh-CN/displaying_images.html#renpy.seen_image">常规解锁判断</a></li><li><a href="https://doc.renpy.cn/zh-CN/persistent.html#persistent-data">周目解锁判断</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><h2 id="基础部分"><a href="#基础部分" class="headerlink" title="基础部分"></a>基础部分</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1JGtyeDEcX&cid=25949438659&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h2 id="进阶操作"><a href="#进阶操作" class="headerlink" title="进阶操作"></a>进阶操作</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1XLxqemE8h&cid=26050103049&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><p>同音乐空间一样，想要实现画廊需要一些前提条件，详见下述代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#画廊/CG鉴赏</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#背景图片</span></span><br><span class="line">image gallery_background:</span><br><span class="line">    <span class="string">&quot;gallery_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#前提条件</span></span><br><span class="line">init python:</span><br><span class="line"></span><br><span class="line">    g = Gallery()</span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;bg&quot;</span>)<span class="comment">#类似于标签</span></span><br><span class="line">    g.image(<span class="string">&quot;bg01.png&quot;</span>)<span class="comment">#真正的图片</span></span><br><span class="line">    g.unlock_image(<span class="string">&quot;bg03.png&quot;</span>)<span class="comment">#差分</span></span><br><span class="line"></span><br><span class="line">    g.button(<span class="string">&quot;cg&quot;</span>)</span><br><span class="line">    g.condition(<span class="string">&quot;persistent.unlock_1&quot;</span>)<span class="comment">#解锁限制</span></span><br><span class="line">    g.image(<span class="string">&quot;cg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#未解锁</span></span><br><span class="line">    g.button(<span class="string">&quot;unlock&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多图像请自行添加</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 图像切换使用的转场。</span></span><br><span class="line">    g.transition = dissolve</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果选择翻页功能可以不加</span></span><br><span class="line">default p = ui.adjustment()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="界面编写"><a href="#界面编写" class="headerlink" title="界面编写"></a>界面编写</h1><p>前提条件编写完成后，我们就可以着手编写画廊界面了，这里我提供了滚动条样式和翻页样式两种常用形式，请自行选择你想要那种效果</p><h2 id="滚动条式界面-推荐"><a href="#滚动条式界面-推荐" class="headerlink" title="滚动条式界面(推荐)"></a>滚动条式界面(推荐)</h2><p>以下代码适用于滚动条式界面，请选择好你想要的效果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#鉴赏界面</span></span><br><span class="line"></span><br><span class="line">screen gallery:</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;gallery_background&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#可拖动条</span></span><br><span class="line">    vbar:</span><br><span class="line">        xysize (<span class="number">10</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.5</span>)</span><br><span class="line">        value YScrollValue(<span class="string">&quot;cg_list&quot;</span>)   </span><br><span class="line"></span><br><span class="line">    viewport <span class="built_in">id</span> <span class="string">&quot;cg_list&quot;</span>:</span><br><span class="line">        mousewheel <span class="literal">True</span> <span class="comment">#垂直滚动</span></span><br><span class="line">        xysize (<span class="number">1500</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">        draggable <span class="literal">True</span> <span class="comment">#鼠标拖动可滚动视口</span></span><br><span class="line">        yadjustment p <span class="comment">#快速定位</span></span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            <span class="comment">#间距</span></span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;角色1&quot;</span> size <span class="number">40</span> </span><br><span class="line">            </span><br><span class="line">            <span class="comment">#网格布局</span></span><br><span class="line">            grid <span class="number">4</span> <span class="number">3</span> <span class="built_in">id</span> <span class="string">&quot;bg&quot;</span>:</span><br><span class="line">                spacing <span class="number">60</span></span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">                <span class="comment">#判断是否解锁</span></span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg05&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> renpy.seen_image(<span class="string">&quot;bg03&quot;</span>):</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    add g.make_button(<span class="string">&quot;unlock&quot;</span>, <span class="string">&quot;unknow.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment">#由于全加判断语句导致代码太长，以下暂不添加判断</span></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">            text <span class="string">&quot;角色2&quot;</span> size <span class="number">40</span></span><br><span class="line"></span><br><span class="line">            grid <span class="number">4</span> <span class="number">3</span> <span class="built_in">id</span> <span class="string">&quot;cg&quot;</span>:</span><br><span class="line">                spacing <span class="number">60</span></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多图像请自行添加</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#快速定位选项</span></span><br><span class="line">    vbox:</span><br><span class="line">        <span class="comment">#请自行根据图像高度和间距计算数值</span></span><br><span class="line">        textbutton <span class="string">&quot;角色1&quot;</span> action Function(p.change,<span class="number">0</span>)</span><br><span class="line">        textbutton <span class="string">&quot;角色2&quot;</span> action Function(p.change,<span class="number">799</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#更多角色请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.0</span>, <span class="number">0.98</span>)</span><br><span class="line">        action Return()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="翻页式界面"><a href="#翻页式界面" class="headerlink" title="翻页式界面"></a>翻页式界面</h2><p>以下代码适用于翻页式界面，请选择好你想要的效果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">screen gallery(page=<span class="number">0</span>):</span><br><span class="line"></span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;gallery_background&quot;</span></span><br><span class="line">    </span><br><span class="line">    viewport:    </span><br><span class="line">        xysize (<span class="number">1500</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line">            <span class="comment">#页数判断</span></span><br><span class="line">            <span class="keyword">if</span> (page == <span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    <span class="comment">#由于全部添加会导致代码很长，以下只展示三张图片，请自行添加判断语句</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)          </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (page == <span class="number">1</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (page == <span class="number">2</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多页面请自行添加</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#底部按钮</span></span><br><span class="line">    hbox:</span><br><span class="line">        xalign <span class="number">0.5</span> yalign <span class="number">0.9</span></span><br><span class="line">        spacing <span class="number">60</span></span><br><span class="line">        <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">        <span class="keyword">if</span> page &lt; <span class="number">2</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=(page+<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;下一页&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">        textbutton <span class="string">&quot;1&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=<span class="number">0</span>)</span><br><span class="line">        textbutton <span class="string">&quot;2&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=<span class="number">1</span>)</span><br><span class="line">        textbutton <span class="string">&quot;3&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> page &gt; <span class="number">0</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,page=(page-<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            textbutton <span class="string">&quot;上一页&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.0</span>, <span class="number">0.98</span>)</span><br><span class="line">        action Return()  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果想添加快速定位功能，请进一步定义<code>角色名_page</code>，并修改为以下代码(只显示需要修改的代码)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入画廊默认界面</span></span><br><span class="line">screen gallery(角色1_page=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">viewport:    </span><br><span class="line">        xysize (<span class="number">1500</span>, <span class="number">680</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        vbox:</span><br><span class="line">            spacing <span class="number">60</span></span><br><span class="line">            <span class="comment">#页数判断</span></span><br><span class="line">            <span class="keyword">if</span> (角色1_page == <span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    <span class="comment">#由于全部添加会导致代码很长，以下只展示三张图片，请自行添加判断语句</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)          </span><br><span class="line">                vbox:</span><br><span class="line">                    <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">                    textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page+<span class="number">1</span>))</span><br><span class="line">                    textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page-<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (角色1_page == <span class="number">1</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;bg&quot;</span>, <span class="string">&quot;smbg03.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                vbox:</span><br><span class="line">                    <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">                    textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page+<span class="number">1</span>))</span><br><span class="line">                    textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=(角色1_page-<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (角色2_page=<span class="number">0</span>):</span><br><span class="line">                grid <span class="number">3</span> <span class="number">1</span>:</span><br><span class="line">                    spacing <span class="number">60</span></span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                    add g.make_button(<span class="string">&quot;cg&quot;</span>, <span class="string">&quot;smcg01.png&quot;</span>)</span><br><span class="line">                vbox:</span><br><span class="line">                    <span class="comment">#请自行根据你的CG数量进行条件判断</span></span><br><span class="line">                    textbutton <span class="string">&quot;下一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色2_page=(角色2_page+<span class="number">1</span>))</span><br><span class="line">                    textbutton <span class="string">&quot;上一页&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色2_page=(角色2_page-<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多页面请自行添加</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#添加快速定位选项</span></span><br><span class="line">vbox:</span><br><span class="line">    textbutton <span class="string">&quot;角色1&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色1_page=<span class="number">0</span>)</span><br><span class="line">    textbutton <span class="string">&quot;角色2&quot;</span> action Show(<span class="string">&quot;gallery&quot;</span>,角色2_page=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多角色请自行添加</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="周目解锁"><a href="#周目解锁" class="headerlink" title="周目解锁"></a>周目解锁</h1><p>添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">init python:</span><br><span class="line">    <span class="keyword">if</span> persistent.unlock_1 == <span class="literal">None</span>:</span><br><span class="line">        persistent.unlock_1 ==<span class="literal">False</span></span><br><span class="line">    <span class="comment">#更多条件限制请自行添加</span></span><br></pre></td></tr></table></figure><p>在某一结局内添加如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解锁条件1</span></span><br><span class="line">$ persistent.unlock_1 = <span class="literal">True</span></span><br><span class="line"><span class="comment">#更多周目请自行添加</span></span><br></pre></td></tr></table></figure><h1 id="添加入口"><a href="#添加入口" class="headerlink" title="添加入口"></a>添加入口</h1><p>完成上述操作后，我们还需要添加主界面进入按钮，打开<code>screens.rpy</code>，找到<code>screen navigation()</code>(287行左右)，在合适位置添加下面的代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textbutton <span class="string">&quot;画廊&quot;</span> action ShowMenu(<span class="string">&quot;gallery&quot;</span>)</span><br></pre></td></tr></table></figure></p><p>现在运行游戏，即可在主界面看到画廊进入按钮，请检查各功能是否可用。</p>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ren&#39;py 音乐空间</title>
      <link href="/posts/90ea59ad.html"/>
      <url>/posts/90ea59ad.html</url>
      
        <content type="html"><![CDATA[<p><strong>若无特殊说明，默认是在<code>script.rpy</code>文件中进行编写</strong></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>本文参考Ren’py中文论坛文章:<br><a href="https://www.renpy.cn/thread-740-1-1.html">[原创] [教程]音乐进度条显示，全长和已播放进度，附加播放/暂停</a></p><p>Ren’py官方文档相关链接:</p><ol><li><a href="https://doc.renpy.cn/zh-CN/rooms.html#music-room">音乐空间</a></li><li><a href="https://doc.renpy.cn/zh-CN/audio.html#functions">时长位置</a></li><li><a href="https://doc.renpy.cn/zh-CN/screens.html#timer">更新时长</a></li></ol><h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><h2 id="基础部分"><a href="#基础部分" class="headerlink" title="基础部分"></a>基础部分</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV19ZpueeE1M&cid=25752374369&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h2 id="进阶操作"><a href="#进阶操作" class="headerlink" title="进阶操作"></a>进阶操作</h2><div style="position:relative; padding-bottom:75%; width:100%; height:0">    <iframe src="//player.bilibili.com/player.html?bvid=BV1zL4bezE5h&cid=25870731371&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"></iframe></div><h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><p>想要实现音乐空间需要一些前提条件，详见下述代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#音乐空间背景</span></span><br><span class="line">image music_background:</span><br><span class="line">    <span class="string">&quot;music_background.png&quot;</span></span><br><span class="line">    size (<span class="number">1920</span>, <span class="number">1080</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#音乐列表</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="comment">#淡入淡出</span></span><br><span class="line">    mr = MusicRoom(fadein = <span class="number">1.0</span> , fadeout = <span class="number">1.0</span>)</span><br><span class="line">    <span class="comment">#音乐列表，第一个用于主界面bgm，设为默认解锁</span></span><br><span class="line">    mr.add(<span class="string">&quot;bgm01.ogg&quot;</span>,always_unlocked = <span class="literal">True</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">    mr.add(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更多音乐请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#时长参数</span></span><br><span class="line">init python:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_duration</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        duration = renpy.music.get_duration(channel)</span><br><span class="line">        <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(duration))</span><br><span class="line">        </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_audio_position</span>(<span class="params">channel=<span class="string">&quot;music&quot;</span></span>):</span><br><span class="line">        music_pos = renpy.music.get_pos(channel)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> music_pos:</span><br><span class="line">            <span class="keyword">return</span> convert_format(<span class="built_in">int</span>(music_pos))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;00:00&quot;</span></span><br><span class="line">    <span class="comment">#时间转换</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">convert_format</span>(<span class="params">second</span>):</span><br><span class="line">        minute = second // <span class="number">60</span></span><br><span class="line">        second = second % <span class="number">60</span></span><br><span class="line">        result = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#可用于59分59秒内音乐</span></span><br><span class="line">        <span class="keyword">if</span> minute:</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> minute &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result =<span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="built_in">str</span>(minute) + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                    result = <span class="built_in">str</span>(minute) + <span class="string">&#x27;0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">                       </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> second &lt; <span class="number">10</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:0&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="string">&#x27;00:&#x27;</span> + <span class="built_in">str</span>(second)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><h1 id="界面编写"><a href="#界面编写" class="headerlink" title="界面编写"></a>界面编写</h1><p>前提条件编写完成后，我们就可以着手编写音乐空间界面了，详见下述代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#音乐空间界面</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">screen music_room:</span><br><span class="line"></span><br><span class="line">    <span class="comment">#更新renpy.music.get_position()和get_music_duration()</span></span><br><span class="line">    timer <span class="number">0.1</span>:</span><br><span class="line">        action [SetVariable(<span class="string">&#x27;duration&#x27;</span>,get_audio_duration()),SetVariable(<span class="string">&#x27;music_pos&#x27;</span>,get_audio_position())]</span><br><span class="line">        repeat <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    zorder <span class="number">2</span></span><br><span class="line">    tag menu</span><br><span class="line">    add <span class="string">&quot;music_background&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#音乐列表</span></span><br><span class="line">    viewport <span class="built_in">id</span> <span class="string">&quot;music_list&quot;</span>:</span><br><span class="line">        mousewheel <span class="literal">True</span> <span class="comment">#垂直滚动</span></span><br><span class="line">        xysize (<span class="number">500</span>, <span class="number">500</span>)</span><br><span class="line">        align (<span class="number">0.3</span>, <span class="number">0.4</span>)</span><br><span class="line">        draggable <span class="literal">True</span> <span class="comment">#鼠标拖动可滚动视口</span></span><br><span class="line">        vbox:</span><br><span class="line">            </span><br><span class="line">            spacing <span class="number">50</span></span><br><span class="line"></span><br><span class="line">            textbutton <span class="string">&quot;bgm01&quot;</span> action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line">            <span class="comment">#判断bgm是否解锁</span></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm02.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm02&quot;</span> action mr.Play(<span class="string">&quot;bgm02.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm03.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm03&quot;</span> action mr.Play(<span class="string">&quot;bgm03.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line">            <span class="keyword">if</span> mr.is_unlocked(<span class="string">&quot;bgm04.ogg&quot;</span>):</span><br><span class="line">                textbutton <span class="string">&quot;bgm04&quot;</span> action mr.Play(<span class="string">&quot;bgm04.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                textbutton <span class="string">&quot;???&quot;</span> action NullAction()</span><br><span class="line"></span><br><span class="line">            <span class="comment">#更多音乐请自行添加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#可拖动滑块</span></span><br><span class="line">    vbar:</span><br><span class="line">        xysize (<span class="number">10</span>, <span class="number">500</span>)</span><br><span class="line">        align (<span class="number">0.9</span>, <span class="number">0.4</span>)</span><br><span class="line">        value YScrollValue(<span class="string">&quot;music_list&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#功能按键</span></span><br><span class="line">    hbox:</span><br><span class="line"></span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.8</span>)</span><br><span class="line">        spacing <span class="number">200</span></span><br><span class="line"></span><br><span class="line">        textbutton <span class="string">&quot;下一首&quot;</span> action mr.Next()</span><br><span class="line"></span><br><span class="line">        <span class="comment">#暂停/播放切换</span></span><br><span class="line">        imagebutton:</span><br><span class="line">            </span><br><span class="line">            idle <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            hover <span class="string">&quot;pause.png&quot;</span></span><br><span class="line">            selected_idle <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            selected_hover <span class="string">&quot;continue.png&quot;</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> renpy.music.is_playing() <span class="keyword">and</span> <span class="keyword">not</span> renpy.music.get_pause():</span><br><span class="line">                action mr.Play(<span class="string">&quot;bgm01.ogg&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                action PauseAudio(channel=<span class="string">&quot;music&quot;</span>,value=<span class="string">&quot;toggle&quot;</span>)</span><br><span class="line">                </span><br><span class="line">        textbutton <span class="string">&quot;上一首&quot;</span> action mr.Previous()</span><br><span class="line">        textbutton <span class="string">&quot;随机播放&quot;</span> action mr.RandomPlay()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#显示时长</span></span><br><span class="line">    bar:</span><br><span class="line">        value AudioPositionValue(channel=<span class="string">&#x27;music&#x27;</span>, update_interval=<span class="number">0.1</span>)</span><br><span class="line">        xysize (<span class="number">800</span>,<span class="number">5</span>)</span><br><span class="line">        align (<span class="number">0.5</span>, <span class="number">0.7</span>)</span><br><span class="line">        thumb <span class="string">&quot;dot.png&quot;</span></span><br><span class="line">        thumb_offset <span class="number">3</span></span><br><span class="line">  </span><br><span class="line">    vbox:</span><br><span class="line">        xpos <span class="number">0.5</span></span><br><span class="line">        ypos <span class="number">0.2</span></span><br><span class="line">        python:</span><br><span class="line">            duration = get_audio_duration()</span><br><span class="line">            music_pos = get_audio_position()</span><br><span class="line">    hbox:</span><br><span class="line">        spacing <span class="number">20</span></span><br><span class="line">        align (<span class="number">0.8</span>, <span class="number">0.7</span>)</span><br><span class="line">        text music_pos</span><br><span class="line">        text <span class="string">&quot;/&quot;</span></span><br><span class="line">        text duration</span><br><span class="line">        </span><br><span class="line">    <span class="comment">#返回按钮</span></span><br><span class="line">    textbutton <span class="string">&quot;返回&quot;</span>:</span><br><span class="line">        align (<span class="number">0.0</span>, <span class="number">0.98</span>)</span><br><span class="line">        action Return()</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 音乐空间的音乐播放入口。</span></span><br><span class="line">    on <span class="string">&quot;replace&quot;</span> action mr.Play()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 离开时恢复主菜单的音乐。</span></span><br><span class="line">    on <span class="string">&quot;replaced&quot;</span> action Play(<span class="string">&quot;music&quot;</span>, <span class="string">&quot;bgm01.ogg&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="添加入口"><a href="#添加入口" class="headerlink" title="添加入口"></a>添加入口</h1><p>完成上述操作后，我们还需要添加主界面进入按钮，打开<code>screens.rpy</code>，找到<code>screen navigation()</code>(287行左右)，在合适位置添加下面的代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textbutton <span class="string">&quot;音乐空间&quot;</span> action ShowMenu(<span class="string">&quot;music_room&quot;</span>)</span><br></pre></td></tr></table></figure></p><p>现在运行游戏，即可在主界面看到音乐空间进入按钮，请检查各功能是否可用。</p>]]></content>
      
      
      <categories>
          
          <category> 视频教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ren&#39;py </tag>
            
            <tag> GALGAME引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL语法使用(二)</title>
      <link href="/posts/37d2fb35.html"/>
      <url>/posts/37d2fb35.html</url>
      
        <content type="html"><![CDATA[<h1 id="查看数据表"><a href="#查看数据表" class="headerlink" title="查看数据表"></a>查看数据表</h1><h2 id="查看已创建的数据表"><a href="#查看已创建的数据表" class="headerlink" title="查看已创建的数据表"></a>查看已创建的数据表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure><h2 id="查看数据表结构"><a href="#查看数据表结构" class="headerlink" title="查看数据表结构"></a>查看数据表结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span>(<span class="keyword">DESC</span>) <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例: 查看student数据表的结构(<code>USE</code>命令可以让我们来使用数据库)<br>USE test;<br>DESC student;<br>或<br>USE test;<br>SHOW CREATE TABLE student;</p></blockquote><h1 id="数据表中数据的操纵"><a href="#数据表中数据的操纵" class="headerlink" title="数据表中数据的操纵"></a>数据表中数据的操纵</h1><h2 id="向数据表中添加数据"><a href="#向数据表中添加数据" class="headerlink" title="向数据表中添加数据"></a>向数据表中添加数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>注：可使用逗号分隔添加多条数据，但不推荐使用</span><br><span class="line"><span class="keyword">INSERT</span> <span class="operator">|</span> REPLACE <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [(<span class="operator">&lt;</span>字段名<span class="number">1</span><span class="operator">&gt;</span> [, <span class="operator">&lt;</span>字段名<span class="number">2</span><span class="operator">&gt;</span> …… ])] <span class="keyword">VALUES</span>(<span class="operator">&lt;</span>值<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>例: 向student数据表中添加一条记录(可只选择部分添加)<br>INSERT INTO student(sno, sname, age, sex, major, department)<br>VALUES(‘123’, ‘张三’, ‘23’, ‘男’, ‘计算机’, ‘信息学院’);</p></blockquote><h2 id="修改数据表中数据"><a href="#修改数据表中数据" class="headerlink" title="修改数据表中数据"></a>修改数据表中数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATA <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SET</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>字段名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>]……</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure><blockquote><p>例: 在student数据表中将张三年龄增加一岁<br>UPDATE student<br>SET age=age+1<br>WHERE sname=”张三”;</p></blockquote><h2 id="删除表中数据"><a href="#删除表中数据" class="headerlink" title="删除表中数据"></a>删除表中数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure><blockquote><p>例: 在student数据表中将张三数据删除<br>DELETE<br>FROM student<br>WHERE sname=”张三”;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL语法使用(一)</title>
      <link href="/posts/ed03a884.html"/>
      <url>/posts/ed03a884.html</url>
      
        <content type="html"><![CDATA[<p>写在最前面：MySQL对字母大小写不敏感，因此<strong>不必在意大小写</strong></p><h1 id="数据库管理"><a href="#数据库管理" class="headerlink" title="数据库管理"></a>数据库管理</h1><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>在 MySQL 中，可以使用 CREATE DATABASE 语句创建数据库，语法格式如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>通常情况下只写第一句即可</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name</span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">&lt;</span>字符集名<span class="operator">&gt;</span>] </span><br><span class="line">[[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> <span class="operator">&lt;</span>校对规则名<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure></p><p><code>[ ]</code>中的内容是可选的。语法说明如下：</p><p><code>db_name</code>创建数据库的名称。MySQL 的数据存储区将以目录方式表示 MySQL 数据库，因此数据库名称必须符合操作系统的文件夹命名规则，不能以数字开头，尽量要有实际意义。</p><p><code>IF NOT EXISTS</code>在创建数据库之前进行判断，只有该数据库目前尚不存在时才能执行操作。此选项可以用来避免数据库已经存在而重复创建的错误。</p><p><code>[DEFAULT] CHARACTER SET</code>指定数据库的字符集。指定字符集的目的是为了避免在数据库中存储的数据出现乱码的情况。如果在创建数据库时不指定字符集，那么就使用系统的默认字符集。</p><p><code>[DEFAULT] COLLATE</code>指定字符集的默认校对规则。</p><blockquote><p>例：创建名为test的数据库<br>CREATE DATABASE test;</p></blockquote><h2 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE db_name;</span><br></pre></td></tr></table></figure><blockquote><p>例：查看名为test的数据库<br>SHOW CREATE DATABASE test;</p></blockquote><h2 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE<span class="operator">|</span>SCHEMA db_name</span><br><span class="line">[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> charset_name</span><br><span class="line">[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> collation_name;</span><br></pre></td></tr></table></figure><blockquote><p>例：修改名为test的数据库<br>ALTER DATABASE test<br>DEFAULT CHARACTER SET gbk<br>DEFAULT COLLATE gbk_chinese_ci;</p></blockquote><h2 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE [IF <span class="keyword">EXISTS</span>] db_name;</span><br></pre></td></tr></table></figure><blockquote><p>例：删除名为test的数据库<br>DROP DATABASE test;</p></blockquote><h1 id="数据库表的管理"><a href="#数据库表的管理" class="headerlink" title="数据库表的管理"></a>数据库表的管理</h1><h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [TEMPORARY] <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> EXIST] <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[([<span class="operator">&lt;</span>字段定义<span class="operator">&gt;</span>],……,<span class="operator">|</span>[<span class="operator">&lt;</span>索引定义<span class="operator">&gt;</span>])]</span><br><span class="line">[table_option] [selsct_statement];</span><br></pre></td></tr></table></figure><p><code>TEMPORARY</code> 若使用该关键字，则创建的是临时表</p><p><code>IF NOT EXIST</code> 用于判断数据库中是否已经存在同名的表。若不存在，则执行<code>CREATE TABLE</code>操作。若数据库中已存在同名表，创建数据表时会出错，为避免此种情况，可使用<code>IF NOT EXIST</code>进行判断</p><p><code>&lt;表名&gt;</code> 要创建的表名，最多可有64个字符，不允许重名，不能使用SQL中的关键字</p><p><code>&lt;字段定义&gt;</code> 的书写格式如下:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [<span class="keyword">DEFAULT</span>] [AUTO_INCREMENT] [COMMENT <span class="string">&#x27;String&#x27;</span>] [&#123;<span class="operator">&lt;</span>列约束<span class="operator">&gt;</span>&#125;]</span><br></pre></td></tr></table></figure><p><code>DEFAULT</code> 若某字段设置有默认值，则当该字段未被输入数据时，自动填充设置的默认值</p><p><code>AUTO_INCREMENT</code> 设置自增数值属性，只有整数型数据能够设置</p><p><code>COMMENT &#39;String&#39;</code> 注释字段名</p><p><code>&lt;列约束&gt;</code> 列约束是对某一个特定字段的约束，包含在字段定义中，直接跟在该字段的其他定义之后，用空格分隔，不必指定字段名</p><p><code>&lt;索引定义&gt;</code> 为表中相关字段指定索引</p><p><code>table_option</code> 表选项，存储引擎，字符集等</p><p><code>selsct_statement</code> 定义表的查询语句</p><blockquote><p>例：创建名为students的数据表并添加基本属性<br>CREATE TABLE “students” (<br>“sno” CHAR(10) NOT NULL COMMENT “学号”,<br>“sname” VARCHAR(45) NOT NULL COMMENT “姓名”,<br>“sex” ENUM(“男”,”女”) NOT NULL DEFAULT “男” COMMENT “性别”,<br>“age” INT NOT NULL COMMENT “年龄”,<br>“major” VARCHAR(45) NOT NULL COMMENT “专业”,<br>“department” VARCHAR(45) NOT NULL COMMENT “院系”,<br>PRIMARY KEY (“sno”)  //主码约束<br>)</p></blockquote><p>定义表的约束：</p><ol><li>非空约束(NULL/NOT NULL)</li><li>唯一约束(UNIQUE)</li><li>主码约束(PRIMARY KEY)</li><li>外码约束(FOREIGN KEY)</li><li>检查约束(CHECK) </li></ol><h2 id="修改表的数据"><a href="#修改表的数据" class="headerlink" title="修改表的数据"></a>修改表的数据</h2><h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ADD</span> [<span class="operator">&lt;</span>新字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="operator">&lt;</span>完整性约束定义<span class="operator">&gt;</span>] [<span class="keyword">FIRST</span><span class="operator">|</span>AFTER已有字段名]</span><br></pre></td></tr></table></figure><blockquote><p>例：在students数据表中添加学生班级属性<br>ALTER TABLE students<br>ADD class VARCHAR(6);</p></blockquote><h3 id="重命名表名"><a href="#重命名表名" class="headerlink" title="重命名表名"></a>重命名表名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">RENAME [<span class="keyword">TO</span>] <span class="operator">&lt;</span>新表名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>例：将students数据表重命名为student<br>ALTER TABLE students<br>RENAME student</p></blockquote><h3 id="修改表头"><a href="#修改表头" class="headerlink" title="修改表头"></a>修改表头</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">CHANGE <span class="operator">&lt;</span>旧表头<span class="operator">&gt;</span> <span class="operator">&lt;</span>新表头<span class="operator">&gt;</span> <span class="operator">&lt;</span>新数据类型<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>注：即使不需要修改数据类型也要加上新数据类型，保持一致即可</span><br></pre></td></tr></table></figure><blockquote><p>例：将student数据表中的sname修改为sn<br>ALTER TABLE student<br>CHANFE sname sn VARCHAR(45);</p></blockquote><h3 id="修改表头数据类型和字段排序"><a href="#修改表头数据类型和字段排序" class="headerlink" title="修改表头数据类型和字段排序"></a>修改表头数据类型和字段排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span></span><br><span class="line">MODIFY <span class="operator">&lt;</span>表头<span class="number">1</span><span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [<span class="keyword">FIRST</span><span class="operator">|</span>AFTER 表头<span class="number">2</span>];</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>注：数据类型不可省略</span><br></pre></td></tr></table></figure><blockquote><p>例：将student数据表中sn的数据类型修改为CHAR(30)<br>ALTER TABLE student<br>MODIFY sn CHAR(30);</p><p>例：将student数据表中年龄age插到性别sex之前<br>ALTER TABLE student<br>MODIFY sex ENUM(“男”,”女”) AFTER age;</p></blockquote><h3 id="修改数据表存储引擎"><a href="#修改数据表存储引擎" class="headerlink" title="修改数据表存储引擎"></a>修改数据表存储引擎</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">ENGINE<span class="operator">=</span><span class="operator">&lt;</span>修改后的存储引擎<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例:将存储引擎切换为MyISAM<br>ALTER TABLE student<br>ENGINE=MyISAM;</p></blockquote><h3 id="删除表头和完整性约束"><a href="#删除表头和完整性约束" class="headerlink" title="删除表头和完整性约束"></a>删除表头和完整性约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>旧表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="operator">&lt;</span>表头<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例:删除student数据表中class班级属性<br>ALTER TABLE students<br>DROP class;</p></blockquote><h2 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>例:删除student数据表<br>DROP TABLE student;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDown语法使用</title>
      <link href="/posts/308ecbbe.html"/>
      <url>/posts/308ecbbe.html</url>
      
        <content type="html"><![CDATA[<h1 id="标题语法"><a href="#标题语法" class="headerlink" title="标题语法"></a>标题语法</h1><p>使用井号# 表示标题，井号# 的个数代表标题级数</p><blockquote><p>例：</p><pre><code># 一级标题 ## 二级标题 ### 三级标题</code></pre></blockquote><h1 id="段落语法"><a href="#段落语法" class="headerlink" title="段落语法"></a>段落语法</h1><ol><li><p>结尾添加一个空格换行<br>第二行</p></li><li><p>使用<code>&lt;br&gt;</code>标签换行<br></p></li><li><p>中间空一行切换段落</p></li></ol><h1 id="字体设置"><a href="#字体设置" class="headerlink" title="字体设置"></a>字体设置</h1><ol><li><p>使用一个星号*变为<em>斜体</em></p></li><li><p>使用两个星号**加粗<strong>字体</strong></p></li><li><p>使用三个星号***变为<strong><em>斜体+粗体</em></strong></p></li><li><p>使用两个波浪线~~表示<del>删除线</del></p></li></ol><h1 id="引用块"><a href="#引用块" class="headerlink" title="引用块"></a>引用块</h1><p>使用一个&gt;表示引用块</p><blockquote><p>引用块</p></blockquote><h1 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h1><p>代码前后使用三个反单引号```表示代码块(英文下的~)<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code</span><br></pre></td></tr></table></figure></p><h1 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h1><p>使用三个短横线—-表示分割线</p><hr><h1 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h1><p>使用数字加点表示有序列表(可嵌套)</p><ol><li>1</li><li>2</li><li>3<ol><li>3-1</li><li>3-2</li></ol></li><li>4</li></ol><h1 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h1><p>使用一个短横线表示无序列表(可嵌套)</p><ul><li>1</li><li>2</li><li>3<ul><li>3-1</li><li>3-2</li></ul></li><li>4</li></ul><h1 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h1><p>使用方括号[ ]表示显示的内容，其后接圆括号( )并在其中输入网址，此外还可以添加一段文字以供悬停查看</p><blockquote><p>例：<br> 这是一个链接 <a href="https://markdown.com.cn" title="最好的markdown教程">Markdown语法</a>。</p></blockquote><h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><p>使用感叹号！方括号[ ]和圆括号( )实现图片输出，方括号[ ]内可写入文字，圆括号( )内写入文件路径<br><img src="https://www.helloimg.com/i/2024/11/19/673c20192d695.png" alt="这是一张图片"></p><h1 id="表示为代码"><a href="#表示为代码" class="headerlink" title="表示为代码"></a>表示为代码</h1><p>使用一对反单引号``表示为代码</p><blockquote><p>例：<br> 这是代码<code>npm</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 博客相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MarkDown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/manifest.json"/>
      <url>/manifest.json</url>
      
        <content type="html"><![CDATA[{"name":"ICARUS","short_name":"TCARUS","theme_color":"#3b70fc","background_color":"#3b70fc","display":"standalone","scope":"/","start_url":"/","icons":[{"src":"/img/siteicon/16.png","sizes":"16x16","type":"image/png"},{"src":"/img/siteicon/32.png","sizes":"32x32","type":"image/png"},{"src":"/img/siteicon/48.png","sizes":"48x48","type":"image/png"},{"src":"/img/siteicon/64.png","sizes":"64x64","type":"image/png"},{"src":"/img/siteicon/128.png","sizes":"128x128","type":"image/png"},{"src":"/img/siteicon/144.png","sizes":"144x144","type":"image/png"},{"src":"/img/siteicon/512.png","sizes":"512x512","type":"image/png"}],"splash_pages":null}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/progress_bar.css"/>
      <url>/css/progress_bar.css</url>
      
        <content type="html"><![CDATA[.pace {    -webkit-pointer-events: none;    pointer-events: none;    -webkit-user-select: none;    -moz-user-select: none;    user-select: none;    z-index: 2000;    position: fixed;    margin: auto;    top: 10px;    left: 0;    right: 0;    height: 8px;    border-radius: 8px;    width: 4rem;    background: #eaecf2;    border: 1px #e3e8f7;    overflow: hidden;  }    .pace-inactive .pace-progress {    opacity: 0;    transition: 0.3s ease-in;  }    .pace .pace-progress {    -webkit-box-sizing: border-box;    -moz-box-sizing: border-box;    -ms-box-sizing: border-box;    -o-box-sizing: border-box;    box-sizing: border-box;    -webkit-transform: translate3d(0, 0, 0);    -moz-transform: translate3d(0, 0, 0);    -ms-transform: translate3d(0, 0, 0);    -o-transform: translate3d(0, 0, 0);    transform: translate3d(0, 0, 0);    max-width: 200px;    position: absolute;    z-index: 2000;    display: block;    top: 0;    right: 100%;    height: 100%;    width: 100%;    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);    animation: gradient 1.5s ease infinite;    background-size: 200%;  }    .pace.pace-inactive {    opacity: 0;    transition: 0.3s;    top: -8px;  }  @keyframes gradient {    0% {      background-position: 0% 50%;    }    50% {      background-position: 100% 50%;    }    100% {      background-position: 0% 50%;    }  }  ]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GALGAME</title>
      <link href="/gal/index.html"/>
      <url>/gal/index.html</url>
      
        <content type="html"><![CDATA[<p><strong>点击跳转至游戏OP，右上角表示OP来源</strong></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* @font-face {  font-family: Candyhome;  src: url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/fonts/Candyhome.ttf);  font-display: swap;  font-weight: lighter;} */@font-face {  font-family: ZhuZiAYuanJWD;  src: url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/fonts/ZhuZiAWan.woff2);  font-display: swap;  font-weight: lighter;}div#menus {  font-family: "ZhuZiAYuanJWD";}h1#site-title {  font-family: ZhuZiAYuanJWD;  font-size: 3em !important;}a.article-title,a.blog-slider__title,a.categoryBar-list-link,h1.post-title {  font-family: ZhuZiAYuanJWD;}.iconfont {  font-family: "iconfont" !important;  font-size: 3em;  /* 可以定义图标大小 */  font-style: normal;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}/* 时间轴生肖icon */svg.icon {  /* 这里定义svg.icon，避免和Butterfly自带的note标签冲突 */  width: 1em;  height: 1em;  /* width和height定义图标的默认宽度和高度*/  vertical-align: -0.15em;  fill: currentColor;  overflow: hidden;}.icon-zhongbiao::before {  color: #f7c768;}/* 解决artitalk的图标问题 */#uploadSource > svg {  width: 1.19em;  height: 1.5em;}/*top-img黑色透明玻璃效果移除，不建议加，除非你执着于完全一图流或者背景图对比色明显 */#page-header:not(.not-top-img):before {  background-color: transparent !important;}/* 首页文章卡片 */#recent-posts > .recent-post-item {  background: rgba(255, 255, 255, 0.9);}/* 首页侧栏卡片 */#aside-content .card-widget {  background: rgba(255, 255, 255, 0.9);}/* 文章页面正文背景 */div#post {  background: rgba(255, 255, 255, 0.9);}/* 分页页面 */div#page {  background: rgba(255, 255, 255, 0.9);}/* 归档页面 */div#archive {  background: rgba(255, 255, 255, 0.9);}/* 标签页面 */div#tag {  background: rgba(255, 255, 255, 0.9);}/* 分类页面 */div#category {  background: rgba(255, 255, 255, 0.9);}/*夜间模式伪类遮罩层透明*/[data-theme="dark"] #recent-posts > .recent-post-item {  background: #121212;}[data-theme="dark"] .card-widget {  background: #121212 !important;}[data-theme="dark"] div#post {  background: #121212 !important;}[data-theme="dark"] div#tag {  background: #121212 !important;}[data-theme="dark"] div#archive {  background: #121212 !important;}[data-theme="dark"] div#page {  background: #121212 !important;}[data-theme="dark"] div#category {  background: #121212 !important;}[data-theme="dark"] div#category {  background: transparent !important;}/* 页脚透明 */#footer {  background: transparent !important;}/* 头图透明 */#page-header {  background: transparent !important;}#rightside > div > button {  border-radius: 5px;}/* 滚动条 */::-webkit-scrollbar {  width: 10px;  height: 10px;}::-webkit-scrollbar-thumb {  background-color: #3b70fc;  border-radius: 2em;}::-webkit-scrollbar-corner {  background-color: transparent;}::-moz-selection {  color: #fff;  background-color: #3b70fc;}/* 音乐播放器 *//* .aplayer .aplayer-lrc {  display: none !important;} */.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {  left: -66px !important;  transition: all 0.3s;  /* 默认情况下缩进左侧66px，只留一点箭头部分 */}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {  left: 0 !important;  transition: all 0.3s;  /* 鼠标悬停是左侧缩进归零，完全显示按钮 */}.aplayer.aplayer-fixed {  z-index: 999999 !important;}/* 评论框  */.vwrap {  box-shadow: 2px 2px 5px #bbb;  background: rgba(255, 255, 255, 0.3);  border-radius: 8px;  padding: 30px;  margin: 30px 0px 30px 0px;}/* 设置评论框 */.vcard {  box-shadow: 2px 2px 5px #bbb;  background: rgba(255, 255, 255, 0.3);  border-radius: 8px;  padding: 30px;  margin: 30px 0px 0px 0px;}/* md网站下划线 */#article-container a:hover {  text-decoration: none !important;}#article-container #hpp_talk p img {  display: inline;}/* 404页面 */#error-wrap {  position: absolute;  top: 40%;  right: 0;  left: 0;  margin: 0 auto;  padding: 0 1rem;  max-width: 1000px;  transform: translate(0, -50%);}#error-wrap .error-content {  display: flex;  flex-direction: row;  justify-content: center;  align-items: center;  margin: 0 1rem;  height: 18rem;  border-radius: 8px;  background: var(--card-bg);  box-shadow: var(--card-box-shadow);  transition: all 0.3s;}#error-wrap .error-content .error-img {  box-flex: 1;  flex: 1;  height: 100%;  border-top-left-radius: 8px;  border-bottom-left-radius: 8px;  background-color: #3b70fc;  background-position: center;  background-size: cover;}#error-wrap .error-content .error-info {  box-flex: 1;  flex: 1;  padding: 0.5rem;  text-align: center;  font-size: 14px;  font-family: Titillium Web, "PingFang SC", "Hiragino Sans GB", "Microsoft JhengHei", "Microsoft YaHei", sans-serif;}#error-wrap .error-content .error-info .error_title {  margin-top: -4rem;  font-size: 9em;}#error-wrap .error-content .error-info .error_subtitle {  margin-top: -3.5rem;  word-break: break-word;  font-size: 1.6em;}#error-wrap .error-content .error-info a {  display: inline-block;  margin-top: 0.5rem;  padding: 0.3rem 1.5rem;  background: var(--btn-bg);  color: var(--btn-color);}#body-wrap.error .aside-list {  display: flex;  flex-direction: row;  flex-wrap: nowrap;  bottom: 0px;  position: absolute;  padding: 1rem;  width: 100%;  overflow: scroll;}#body-wrap.error .aside-list .aside-list-group {  display: flex;  flex-direction: row;  flex-wrap: nowrap;  max-width: 1200px;  margin: 0 auto;}#body-wrap.error .aside-list .aside-list-item {  padding: 0.5rem;}#body-wrap.error .aside-list .aside-list-item img {  width: 100%;  object-fit: cover;  border-radius: 12px;}#body-wrap.error .aside-list .aside-list-item .thumbnail {  overflow: hidden;  width: 230px;  height: 143px;  background: var(--anzhiyu-card-bg);  display: flex;}#body-wrap.error .aside-list .aside-list-item .content .title {  -webkit-line-clamp: 2;  overflow: hidden;  display: -webkit-box;  -webkit-box-orient: vertical;  line-height: 1.5;  justify-content: center;  align-items: flex-end;  align-content: center;  padding-top: 0.5rem;  color: white;}#body-wrap.error .aside-list .aside-list-item .content time {  display: none;}/* 代码框主题 */#article-container figure.highlight {  border-radius: 10px;}.loading-img {  background: url(https://www.helloimg.com/i/2024/11/09/672f8190562c8.png) no-repeat center center;  background-size: cover;}/* 文章页H1-H6图标样式效果 */h1::before, h2::before, h3::before, h4::before, h5::before, h6::before {-webkit-animation: ccc 1.6s linear infinite ;animation: ccc 1.6s linear infinite ;}@-webkit-keyframes ccc {0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg)}to {    -webkit-transform: rotate(1turn);    transform: rotate(1turn)}}@keyframes ccc {0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg)}to {    -webkit-transform: rotate(1turn);    transform: rotate(1turn)}}#content-inner.layout h1::before {color: #ef50a8 ;font-size: 1.3rem;margin-top: -0.23rem;}#content-inner.layout h2::before {color: #fb7061 ;font-size: 1.1rem;margin-top: -0.12rem;}#content-inner.layout h3::before {color: #ffbf00 ;font-size: 0.95rem;margin-top: -0.09rem;}#content-inner.layout h4::before {color: #a9e000 ;font-size: 0.8rem;margin-top: -0.09rem;}#content-inner.layout h5::before {color: #57c850 ;font-size: 0.7rem;margin-top: 0.0rem;}#content-inner.layout h6::before {color: #5ec1e0 ;font-size: 0.66rem;margin-top: 0.0rem;}/* 翻页按钮居中 */#pagination {width: 100%;margin: auto;}/* 侧栏归档样式start */span.card-archive-list-count {width: auto;text-align: left;font-size: 1.5rem;line-height: 0.9;font-weight: 700;}.card-archive-list-count-group {display: flex;flex-direction: row;align-items: baseline;}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a span:last-child,#aside-content .card-categories ul.card-category-list > .card-category-list-item a span:last-child {width: fit-content;margin-left: 4px;}span.card-archive-list-count {width: auto;text-align: left;font-size: 1.1rem;line-height: 0.9;font-weight: 700;}.card-archive-list-date {font-size: 14px;opacity: 0.6;}li.card-category-list-item {flex: 0 0 31%;}li.card-archive-list-item {flex: 0 0 48%;}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a:hover {color: #000;background-color: #89CFF0;box-shadow: 0 8px 12px -3px #4259ef23;border-radius: 8px;padding-left: 0.5rem;padding-right: 0.5rem;}@media screen and (min-width: 1300px) {#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a:hover {  transform: scale(1.03);}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a:active{  transform: scale(0.97);}}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a {border-radius: 8px;margin: 4px 0;display: flex;flex-direction: column;align-content: space-between;border: 1px solid #e3e8f7;}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a span:first-child {width: auto;flex: inherit;}#aside-content .card-archives ul.card-archive-list {display: flex;flex-direction: row;justify-content: space-between;flex-wrap: wrap;}/* 侧栏归档样式end *//* 归档页 */.layout.hide-aside{max-width:1400px;}#archive,#tag,#category {background: var(--june-card-bg);padding: 25px 10px;}.article-sort-title{margin-top:30px;margin-bottom:20px;}.article-sort-item::before, .article-sort-title::before, .article-sort-title::after {content: none;}.article-sort .year{width:100%!important;border-bottom:dashed 5px var(--june-theme);font-size:26px;margin-top:20px;}.article-sort{border:none;display:flex;flex-wrap:wrap;margin:20px 20px;padding:0;}.article-sort-item:not(.year){padding:8px 10px;width:calc(50% - 0.8rem);margin:0.4rem;border:2px solid var(--june-theme);border-radius:15px;background:var(--card-bg);transition:0.5s;height:120px;}.article-sort-item-a{position:absolute;width:100%;height:100%;}.article-sort-item-img{transition:0.5s;height:90px;width:140px;}.article-sort-item > a >img{border-radius:15px;}.article-sort-item-title {font-size: 22px;padding-left: 10px;margin: 10px 0;line-height:25px;text-overflow:ellipsis;}.article-sort-item-title:hover{transform:none;}.article-sort-meta{height:max-content;position:relative;}.article-sort-meta > .article-meta-wrap{float:left;}.article-sort-meta > .article-sort-item-time{float:right;}.article-sort-item-categories,.article-sort-item-tags{margin:0 3px;padding:5px 8px;border-radius:25px;border:1px solid var(--dark-grey);font-size:12px;transition:0.5s;}.article-sort-item-info > div:not(.article-sort-meta){display:flex;}.article-sort-description,.article-sort-item > i{width:0;opacity:0;overflow:hidden;transition:0.5s;}.article-sort-description {width: 0;height: 59px;vertical-align: middle;margin: 5px 10px 0 15px;text-overflow:ellipsis;}.article-sort-item:hover:not(.year){background-color:var(--june-theme);box-shadow: 0 0 10px var(--june-theme);}.article-sort-item:hover:not(.year){background-color:var(--june-theme);box-shadow: 0 0 10px var(--june-theme);}.article-sort-item:hover:not(.year) .article-sort-description,.article-sort-item:hover:not(.year) > i{width:auto;opacity:1;}.article-sort-item:hover:not(.year) .article-sort-description{width:auto;}.article-sort-item:hover:not(.year) .article-sort-item-img{transition:0.5s;width:0;}.article-sort-item:hover:not(.year) .article-sort-item-title{color:var(--june-white)!important;}.article-sort-item:hover:not(.year) .article-meta-wrap a,.article-sort-item:hover:not(.year) .article-sort-description,.article-sort-item:hover:not(.year) .article-sort-item-time{color:var(--june-light-grey)!important;}.article-sort-item:hover:not(.year) .article-sort-item-categories{border:1.5px solid #212F3C;}.article-sort-item:hover:not(.year) .article-sort-item-tags{border:1.5px solid var(--june-blue);}.article-sort-item:hover:not(.year) .article-sort-item-categories:hover{background: #49b0f5;box-shadow:0 0 5px #212F3C;}.article-sort-item:hover:not(.year) .article-sort-item-tags:hover{background: var(--june-blue);box-shadow:0 0 5px var(--june-blue);}@media screen and (max-width:768px) {.article-sort-item:not(.year) {    width: 100%;}.article-sort-meta > .article-meta-wrap {    display: none;}.article-sort-item-title {    font-size: 16px;}.article-sort-item-img{    width:90px;}}/* 分类页面样式 */#page .category-lists .category-list .category-list-item {position: relative;display: inline-block;padding: 0 1rem;width: 48%;font-weight: 700;margin: 0 0.5% 2% 0.5%;border-radius: var(--border-radius);-webkit-box-shadow: rgb(50 50 50 / 30%) 50px 50px 50px 50px inset;box-shadow: rgb(50 50 50 / 30%) 50px 50px 50px 50px inset;border-radius: 8px;}@media (max-width: 640px) {#page .category-lists .category-list .category-list-item {    width: 95%;    border-radius: 8px;    margin-top: 3px;}}#page .category-lists .category-list .category-list-item::before {display: none;}#page .category-lists .category-list .category-list-item .category-list-link {color: #fff;font-size: 1.5rem;margin-left: 0.4rem;}#page .category-lists .category-list .category-list-item .category-list-link::after {content: "";position: relative;width: 0;bottom: 0;display: block;height: 3px;border-radius: 3px;background: #fff;}#page .category-lists .category-list .category-list-item .category-list-link:hover::after {width: 60%;left: 1%;-webkit-transition: all 0.6s;-moz-transition: all 0.6s;-o-transition: all 0.6s;-ms-transition: all 0.6s;transition: all 0.6s;}#page .category-lists .category-list .category-list-item .category-list-count {color: #fff;font-size: 1.3rem;}#page .category-lists .category-list .category-list-item .category-list-count::before {content: "\f02d";padding-right: 15px;font-family: "Font Awesome 6 Free";}/* #page .category-list-count::before, */#page .category-list-count::after {display: none;}#page .category-lists .category-list li.category-list-item a.category-list-link::before {position: absolute;font-size: 4rem;line-height: 4rem;top: 1rem;right: 1rem;border-radius: 8px;transform: rotate(-15deg);-ms-transform: rotate(-15deg);-moz-transform: rotate(-15deg);-webkit-transform: rotate(-15deg);-o-transform: rotate(-15deg);-webkit-transition: all 0.6s;-moz-transition: all 0.6s;-o-transition: all 0.6s;-ms-transition: all 0.6s;transition: all 0.6s;}#page .category-lists .category-list li.category-list-item a.category-list-link:hover::before {opacity: 0.9;transform: rotate(0);-ms-transform: rotate(0);-moz-transform: rotate(0);-webkit-transform: rotate(0);-o-transform: rotate(0);}/* 优秀文章 */#page .category-lists .category-list li.category-list-item:nth-child(1) {background: #4074f6;background: -webkit-linear-gradient(to right, #667db6, #0082c8, #0082c8, #667db6);}/* 博客总结 */#page .category-lists .category-list li.category-list-item:nth-child(2) {background: -webkit-linear-gradient(left, #ba52ed, #ff99fe);background: -moz-linear-gradient(left, #ba52ed, #ff99fe);background: -o-linear-gradient(left, #ba52ed, #ff99fe);background: -ms-linear-gradient(left, #ba52ed, #ff99fe);background: linear-gradient(to right, #ba52ed, #ff99fe);}/* 博客搭建 */#page .category-lists .category-list li.category-list-item:nth-child(3) {background: -webkit-linear-gradient(left, #6639a6, #3490de);background: -moz-linear-gradient(left, #6639a6, #3490de);background: -o-linear-gradient(left, #6639a6, #3490de);background: -ms-linear-gradient(left, #6639a6, #3490de);background: linear-gradient(to right, #6639a6, #3490de);}#page .category-lists .category-list li.category-list-item:nth-child(4) {background: -webkit-linear-gradient(right, #38ef7d, #11998e);background: -moz-linear-gradient(right, #38ef7d, #11998e);background: -o-linear-gradient(right, #38ef7d, #11998e);background: -ms-linear-gradient(right, #38ef7d, #11998e);background: linear-gradient(to left, #38ef7d, #11998e);}/* 实用教程 */#page .category-lists .category-list li.category-list-item:nth-child(5) {background: -webkit-linear-gradient(left, #b91d73, #f953c6);background: -moz-linear-gradient(left, #b91d73, #f953c6);background: -o-linear-gradient(left, #b91d73, #f953c6);background: -ms-linear-gradient(left, #b91d73, #f953c6);background: linear-gradient(to right, #b91d73, #f953c6);}/* 敲敲代码 */#page .category-lists .category-list li.category-list-item:nth-child(6) {background: -webkit-linear-gradient(left, #f12711, #f5af19);background: -moz-linear-gradient(left, #f12711, #f5af19);background: -o-linear-gradient(left, #f12711, #f5af19);background: -ms-linear-gradient(left, #f12711, #f5af19);background: linear-gradient(to right, #f12711, #f5af19);}/* 生活杂谈 */#page .category-lists .category-list li.category-list-item:nth-child(7) {background: -webkit-linear-gradient(left, #009ad6, #1b315e);background: -moz-linear-gradient(left, #009ad6, #1b315e);background: -o-linear-gradient(left, #009ad6, #1b315e);background: -ms-linear-gradient(left, #009ad6, #1b315e);background: linear-gradient(to right, #009ad6, #1b315e);}/* 标签 */#aside-content .card-tag-cloud a {border: 1px solid;line-height: 1.5;border-radius: 6px;margin: 3px;padding: 0 5px;}.tag-cloud-list a {border: 1px solid;line-height: 1.5;border-radius: 6px;padding: 5px 15px;font-size: 1.2rem;margin: 5px;}#recent-posts>.recent-post-item {position: relative;}/* 最新文章图标 */.newPost-left,.newPost-right {position: absolute;top: 0;left: 0;color: white;padding: 0 15px;background-color: #49b0f5;border-radius: 5px 5px 5px 5px;}/* 置顶文章图标 */.topPost-left,.topPost-right {position: absolute;top: 0;left: 0;color: white;padding: 0 15px;background-color: #49b0f5;border-radius: 5px 5px 5px 5px;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>关于我</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<p><strong>Ciallo～(∠・ω&lt; )⌒★</strong> 你好，如你所见，这是我自己的个人博客。</p><p>简单介绍一下我自己吧，喜欢画画、编程，超喜欢GAlGAME！！！是一位柚子厨、八月厨、枕厨、中二厨、紫厨、key厨、F厨、月厨、sa ga厨、前翼厨、feng厨、颜艺厨、hook厨、smee厨（此处省略800字……）<br>希望自己也能做出商业化水准的GALGAME，不过目前看来还有很长的路要走呢~希望未来也能保持对GALGAME的这份热爱！</p><p>搭建这个网站主要是记录一些东西，日后也会将一些代码上传到这里以供查阅，至于网站为什么是这个名字，其实是为了纪念我的入坑作————<a href="https://baike.baidu.com/item/%E6%B0%B4%E6%97%A0%E6%9C%88%E5%B5%A9/5043272">水无月嵩</a>老师的<a href="https://baike.baidu.com/item/%E5%A4%A9%E9%99%8D%E4%B9%8B%E7%89%A9/27868?lemmaFrom=lemma_starMap&amp;fromModule=lemma_starMap&amp;starNodeId=90920d34eaa2b3d8f053173c&amp;lemmaIdFrom=5043272">《天降之物》</a>啦（之后便在二次元的路上越走越远……）</p><p>现在这个网站只是实现了一些基础功能，未来肯定还是会不断完善下去哒~</p><p>下面的是一些我推荐的GALGAME哦，从废萌到剧情作都有，希望你会喜欢~</p><ol><li><p><strong>甜糖热恋</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c77ea694bb.jpg" alt=""></p></li><li><p><strong>星空列车与白的旅行</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c781be08ee.png" alt=""></p></li><li><p><strong>Eden</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c783ddf8ec.jpg" alt=""></p></li><li><p><strong>Summer Pockets Reflection Blue</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c785e745b7.jpg" alt=""></p></li><li><p><strong>晴霁之后定是菜花盛开的好天气</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c787dc4476.jpg" alt=""></p></li><li><p><strong>天津罪</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c789649def.png" alt=""></p></li><li><p><strong>秽翼的尤斯蒂娅</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c78c27e2b3.jpg" alt=""></p></li><li><p><strong>悠久之翼</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c78e80577f.jpeg" alt=""></p></li><li><p><strong>生命的备件</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c79197d3d5.jpg" alt=""></p></li><li><p><strong>白色相簿</strong><br><img src="https://www.helloimg.com/i/2024/11/19/673c7b51ced05.png" alt=""></p></li></ol>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/ali_font.js"/>
      <url>/js/ali_font.js</url>
      
        <content type="html"><![CDATA[!(function (c) {    var l,      h,      a,      t,      i,      v =        '<svg><symbol id="icon-dragon_chen" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-498.122105 265.620211L431.157895 754.526316V485.052632h-66.074948c-14.470737 110.645895-44.355368 197.066105-102.696421 260.742736l-39.747368-36.432842C306.526316 617.876211 323.368421 462.901895 323.368421 242.526316V215.578947h377.263158v53.894737H377.182316c-0.404211 58.260211-2.209684 112.128-6.359579 161.684211H700.631579v53.894737h-122.152421a481.172211 481.172211 0 0 0 76.826947 119.70021l66.479158-39.855158 27.728842 46.214737-54.460631 32.687158c29.507368 24.953263 63.757474 45.675789 102.80421 58.098526l-16.303158 51.361684c-134.224842-42.711579-222.773895-167.073684-261.551158-268.207157H485.052632v221.857684l68.985263-41.391158 27.728842 46.214737-109.783579 65.886316zM646.736842 377.263158h-215.578947v-53.894737h215.578947v53.894737z" fill="#231F20" ></path></symbol><symbol id="icon-dog_xu" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-375.592421 150.393263c33.684211 44.544 75.210105 74.698105 124.739369 90.812632l11.425684 3.718737 10.401684-6.009264C781.204211 727.740632 808.421053 622.565053 808.421053 592.842105h-53.894737c0 22.069895-19.132632 80.869053-33.711158 103.504842-34.816-14.605474-64.538947-39.262316-89.249684-74.13221 48.316632-55.269053 92.079158-117.328842 120.535579-179.900632l-49.044211-22.285473c-23.767579 52.250947-59.742316 104.717474-100.055579 152.656842-24.010105-50.930526-41.148632-115.927579-51.658105-195.395369H700.631579v-53.894737h-155.189895A1848.050526 1848.050526 0 0 1 538.947368 161.684211h-53.894736c0 58.206316 2.155789 112.074105 6.494315 161.68421H323.368421v26.947368c0 216.549053-13.177263 263.545263-100.702316 359.046737l39.747369 36.432842c63.326316-69.093053 92.806737-118.272 105.714526-206.848H485.052632v-53.894736h-111.319579a1742.147368 1742.147368 0 0 0 3.449263-107.789474h120.158316c12.611368 98.250105 35.031579 177.475368 67.395368 238.187789-61.978947 65.536-128.053895 117.975579-173.298526 142.282106l25.519158 47.481263c47.589053-25.573053 114.095158-77.446737 177.55621-142.821053z m125.170526-411.971368l-80.842105-80.842106-38.103579 38.103579 80.842105 80.842106 38.103579-38.103579z" fill="#231F20" ></path></symbol><symbol id="icon-dog" viewBox="0 0 1024 1024"><path d="M894.814316 904.434526l83.240421-183.134315-13.824-13.204211c-0.485053-0.458105-45.648842-47.589053-47.939369-185.263158-0.134737-7.922526-0.134737-33.953684-0.134736-55.996631-30.693053 15.306105-70.090105 19.887158-106.09179 19.887157-92.752842 0-163.624421-23.983158-210.647579-71.275789a192.512 192.512 0 0 1-27.944421-36.513684H377.263158v377.263158c342.662737 0 403.105684 51.092211 494.592 128.377263 7.922526 6.682947 15.521684 13.312 22.959158 19.86021z" fill="#85C3DE" ></path><path d="M326.063158 282.947368c0 34.250105-13.231158 44.463158-29.642105 44.463158s-29.642105-10.213053-29.642106-44.463158c0-34.223158 13.231158-44.463158 29.642106-44.463157s29.642105 10.24 29.642105 44.463157zM269.473684 430.295579v311.646316L190.275368 916.210526h59.203369L323.368421 753.637053V377.263158h-26.947368c-119.403789 0-172.732632-53.382737-185.505685-107.789474h35.624421c51.092211 0 68.581053-15.764211 120.535579-62.544842 12.773053-11.506526 28.079158-25.276632 47.023158-41.741474l18.351158-15.952842-69.658947-99.139368-44.085895 30.989474 41.768421 59.472842c-11.183158 9.862737-20.884211 18.593684-29.480421 26.327579C180.736 212.156632 176.235789 215.578947 146.539789 215.578947H53.894737v26.947369c0 88.710737 66.910316 178.149053 215.578947 187.769263z m216.710737-161.414737c2.290526 71.733895 28.698947 136.326737 75.048421 182.918737C618.711579 509.628632 702.437053 538.947368 810.091789 538.947368c18.593684 0 36.190316-1.158737 52.628211-3.449263 3.745684 111.265684 33.630316 170.334316 51.496421 196.015158l-38.507789 84.722526C782.174316 742.049684 688.774737 700.631579 377.263158 700.631579v53.894737c34.277053 0 65.697684 0.512 94.639158 1.509052L374.595368 970.105263h59.203369l96.013474-211.240421c66.182737 4.338526 117.005474 11.829895 157.911578 22.016L626.229895 916.210526h59.176421l54.16421-119.134315c47.616 18.405053 79.737263 42.091789 113.125053 69.739789L805.753263 970.105263h59.203369l113.071157-248.778105-13.824-13.204211c-0.485053-0.458105-45.648842-47.589053-47.939368-185.263158C985.168842 498.553263 1024 447.811368 1024 377.263158c0-95.205053-66.506105-161.684211-161.684211-161.684211v53.894737c65.482105 0 107.789474 42.307368 107.789474 107.789474 0 89.088-87.013053 107.789474-160.013474 107.789474-92.752842 0-163.624421-23.983158-210.647578-71.27579-30.315789-30.504421-45.891368-65.832421-53.35579-98.735158 11.210105 6.952421 22.932211 13.338947 35.274105 19.186527l23.04-48.720843c-92.106105-43.654737-148.992-128.646737-219.243789-243.981473l-46.026105 28.05221c49.448421 81.246316 92.968421 148.506947 147.051789 199.302737z" fill="#231F20" ></path></symbol><symbol id="icon-goat" viewBox="0 0 1024 1024"><path d="M548.378947 646.736842a952.32 952.32 0 0 1 140.90779-161.68421H107.789474c0 107.600842 0 107.600842-63.649685 169.283368l-13.069473 12.665263L66.721684 754.526316h417.172211c20.345263-41.472 43.654737-77.446737 64.485052-107.789474z" fill="#F7C768" ></path><path d="M608.256 144.734316C555.762526 115.577263 506.098526 107.789474 485.052632 107.789474V53.894737c32.579368 0 91.270737 11.452632 149.369263 43.735579 75.290947 41.822316 130.694737 94.531368 171.385263 150.878316C755.873684 288.013474 697.101474 323.368421 646.736842 323.368421h-107.789474v-53.894737h107.789474c20.506947 0 48.424421-11.210105 80.437895-31.285895a471.04 471.04 0 0 0-118.918737-93.453473zM832.673684 342.231579c-16.384 0-29.642105 10.24-29.642105 44.463158 0 34.250105 13.231158 44.463158 29.642105 44.463158s29.642105-10.213053 29.642105-44.463158c0-34.223158-13.231158-44.463158-29.642105-44.463158zM1024 619.789474C1024 347.109053 901.066105 122.448842 686.753684 3.395368l-26.165895 47.104C914.324211 191.461053 964.688842 440.400842 969.647158 592.842105h-84.506947c-17.92-35.624421-45.352421-69.12-87.013053-101.995789l-16.788211-13.285053-16.734315 13.392842c-66.128842 52.897684-134.629053 127.083789-187.311158 209.677474H102.965895l-8.272842-20.318316C159.043368 617.013895 161.684211 603.109053 161.684211 485.052632v-53.894737h485.052631v-53.894737H161.684211c0-80.384 14.309053-110.026105 66.586947-137.916632l-25.384421-47.535158C123.365053 234.226526 107.789474 291.920842 107.789474 377.263158v107.789474c0 107.600842 0 107.600842-63.649685 169.283368l-13.069473 12.665263L110.618947 862.315789h58.206316l-43.897263-107.789473h103.477895l43.897263 107.789473h58.206316l-43.897263-107.789473h259.47621C508.981895 824.939789 485.052632 899.152842 485.052632 970.105263h53.894736c0-68.688842 27.270737-144.060632 68.958316-215.578947H687.157895c7.410526 0 13.473684 6.063158 13.473684 13.473684V862.315789h53.894737v-94.315789c0-37.160421-30.208-67.368421-67.368421-67.368421h-44.65179c40.771368-58.017684 89.438316-111.427368 138.913684-153.626947C841.512421 600.037053 862.315789 655.225263 862.315789 754.526316h53.894737c0-38.912-2.748632-74.482526-11.102315-107.789474H1024v-26.947368z" fill="#231F20" ></path></symbol><symbol id="icon-goat_wei" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 50.202947c52.304842 70.925474 136.973474 152.144842 232.528843 190.383158l19.994947-50.041263c-109.271579-43.708632-202.805895-152.629895-238.780632-217.49221H808.421053v-53.894737H538.947368v-53.894737h215.578948v-53.894737h-215.578948V161.684211h-53.894736v161.68421h-215.578948v53.894737h215.578948v53.894737H215.578947v53.894737h255.757474c-35.974737 64.862316-129.536 173.783579-238.807579 217.49221l20.021895 50.041263c95.528421-38.238316 180.197053-119.484632 232.501895-190.383158V808.421053h53.894736v-246.218106z" fill="#231F20" ></path></symbol><symbol id="icon-dragon" viewBox="0 0 1024 1024"><path d="M366.376421 344.441263l152.980211-152.98021c43.142737-43.142737 141.204211-9.216 270.201263 115.738947-15.225263 9.835789-25.114947 15.818105-44.13979 32.256s-38.076632 35.489684-59.418947 56.832c-4.203789 4.203789-51.173053 53.221053-78.740211 82.027789-10.805895-12.126316-22.743579-24.171789-34.654315-36.082526L493.136842 362.792421l-54.218105 54.218105-72.542316-72.569263zM862.315789 512c0 46.834526-45.352421 80.842105-107.789473 80.842105-108.948211 0-189.359158-28.806737-267.129263-56.697263C414.100211 509.871158 344.872421 485.052632 258.182737 485.052632 80.788211 485.052632 0 588.126316 0 683.897263h53.894737C73.216 659.779368 135.302737 646.736842 177.340632 646.736842c77.338947 0 223.124211 23.282526 291.893894 47.912421C547.462737 722.701474 615.989895 754.526316 734.315789 754.526316 862.315789 754.526316 916.210526 670.315789 916.210526 512h-53.894737z" fill="#FF8787" ></path><path d="M552.421053 1024c-69.766737 0-113.825684-13.958737-156.402527-27.459368-54.487579-17.273263-110.807579-35.004632-232.421052-26.516211l-3.826527-53.733053c131.718737-9.458526 195.934316 10.967579 252.52379 28.887579 42.226526 13.365895 78.686316 24.926316 140.126316 24.926316 92.752842 0 148.210526-57.936842 148.210526-113.960421 0-16.949895-5.524211-101.618526-114.634105-101.618526-64.970105 0-112.747789 23.336421-163.328 48.02021C365.325474 830.571789 300.301474 862.315789 204.288 862.315789 85.908211 862.315789 0 787.294316 0 683.897263 0 588.126316 80.788211 485.052632 258.182737 485.052632c86.689684 0 155.917474 24.818526 229.214316 51.09221 45.810526 16.410947 92.564211 33.172211 145.488842 44.166737 9.000421-7.033263 13.850947-16.276211 13.850947-26.758737 0-37.187368-37.672421-74.859789-74.13221-111.265684l-3.287579-3.287579 38.103579-38.103579 3.260631 3.287579C652.853895 446.275368 700.631579 494.026105 700.631579 553.552842c0 12.719158-2.802526 24.926316-7.976421 36.109474A594.997895 594.997895 0 0 0 754.526316 592.842105c62.437053 0 107.789474-34.007579 107.789473-80.842105 0-58.853053-52.870737-110.268632-108.840421-164.702316l-8.057263-7.841684c-19.024842 16.437895-38.076632 35.489684-59.418947 56.832l-38.103579-38.103579c74.805895-74.832842 134.898526-134.898526 268.314947-141.931789V55.619368c-63.407158 7.787789-120.993684 39.424-121.667368 39.801264l-15.818105 8.811789-14.120421-11.344842C731.701895 66.452211 709.712842 53.894737 673.684211 53.894737c-41.418105 0-74.347789 25.869474-109.190737 53.301895-26.624 20.911158-54.137263 42.549895-86.851369 53.194105L469.342316 161.684211h-69.093053l-105.525895 105.525894-38.103579-38.130526L324.015158 161.684211H161.684211V107.789474h303.104c22.231579-8.272842 43.708632-25.168842 66.398315-42.981053C569.829053 34.438737 613.618526 0 673.684211 0c48.909474 0 81.408 17.946947 110.888421 40.097684C813.702737 26.300632 877.729684 0 943.157895 0h26.947368v323.368421h-53.894737v-53.167158c-54.164211 3.098947-92.914526 15.845053-127.002947 36.675369l1.832421 1.778526C852.587789 368.505263 916.210526 430.376421 916.210526 512c0 60.928-43.708632 109.945263-107.789473 127.622737V700.631579h53.894736v-53.894737h53.894737v53.894737h53.894737v53.894737h-53.894737v53.894737h-53.894737v-53.894737h-53.894736c-29.722947 0-53.894737-24.171789-53.894737-53.894737v-53.894737c-118.325895 0-207.063579-31.797895-285.318737-59.877053C400.437895 562.229895 335.494737 538.947368 258.182737 538.947368 117.059368 538.947368 53.894737 611.732211 53.894737 683.897263 53.894737 757.221053 115.738947 808.421053 204.288 808.421053c11.910737 0 23.228632-0.538947 34.034526-1.536C248.454737 796.321684 269.473684 770.640842 269.473684 739.166316c0-33.118316-43.088842-70.979368-58.152421-81.596632l30.935579-44.139789c8.299789 5.793684 81.111579 58.664421 81.111579 125.736421 0 19.429053-4.527158 37.052632-10.994526 52.304842 30.773895-10.051368 58.314105-23.498105 86.662737-37.349053C452.877474 727.848421 508.577684 700.631579 585.997474 700.631579 702.410105 700.631579 754.526316 778.725053 754.526316 856.144842 754.526316 938.657684 678.912 1024 552.421053 1024z m-21.180632-623.104L493.136842 362.792421l137.889684-137.889684 38.103579 38.103579-137.889684 137.889684z m-126.760421-18.351158l-38.103579-38.103579 152.980211-152.98021 38.103579 38.103579-152.980211 152.98021z m282.004211-218.624c15.494737-9.754947 43.331368-31.447579 43.331368-31.447579-25.734737-27.809684-49.556211-33.333895-67.368421-29.07621-19.240421 4.608-37.753263 24.602947-37.753263 24.602947s42.253474 22.447158 61.790316 35.920842z" fill="#231F20" ></path></symbol><symbol id="icon-horse" viewBox="0 0 1024 1024"><path d="M776.003368 646.736842c16.599579-99.947789 43.439158-181.086316 83.213474-256.538947l6.817684-12.934737H269.473684c-36.756211 0-53.894737 54.945684-53.894737 92.05221 0 46.753684 6.656 77.527579 70.278737 176.074106l84.533895 128.269473L498.876632 646.736842h277.126736z" fill="#FFAF6E" ></path><path d="M1024 0v404.210526c0 33.333895 0 134.736842-92.079158 134.736842h-13.824l-78.362947-109.056c-22.743579 49.906526-40.340211 103.046737-53.490527 162.950737h115.092211C937.310316 592.842105 970.105263 625.637053 970.105263 661.638737c0 60.631579-69.389474 154.300632-77.312 164.75621l-43.008-32.471579C875.466105 759.861895 916.210526 693.813895 916.210526 661.638737c0-5.982316-8.919579-14.901895-14.901894-14.901895h-125.332211C761.128421 736.121263 754.526316 840.569263 754.526316 970.105263h-53.894737c0-283.971368 31.097263-453.605053 110.888421-605.049263l20.318316-38.534737 112.801684 156.995369c14.443789-4.419368 25.465263-20.938105 25.465263-79.306106V0h53.894737z m-161.684211 161.684211h53.894737V0h-53.894737v80.842105c-17.381053-14.955789-38.184421-26.947368-80.842105-26.947368h-134.736842v53.894737h134.736842c37.672421 0 80.842105 40.906105 80.842105 53.894737z m-107.789473 0h-215.578948v53.894736h161.684211l53.894737-53.894736zM300.894316 766.544842L400.680421 916.210526h64.754526l-95.043368-142.551579L498.876632 646.736842h167.855157a1212.631579 1212.631579 0 0 1 9.431579-53.894737h-199.383579l-175.885473 173.702737z m109.97221-184.400842l-37.861052-38.319158-132.419369 130.802526C173.729684 571.095579 161.684211 529.812211 161.684211 469.315368 161.684211 398.578526 199.464421 323.368421 269.473684 323.368421h323.368421l53.894737-53.894737H269.473684c-6.709895 0-13.258105 0.565895-19.698526 1.482105C234.927158 249.451789 204.638316 215.578947 160.633263 215.578947 65.967158 215.578947 0 349.291789 0 469.315368c0 70.170947 16.141474 136.650105 49.232842 202.671158L6.197895 723.833263l41.472 34.41179 66.128842-79.737264-8.704-16.033684C83.105684 622.133895 53.894737 558.214737 53.894737 469.315368 53.894737 368.451368 106.765474 269.473684 160.633263 269.473684c13.231158 0 25.815579 9.889684 35.43579 20.533895C142.874947 321.967158 107.789474 388.500211 107.789474 469.315368c0 78.201263 19.698526 130.937263 93.642105 243.981474l-55.296 54.622316L280.899368 970.105263h64.754527l-130.048-195.072 195.260631-192.889263z" fill="#231F20" ></path></symbol><symbol id="icon-monkey_shen" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#BBC4C9" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 134.736842h161.684211v53.894737h53.894737V269.473684h-215.578948V161.684211h-53.894736v107.789473h-215.578948v431.157895h53.894737v-53.894737h161.684211v215.578947h53.894736v-215.578947z m0-161.68421h161.684211v107.789473h-161.684211v-107.789473z m-215.578947 0h161.684211v107.789473h-161.684211v-107.789473z m215.578947-161.684211h161.684211v107.789474h-161.684211v-107.789474z m-215.578947 0h161.684211v107.789474h-161.684211v-107.789474z" fill="#231F20" ></path></symbol><symbol id="icon-ox_chou" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-161.68421 188.631579h-159.555369c13.985684-172.813474 43.115789-357.429895 70.817684-385.158737L700.631579 269.473684H323.368421v53.894737h107.169684c-1.940211 45.756632-8.192 103.962947-15.76421 161.684211H323.368421v53.894736h83.968c-9.862737 68.446316-20.264421 130.128842-25.734737 161.684211H215.578947v53.894737h592.842106v-53.894737z m-346.543158-161.684211h149.800421a3313.717895 3313.717895 0 0 0-16.842105 161.684211h-158.477474c6.036211-35.247158 16.114526-95.636211 25.519158-161.684211z m22.608842-215.578947h171.735579c-15.198316 41.121684-27.405474 100.594526-36.890948 161.684211h-150.123789c7.383579-57.505684 13.419789-115.361684 15.279158-161.684211z" fill="#231F20" ></path></symbol><symbol id="icon-monkey" viewBox="0 0 1024 1024"><path d="M757.733053 485.052632H565.894737a80.842105 80.842105 0 0 0-80.842105 80.842105v215.578947c0 40.96 43.546947 99.678316 77.446736 139.210105C596.426105 960.215579 603.055158 970.105263 603.055158 970.105263H754.526316s15.144421-18.674526 45.891368-58.071579S862.315789 809.984 862.315789 717.608421c0-89.573053-47.993263-166.346105-104.582736-232.555789z" fill="#C3D686" ></path><path d="M538.947368 1024h-53.894736c0-32.794947 25.869474-87.417263 77.446736-103.316211C528.599579 881.152 485.052632 822.433684 485.052632 781.473684c0-44.570947 36.271158-80.842105 80.842105-80.842105h80.842105v53.894737h-80.842105a26.947368 26.947368 0 0 0-26.947369 26.947368c0 19.725474 36.675368 77.473684 92.133053 134.736842h88.602947c20.210526-14.147368 88.737684-71.464421 88.737685-198.602105 0-108.382316-93.237895-202.967579-168.151579-278.986105-49.502316-50.202947-88.576-89.842526-98.735158-128.61979-11.749053-44.732632-21.584842-112.586105-26.327579-148.318315H377.263158c-45.136842 0-89.519158 8.434526-121.802105 53.894736H431.157895v53.894737c-97.28 0-107.789474 113.071158-107.789474 161.684211v53.894737h53.894737v161.68421h-53.894737v-107.789474h-26.947368c-170.253474 0-188.631579-94.234947-188.631579-134.736842 0-31.043368 35.220211-72.326737 55.727158-93.722947 2.694737-14.686316 5.847579-28.348632 9.431579-41.013895H161.684211V215.578947h31.528421C239.642947 120.993684 317.224421 107.789474 377.263158 107.789474h185.640421l2.802526 23.794526c0.134737 1.050947 12.719158 106.657684 27.944421 164.756211 6.494316 24.872421 44.624842 63.514947 84.965053 104.448C760.481684 483.813053 862.315789 587.129263 862.315789 717.608421c0 92.375579-31.124211 155.028211-61.898105 194.425263C904.919579 892.146526 970.105263 803.004632 970.105263 673.684211c0-91.405474-42.819368-154.381474-84.237474-215.255579C847.791158 402.458947 808.421053 344.576 808.421053 269.473684c0-119.349895 87.093895-161.684211 161.68421-161.68421v53.894737c-32.417684 0-107.789474 10.509474-107.789474 107.789473 0 58.502737 31.555368 104.933053 68.096 158.639158C974.282105 492.597895 1024 565.679158 1024 673.684211c0 177.286737-108.301474 296.421053-269.473684 296.421052h-161.684211c-37.672421 0-53.894737 40.906105-53.894737 53.894737zM229.214316 269.473684a384.808421 384.808421 0 0 0-14.012632 58.341053l-1.401263 8.488421-6.090105 6.117053c-22.878316 22.932211-44.813474 52.601263-46.026105 62.275368 0 56.805053 53.76 75.264 107.789473 79.386947V431.157895c0-58.691368 13.473684-119.619368 46.511158-161.684211h-86.770526zM323.368421 1024h-53.894737c0-32.794947 25.869474-87.417263 77.446737-103.316211C313.020632 881.152 269.473684 822.433684 269.473684 781.473684c0-44.570947 36.271158-80.842105 80.842105-80.842105h45.16379A188.847158 188.847158 0 0 1 565.894737 592.842105h134.736842v53.894737h-134.736842c-74.293895 0-134.736842 60.442947-134.736842 134.736842v26.516211l-53.894737 0.377263V781.473684c0-9.162105 0.646737-18.135579 1.913263-26.947368H350.315789c-14.848 0-26.947368 12.072421-26.947368 26.947368 0 19.725474 36.675368 77.473684 92.133053 134.736842H431.157895v53.894737h-53.894737c-37.672421 0-53.894737 40.906105-53.894737 53.894737z" fill="#231F20" ></path></symbol><symbol id="icon-horse_wu" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#FF8787" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 26.947368h269.473685v-53.894736H538.947368v-161.684211h161.684211v-53.894737H411.001263c12.045474-33.28 20.156632-69.793684 20.156632-107.789473h-53.894737c0 121.963789-105.364211 233.391158-106.415158 234.496l38.858105 37.349052c2.883368-3.018105 43.816421-46.133895 77.392842-110.160842H485.052632v161.684211H215.578947v53.894736h269.473685v323.368421h53.894736V538.947368z" fill="#231F20" ></path></symbol><symbol id="icon-ox" viewBox="0 0 1025 1024"><path d="M540.294737 754.526316h215.578947c20.210526 0 35.112421 1.374316 53.894737 4.581052 91.863579 15.656421 145.354105 67.691789 161.684211 86.069895V916.210526h53.894736V635.580632l-7.895579-7.895579c-9.269895-9.269895-36.513684-49.232842-44.032-196.527158H540.294737a161.684211 161.684211 0 0 0-161.684211 161.68421v131.098948c43.304421 20.210526 97.28 30.585263 161.684211 30.585263z" fill="#FFAF6E" ></path><path d="M1025.347368 635.580632V916.210526h-53.894736v-71.033263c-16.330105-18.405053-69.820632-70.413474-161.684211-86.069895V916.210526h-53.894737v-161.68421h-107.789473v215.578947h-53.894737V700.631579h161.68421c100.998737 0 172.570947 38.669474 215.578948 71.868632v-115.738948c-33.684211-43.627789-51.712-137.458526-53.706106-279.498105H701.978947c-76.934737 0-127.218526-26.219789-175.804631-51.550316a1556.048842 1556.048842 0 0 0-26.839579-13.743158c-26.839579 26.004211-66.209684 44.921263-115.738948 55.511579 24.441263 22.986105 60.874105 52.116211 106.469053 72.838737l-22.312421 49.044211c-76.584421-34.816-129.589895-88.926316-150.824421-113.125053-10.644211 0.619789-21.477053 1.024-32.687158 1.024a473.734737 473.734737 0 0 1-123.365053-15.952842l-93.022315 186.314105 68.581052 53.86779C167.882105 579.557053 237.891368 538.947368 324.715789 538.947368v53.894737c-95.986526 0-170.361263 62.490947-171.088842 63.137684l-16.78821 14.282106-136.838737-107.358316 109.729684-219.809684C46.430316 314.448842 1.347368 267.371789 1.347368 199.868632 1.347368 89.815579 121.586526 53.894737 163.031579 53.894737v53.894737c-14.120421 0-107.789474 17.165474-107.789474 92.079158C55.242105 290.465684 192.188632 323.368421 284.240842 323.368421c67.907368 0 122.421895-12.988632 157.696-35.624421-42.711579-14.336-95.097263-23.120842-169.337263-18.324211l-3.503158-53.786947c95.878737-6.117053 160.148211 8.515368 211.429053 28.833684C484.244211 235.439158 486.4 225.818947 486.4 215.578947c0-48.855579-57.829053-76.288-58.394947-76.557473l22.393263-49.017263C454.063158 91.648 540.294737 131.826526 540.294737 215.578947c0 18.566737-3.422316 35.84-9.997474 51.631158 7.060211 3.584 13.985684 7.168 20.776421 10.698106C597.854316 302.322526 638.248421 323.368421 701.978947 323.368421h269.473685v26.947368c0 214.689684 35.220211 266.590316 45.999157 277.369264l7.895579 7.895579z m-729.384421 25.141894l-98.789052 118.541474 86.797473 137.835789 45.594948-28.725894-65.913263-104.690527 37.052631-44.43621C358.642526 785.192421 439.080421 808.421053 540.294737 808.421053v-53.894737c-99.893895 0-175.077053-24.549053-223.474526-72.946527l-20.857264-20.857263z" fill="#231F20" ></path></symbol><symbol id="icon-rabbit_mao" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#7DD47F" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-377.263158-188.631579h107.789474v323.368421c-20.48 0-39.936-11.264-40.016842-11.317895l-27.728842 46.214737c3.206737 1.940211 32.660211 18.997895 67.745684 18.997895 30.746947 0 53.894737-23.147789 53.894737-53.894737V269.473684h-215.578948v538.947369h53.894737V323.368421z m-107.789473 242.526316v-242.526316h-53.894737v196.904421l-107.789474 40.421053v-243.927579l169.094737-48.316632-14.821053-51.819789L269.473684 276.102737v304.801684l-36.405895 13.662316 18.917053 50.472421 178.741895-67.018105c-5.039158 69.928421-55.269053 106.981053-165.133474 122.933894l7.733895 53.328842C325.712842 746.657684 485.052632 723.536842 485.052632 565.894737z" fill="#231F20" ></path></symbol><symbol id="icon-rabbit" viewBox="0 0 1024 1024"><path d="M680.96 488.744421a1666.667789 1666.667789 0 0 0-54.433684-23.95621c-16.006737 12.234105-33.899789 20.264421-60.631579 20.264421h-80.842105c-36.810105 0-83.644632 30.396632-104.394106 67.772631-42.819368 77.123368-53.409684 117.813895-11.021473 201.701053C397.096421 808.879158 431.157895 876.409263 431.157895 970.105263h338.539789l68.338527-138.859789c20.129684-40.96 24.252632-73.701053 24.252631-110.349474 0.026947-57.397895-25.061053-159.717053-181.328842-232.151579z" fill="#FFBDD8" ></path><path d="M862.315789 720.896c0 36.621474-4.122947 69.389474-24.252631 110.349474L769.697684 970.105263H485.052632v-53.894737h48.370526C507.877053 880.074105 485.052632 833.509053 485.052632 781.473684c0-59.418947 24.171789-113.313684 63.218526-152.360421l38.103579 38.103579A161.091368 161.091368 0 0 0 538.947368 781.473684c0 54.784 35.381895 104.043789 63.514948 134.736842h133.712842l53.490526-108.759579c15.710316-31.851789 18.755368-55.834947 18.755369-86.554947 0-80.976842-63.434105-150.096842-178.607158-195.503158-17.542737 8.138105-38.292211 13.554526-63.919158 13.554526h-80.842105c-13.958737 0-43.924211 15.979789-57.290106 40.016843l-47.104-26.165895C401.408 515.449263 448.242526 485.052632 485.052632 485.052632h80.842105c37.268211 0 57.478737-15.440842 79.090526-36.45979C625.367579 336.195368 549.753263 269.473684 485.052632 269.473684h-107.789474a21.288421 21.288421 0 0 0-5.955369 2.021053A683.762526 683.762526 0 0 0 302.187789 194.021053c-35.84-34.223158-61.763368-58.933895-94.908631-79.440842A42.442105 42.442105 0 0 0 185.478737 107.789474a22.824421 22.824421 0 0 0-17.381053 7.194947c-10.913684 11.425684-6.063158 28.240842 1.428211 39.181474 21.989053 32.121263 47.912421 56.858947 83.752421 91.109052 20.614737 19.671579 49.259789 43.169684 77.392842 63.08379C281.007158 367.400421 215.578947 484.432842 215.578947 592.842105c0 74.482526 24.791579 124.065684 51.065264 176.586106C294.534737 825.209263 323.368421 882.903579 323.368421 970.105263h-53.894737c0-74.482526-24.791579-124.065684-51.065263-176.586105C190.517895 737.738105 161.684211 680.043789 161.684211 592.842105c0-90.866526 42.226526-197.685895 93.453473-274.485894a803.759158 803.759158 0 0 1-39.046737-34.115369C177.852632 247.754105 150.231579 221.399579 125.035789 184.616421c-24.441263-35.759158-22.797474-78.686316 4.069053-106.819368 26.300632-27.567158 70.898526-31.043368 106.522947-9.000421 37.941895 23.444211 65.562947 49.798737 103.774316 86.258526 9.970526 9.512421 33.037474 32.309895 56.93979 60.550737h68.634947c-27.621053-37.780211-60.416-72.730947-88.522105-99.543579-28.833684-27.540211-54.730105-52.116211-84.533895-74.024421L326.305684 0.296421c31.232 23.228632 57.802105 48.532211 87.309474 76.719158 53.840842 51.388632 94.450526 100.594526 121.74821 146.83621 82.836211 26.650947 150.042947 116.870737 165.025685 230.750316l1.724631 13.177263-9.404631 9.404632c-3.772632 3.772632-7.706947 7.653053-11.802948 11.587368C837.227789 561.178947 862.315789 663.498105 862.315789 720.896zM309.463579 754.526316c3.934316 8.057263 7.895579 16.087579 11.991579 24.144842C348.887579 832.970105 377.263158 889.128421 377.263158 970.105263h53.894737c0-93.696-34.061474-161.226105-61.520842-215.578947h-60.173474z m597.90821 53.894737c-3.422316 9.404632-7.814737 19.806316-13.770105 31.959579L829.790316 970.105263h60.065684l52.143158-105.957052c10.778947-21.935158 17.515789-40.016842 21.90821-55.727158h-56.535579zM514.694737 390.736842c0-34.223158-13.231158-44.463158-29.642105-44.463158s-29.642105 10.24-29.642106 44.463158c0 34.250105 13.231158 44.463158 29.642106 44.463158s29.642105-10.213053 29.642105-44.463158z" fill="#231F20" ></path></symbol><symbol id="icon-rat_zi" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#85C3DE" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 188.631579v-215.578947h269.473685v-53.894737H538.947368v-39.585684c26.543158-18.081684 94.585263-65.050947 177.852632-127.488L700.631579 215.578947H323.368421v53.894737h295.316211a4221.008842 4221.008842 0 0 1-121.640421 85.369263l-11.991579 8.003369V431.157895H242.526316v53.894737h242.526316v215.578947c0 48.343579-13.850947 53.894737-134.736843 53.894737v53.894737c105.391158 0 188.631579 0 188.631579-107.789474z" fill="#231F20" ></path></symbol><symbol id="icon-rat" viewBox="0 0 1024 1024"><path d="M727.659789 431.157895c-132.581053 0-220.348632 47.454316-285.803789 154.354526-19.779368 32.309895-15.845053 76.503579-9.404632 96.579368 3.260632 10.159158 7.760842 18.647579 12.422737 25.546106C464.761263 737.010526 499.927579 754.526316 538.947368 754.526316h66.829474c1.158737 17.893053-1.967158 34.762105-15.144421 53.975579-12.692211 18.539789-37.807158 40.151579-56.32 54.810947 25.249684-0.673684 52.709053-0.997053 83.240421-0.997053C877.487158 862.315789 970.105263 711.922526 970.105263 571.176421 936.421053 512 882.364632 431.157895 727.659789 431.157895z" fill="#85C3DE" ></path><path d="M210.432 1012.897684l-43.573895-31.690105c106.954105-147.051789 185.317053-171.196632 423.828211-172.705684 21.396211-31.258947 16.249263-56.266105 9.377684-89.70779-3.557053-17.138526-7.221895-34.842947-7.221895-54.433684 0-68.958316 25.330526-104.636632 63.407158-136.973474l34.896842 41.040842c-29.453474 25.061053-44.409263 46.780632-44.409263 95.932632 0 14.093474 2.937263 28.402526 6.063158 43.546947 5.901474 28.510316 12.8 62.032842-1.131789 99.462737 166.373053-10.24 264.542316-96.902737 264.542315-236.193684C916.210526 418.330947 827.580632 323.368421 684.921263 323.368421c-83.644632 0-153.303579 29.696-174.187789 39.612632a224.875789 224.875789 0 0 1-20.533895 31.339789l-41.741474-34.115368 20.884211 17.057684-20.911158-16.976842C448.781474 359.828211 485.052632 314.287158 485.052632 262.736842c0-34.816-8.946526-60.766316-26.570106-77.069474-17.515789-16.249263-44.786526-24.602947-81.219368-24.953263V323.368421h-53.894737V109.783579l24.872421-1.913263c64.700632-4.931368 114.095158 7.895579 146.863158 38.238316C524.207158 173.056 538.947368 212.291368 538.947368 262.736842c0 11.102316-1.131789 21.908211-3.072 32.202105 37.268211-12.584421 89.842526-25.465263 149.045895-25.465263C858.165895 269.473684 970.105263 387.907368 970.105263 571.176421 970.105263 711.922526 877.487158 862.315789 617.552842 862.315789c-258.667789 0-311.942737 19.698526-407.120842 150.581895z m19.105684-256.835368c-12.045474 0-24.387368-0.565895-37.025684-1.64379l-22.096842-1.859368-2.425263-22.016C167.747368 728.144842 161.684211 672.444632 161.684211 631.026526c0-103.585684 21.450105-178.903579 53.894736-259.045052V107.789474h53.894737v274.782315l-2.021052 4.904422C235.439158 465.758316 215.578947 533.800421 215.578947 631.026526c0 22.878316 2.101895 51.442526 3.826527 70.979369 99.678316 2.802526 172.813474-35.408842 222.450526-116.493474l48.020211 24.090947c-11.237053 28.133053-11.371789 51.577263-0.377264 67.853474 9.701053 14.282105 28.645053 23.174737 49.448421 23.174737v53.894737c-39.019789 0-74.186105-17.515789-94.073263-46.888421a100.244211 100.244211 0 0 1-12.422737-25.546106c-53.221053 49.178947-121.128421 73.943579-202.913684 73.970527zM379.957895 525.473684c0-34.223158-13.231158-44.463158-29.642106-44.463158s-29.642105 10.24-29.642105 44.463158c0 34.250105 13.231158 44.463158 29.642105 44.463158s29.642105-10.213053 29.642106-44.463158z" fill="#231F20" ></path></symbol><symbol id="icon-rooster_you" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#BBC4C9" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-215.578947-188.631579h-161.684211v-26.947368h161.684211V242.526316H269.473684v53.894737h161.684211v26.947368h-161.684211v485.052632h53.894737v-53.894737h377.263158v53.894737h53.894737V323.368421zM323.368421 646.736842h377.263158v53.894737H323.368421v-53.894737z m0-269.473684h107.789474c0 103.316211-72.784842 107.654737-81.084632 107.789474L350.315789 538.947368c46.592 0 134.736842-33.792 134.736843-161.68421h53.894736v107.789474c0 29.722947 24.171789 53.894737 53.894737 53.894736h107.789474v53.894737H323.368421v-215.578947z m377.263158 0v107.789474h-107.789474v-107.789474h107.789474z m-215.578947-80.842105h53.894736v26.947368h-53.894736v-26.947368z" fill="#231F20" ></path></symbol><symbol id="icon-rooster" viewBox="0 0 1024 1024"><path d="M891.688421 506.421895C877.244632 455.033263 862.315789 401.893053 862.315789 323.368421V116.224l-323.368421 195.745684V323.368421c0 78.524632 14.928842 131.664842 29.372632 183.053474 12.611368 44.894316 24.522105 87.282526 24.522105 140.314947 0 101.618526-77.931789 176.693895-168.286316 203.991579l5.416422 11.587368h215.578947c24.333474 0 43.385263-0.242526 58.556631-2.128842C811.52 846.821053 916.210526 764.550737 916.210526 646.736842c0-53.032421-11.910737-95.420632-24.522105-140.314947z" fill="#FF8787" ></path><path d="M673.684211 354.357895c-16.384 0-29.642105-10.213053-29.642106-44.463158 0-34.223158 13.231158-44.463158 29.642106-44.463158s29.642105 10.24 29.642105 44.463158c0 34.250105-13.258105 44.463158-29.642105 44.463158zM540.106105 970.105263l-50.58021-107.789474h156.05221l50.607158 107.789474h59.553684l-51.60421-109.918316C811.52 846.821053 916.210526 764.550737 916.210526 646.736842c0-53.032421-11.910737-95.420632-24.522105-140.314947C877.244632 455.033263 862.315789 401.893053 862.315789 323.368421V107.789474c0-59.445895-48.343579-107.789474-107.789473-107.789474a107.924211 107.924211 0 0 0-107.789474 106.172632 100.890947 100.890947 0 0 0-24.117895-3.314527 88.710737 88.710737 0 0 0-88.602947 88.602948c0 20.668632 5.227789 39.720421 10.671158 53.921684l-99.489684 59.688421 93.749894 14.470737V377.263158c0 14.416842-5.901474 21.692632-33.360842 49.152l-11.129263 11.129263C398.228211 326.521263 324.985263 269.473684 215.740632 269.473684 96.768 269.473684 0 366.241684 0 485.214316V646.736842h53.894737v-161.522526A162.007579 162.007579 0 0 1 215.740632 323.368421c82.081684 0 140.422737 36.244211 240.64 152.252632l-38.615579 38.615579C367.804632 461.285053 323.098947 431.157895 259.584 431.157895A151.983158 151.983158 0 0 0 107.789474 582.952421V754.526316h53.894737v-171.573895A98.007579 98.007579 0 0 1 259.584 485.052632c46.322526 0 79.629474 20.911158 137.027368 86.016l18.970948 21.530947 128.080842-128.080842C572.200421 435.981474 592.842105 415.366737 592.842105 377.263158v-97.926737l23.309474-14.120421-13.662316-23.04c-0.161684-0.242526-14.578526-24.899368-14.578526-50.688 0-19.132632 15.575579-34.708211 34.70821-34.708211 5.093053 0 26.785684 3.179789 39.558737 18.647579l26.327579 46.026106 39.774316-24.090948-20.372211-49.367579C704.754526 140.449684 700.631579 117.517474 700.631579 107.789474c0-29.722947 24.171789-53.894737 53.894737-53.894737s53.894737 24.171789 53.894737 53.894737v215.578947c0 85.935158 16.680421 145.300211 31.366736 197.632C851.887158 564.008421 862.315789 601.141895 862.315789 646.736842c0 95.285895-99.408842 161.684211-188.631578 161.684211h-209.461895l-68.419369-145.704421C375.242105 618.954105 338.108632 592.842105 296.448 592.842105A80.976842 80.976842 0 0 0 215.578947 673.711158V862.315789h53.894737v-188.604631c0-14.874947 12.099368-26.974316 26.974316-26.974316 20.533895 0 38.965895 14.147368 50.553263 38.858105L480.579368 970.105263h59.526737z" fill="#231F20" ></path></symbol><symbol id="icon-snake_si" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#FF8787" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-242.041263 180.762947l-52.116211-13.797052C657.219368 749.864421 651.425684 754.526316 619.789474 754.526316h-242.526316V485.052632h269.473684v53.894736h53.894737V215.578947H323.368421v538.947369c0 29.722947 24.171789 53.894737 53.894737 53.894737h242.526316c77.689263 0 91.189895-51.065263 108.274526-115.658106zM377.263158 269.473684h269.473684v161.684211H377.263158v-161.684211z" fill="#231F20" ></path></symbol><symbol id="icon-tiger_yin" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#7DD47F" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-257.42821 299.250526l-107.789474-53.894737-24.117895 48.208843 107.789474 53.894736 24.117895-48.208842z m-269.473685-5.658947l-24.117894-48.208842-107.789474 53.894737 24.117895 48.208842 107.789473-53.894737zM700.631579 431.157895h-161.684211v-53.894737h107.789474v-53.894737H377.263158v53.894737h107.789474v53.894737h-161.684211v323.368421h53.894737v-53.894737h269.473684v53.894737h53.894737V431.157895z m-161.684211 161.68421h107.789474v53.894737h-107.789474v-53.894737z m-161.68421 0h107.789474v53.894737h-107.789474v-53.894737z m161.68421-107.789473h107.789474v53.894736h-107.789474v-53.894736z m-161.68421 0h107.789474v53.894736h-107.789474v-53.894736zM754.526316 215.578947h-223.097263l-20.803369-62.410105-51.119158 17.057684L474.624 215.578947H269.473684v107.789474h53.894737v-53.894737h377.263158v53.894737h53.894737V215.578947z" fill="#231F20" ></path></symbol><symbol id="icon-snake" viewBox="0 0 1024 1024"><path d="M107.789474 790.474105c0-72.434526 67.880421-91.513263 121.451789-91.513263 74.401684 0 153.815579 34.438737 237.891369 70.925474 50.580211 21.935158 104.609684 45.325474 162.250105 63.083789-52.412632 44.786526-118.784 74.347789-195.152842 83.078737-143.171368 16.357053-326.440421 7.006316-326.440421-125.574737zM377.263158 215.578947c-15.575579 0-30.288842 3.449263-43.654737 9.377685A250.691368 250.691368 0 0 0 323.368421 296.421053c0 115.550316 76.422737 169.391158 137.83579 212.614736 8.138105 5.712842 16.141474 11.371789 23.848421 17.057685V323.368421a107.789474 107.789474 0 0 0-107.789474-107.789474z" fill="#C3D686" ></path><path d="M671.528421 788.857263c44.328421 11.964632 89.626947 19.563789 136.892632 19.56379 89.168842 0 161.684211-60.442947 161.68421-134.736842s-72.515368-134.736842-161.68421-134.736843c-19.078737 0-37.025684 1.509053-54.218106 4.015158-0.754526-101.402947-38.211368-172.355368-79.413894-219.648L673.684211 323.368421a1749.962105 1749.962105 0 0 1-79.036632-1.751579c45.702737 35.866947 108.705684 107.870316 105.984 232.367158 0 0.431158-0.080842 0.808421-0.10779 1.239579-34.923789 10.994526-66.155789 26.731789-95.097263 45.190737a163.085474 163.085474 0 0 0-15.845052-42.388211c-21.557895-39.639579-60.065684-66.775579-97.360842-93.022316C433.098105 423.343158 377.263158 384 377.263158 296.421053c0-130.290526 108.274526-188.631579 215.578947-188.631579 64.134737 0 132.715789 12.045474 214.366316 37.807158C802.330947 180.250947 780.099368 209.381053 700.631579 214.635789V161.684211h-53.894737v53.679157c-63.272421-1.024-104.528842-5.200842-104.986947-5.254736l-5.578106 53.598315C538.408421 263.949474 592.357053 269.473684 673.684211 269.473684c125.170526 0 188.631579-48.128 188.631578-143.063579V106.981053l-18.432-6.144C747.789474 68.823579 668.025263 53.894737 592.842105 53.894737c-158.666105 0-269.473684 99.732211-269.473684 242.526316 0 115.550316 76.422737 169.391158 137.83579 212.614736 33.684211 23.713684 65.509053 46.106947 81.003789 74.698106 9.539368 17.542737 13.285053 33.414737 12.341895 47.750737 21.153684 9.108211 42.118737 17.839158 62.949052 25.977263C671.151158 620.193684 729.977263 592.842105 808.421053 592.842105c59.445895 0 107.789474 36.271158 107.789473 80.842106s-48.343579 80.842105-107.789473 80.842105c-105.472 0-203.237053-42.388211-297.768421-83.429053-94.800842-41.094737-184.346947-79.952842-281.411369-79.952842C122.718316 591.171368 53.894737 644.715789 53.894737 727.578947c0 79.063579 67.098947 136.434526 159.555368 136.434527 142.174316 0 230.426947-66.883368 306.79579-129.886316 31.420632 13.419789 62.787368 26.058105 94.450526 37.133474-47.077053 49.637053-110.969263 82.566737-186.610526 91.270736l5.066105 53.625264c93.453474-7.006316 143.144421 9.350737 195.718737 26.543157 46.457263 15.225263 94.127158 30.854737 169.822316 30.854737 19.994947 0 41.957053-1.077895 66.344421-3.557052l-5.416421-53.625263c-105.283368 10.778947-158.100211-6.548211-213.935158-24.872422-22.150737-7.275789-44.624842-14.632421-70.305684-20.345263a334.848 334.848 0 0 0 96.14821-82.297263z m-458.078316 21.261474C162.573474 810.118737 107.789474 784.276211 107.789474 727.578947c0-60.847158 62.733474-82.539789 121.451789-82.539789 77.850947 0 154.731789 30.288842 235.250526 64.943158-66.263579 52.924632-139.722105 100.136421-251.041684 100.136421z" fill="#231F20" ></path></symbol><symbol id="icon-tiger" viewBox="0 0 1024 1024"><path d="M431.157895 162.250105V134.736842c0-41.552842-39.289263-80.842105-80.842106-80.842105-28.833684 0-57.128421 4.661895-58.314105 4.850526L269.473684 62.490947v83.887158C144.788211 223.824842 89.222737 346.839579 66.991158 431.157895h266.051368c240.747789 0 415.851789 107.789474 415.85179 269.473684-14.848-25.114947-43.924211-53.894737-88.68379-53.894737-67.988211 0-121.263158 71.033263-121.263158 161.684211 0 66.802526 30.477474 119.888842 60.712421 156.16 12.638316 15.171368 36.055579 37.726316 59.014737 58.88 5.066105 0.107789 9.781895 0.538947 15.009685 0.538947 219.297684 0 350.315789-191.811368 350.315789-377.263158C1024 327.545263 679.855158 172.813474 431.157895 162.250105z" fill="#F7C768" ></path><path d="M673.684211 1024c-114.768842 0-188.820211-33.333895-254.167579-62.787368-53.625263-24.144842-99.974737-45.002105-161.28-45.002106-40.448 0-83.590737 23.255579-103.639579 45.16379l-39.747369-36.432842C142.497684 894.787368 199.168 862.315789 258.236632 862.315789c68.392421 0 119.861895 21.288421 172.921263 45.056V673.684211c0-35.166316-17.542737-64.107789-30.639158-80.815158-15.198316 9.835789-32.067368 18.890105-50.741895 26.947368l-21.342316-49.475368C469.800421 509.413053 485.052632 377.317053 485.052632 323.368421V221.642105A597.827368 597.827368 0 0 0 404.210526 215.578947h-26.947368V134.736842c0-12.099368-14.848-26.947368-26.947369-26.947368-9.377684 0-18.836211 0.592842-26.947368 1.347368V269.473684h-53.894737V211.671579c-136.030316 102.912-158.450526 266.886737-161.306947 295.882105 9.135158 9.108211 38.992842 25.061053 71.976421 38.669474l38.103579-59.365053 12.449684-1.589894C321.212632 473.653895 377.263158 392.192 377.263158 323.368421h53.894737c0 88.333474-68.796632 192.242526-180.870737 213.342316l-48.397474 75.398737-20.291368-7.437474C53.894737 557.756632 53.894737 523.317895 53.894737 512c0-50.041263 37.025684-254.733474 215.578947-365.621895V62.490947l22.528-3.745684C293.187368 58.556632 321.482105 53.894737 350.315789 53.894737c41.552842 0 80.842105 39.289263 80.842106 80.842105v27.513263c248.697263 10.563368 592.842105 165.295158 592.842105 484.486737 0 185.451789-131.018105 377.263158-350.315789 377.263158z m-13.473685-323.368421c-36.513684 0-67.368421 49.367579-67.368421 107.789474 0 85.746526 68.096 145.084632 89.465263 161.549473 91.540211-2.533053 164.378947-45.487158 213.827369-107.654737H700.631579v-53.894736h230.238316c8.919579-17.273263 16.357053-35.354947 22.285473-53.894737h-239.885473l-6.467369-17.650527C706.290526 735.582316 692.439579 700.631579 660.210526 700.631579zM485.052632 931.112421c33.926737 14.066526 70.521263 26.597053 114.607157 33.468632C569.424842 928.309895 538.947368 875.223579 538.947368 808.421053c0-90.650947 53.274947-161.684211 121.263158-161.684211 44.759579 0 73.835789 28.779789 88.68379 53.894737h217.007158c2.775579-17.866105 4.203789-35.920842 4.203789-53.894737 0-38.938947-5.658947-74.752-15.925895-107.627789l-126.706526 126.679579-38.103579-38.103579L932.001684 485.052632a367.939368 367.939368 0 0 0-57.775158-81.596632l-154.543158 154.543158-38.103579-38.103579 153.573053-153.573053a537.869474 537.869474 0 0 0-82.593684-56.751158l-140.665263 140.638316-38.103579-38.103579 128.134737-128.134737A794.731789 794.731789 0 0 0 538.947368 231.046737V323.368421c0 50.149053-11.102316 156.698947-95.932631 236.328421 18.378105 23.417263 42.037895 63.407158 42.037895 113.987369v257.42821zM215.578947 431.157895v-53.894737c39.774316 0 53.894737-29.022316 53.894737-53.894737h53.894737c0 53.571368-37.025684 107.789474-107.789474 107.789474z" fill="#231F20" ></path></symbol><symbol id="icon-boar" viewBox="0 0 1024 1024"><path d="M732.079158 377.263158c-107.789474 0-186.421895 31.393684-281.869474 126.841263L180.331789 773.982316C257.724632 807.909053 348.725895 808.421053 485.052632 808.421053h96.013473c55.834947-34.411789 133.551158-53.894737 227.354948-53.894737h121.344L970.105263 680.555789V572.631579c0-94.315789-130.236632-195.368421-238.026105-195.368421z" fill="#FFBDD8" ></path><path d="M808.421053 700.631579v53.894737c-196.446316 0-323.368421 84.641684-323.368421 215.578947h-53.894737c0-163.705263 148.075789-269.473684 377.263158-269.473684z m-323.368421 107.789474v-53.894737c-158.342737 0-245.598316 0-319.649685-49.367579L158.612211 700.631579H80.842105c-21.692632 0-26.624-14.821053-26.947368-26.947368v-82.620632c84.156632-11.183158 161.684211-74.913684 161.68421-186.853053V215.578947H161.684211v161.684211H134.736842c-66.964211 0-134.736842 37.025684-134.736842 107.789474h53.894737c0-42.630737 52.870737-53.894737 80.842105-53.894737h24.629895C147.132632 504.912842 85.153684 538.947368 26.947368 538.947368H0v134.736843c0 32.498526 21.530947 80.842105 80.842105 80.842105h61.682527c32.687158 20.506947 67.125895 33.145263 105.957052 41.013895A232.879158 232.879158 0 0 0 215.578947 916.210526h53.894737c0-41.930105 14.012632-80.303158 39.424-112.505263C358.885053 808.151579 415.959579 808.421053 485.052632 808.421053z m-72.946527-342.420211L323.368421 554.738526V431.157895h-53.894737v253.682526l180.736-180.736-38.103579-38.103579zM323.368421 161.684211h-53.894737v190.032842a769.536 769.536 0 0 1 53.894737-49.098106V161.684211z m323.368421-53.894737c-72.623158 0-146.809263 23.336421-215.578947 58.637473V107.789474h-53.894737v154.138947C458.832842 205.392842 555.331368 161.684211 646.736842 161.684211c148.587789 0 269.473684 120.885895 269.473684 269.473684v235.654737L809.579789 862.315789h61.359158L970.105263 680.555789V431.157895c0-178.310737-145.057684-323.368421-323.368421-323.368421z" fill="#231F20" ></path></symbol><symbol id="icon-boar_hai" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#85C3DE" ></path><path d="M309.975579 804.756211l-27.136-46.592c103.073684-60.011789 183.026526-132.473263 241.475368-219.24379H350.315789l-13.473684-50.283789c58.88-33.980632 99.435789-117.571368 118.703158-165.295158H242.526316v-53.894737h538.947368v53.894737h-268.18021c-12.395789 34.088421-42.469053 106.603789-90.435369 161.68421h134.009263a680.555789 680.555789 0 0 0 46.349474-107.708631l51.092211 17.057684c-58.421895 175.265684-171.034947 309.490526-344.333474 410.381474z m192.350316-2.937264L467.806316 760.454737c88.414316-73.728 154.516211-158.773895 202.105263-259.907369l48.801684 22.959158a797.372632 797.372632 0 0 1-82.351158 137.781895c32.741053 15.009684 83.456 44.867368 137.647158 101.591579l-38.938947 37.268211c-57.236211-59.877053-109.325474-85.557895-133.766737-95.178106a850.997895 850.997895 0 0 1-98.977684 96.848842z m48.613052-536.872421l-80.842105-53.894737 29.884632-44.840421 80.842105 53.894737-29.884632 44.840421zM512 53.894737C259.395368 53.894737 53.894737 259.395368 53.894737 512s205.500632 458.105263 458.105263 458.105263c9.081263 0 17.973895-0.835368 26.947368-1.374316v-53.894736c-8.946526 0.619789-17.866105 1.374316-26.947368 1.374315-222.881684 0-404.210526-181.328842-404.210526-404.210526S289.118316 107.789474 512 107.789474s404.210526 181.328842 404.210526 404.210526c0 195.206737-139.075368 358.507789-323.368421 396.045474v54.460631c214.096842-38.346105 377.263158-225.549474 377.263158-450.533052C970.105263 259.395368 764.604632 53.894737 512 53.894737z" fill="#231F20" ></path></symbol><symbol id="icon-bilibili1" viewBox="0 0 1129 1024"><path d="M234.909 9.656a80.468 80.468 0 0 1 68.398 0 167.374 167.374 0 0 1 41.843 30.578l160.937 140.82h115.07l160.936-140.82a168.983 168.983 0 0 1 41.843-30.578A80.468 80.468 0 0 1 930.96 76.445a80.468 80.468 0 0 1-17.703 53.914 449.818 449.818 0 0 1-35.406 32.187 232.553 232.553 0 0 1-22.531 18.508h100.585a170.593 170.593 0 0 1 118.289 53.109 171.397 171.397 0 0 1 53.914 118.288v462.693a325.897 325.897 0 0 1-4.024 70.007 178.64 178.64 0 0 1-80.468 112.656 173.007 173.007 0 0 1-92.539 25.75H212.377a341.186 341.186 0 0 1-72.421-4.024A177.835 177.835 0 0 1 28.91 939.065a172.202 172.202 0 0 1-27.36-92.539V388.662a360.498 360.498 0 0 1 0-66.789A177.03 177.03 0 0 1 162.487 178.64h105.414c-16.899-12.07-31.383-26.555-46.672-39.43a80.468 80.468 0 0 1-25.75-65.984 80.468 80.468 0 0 1 39.43-63.57M216.4 321.873a80.468 80.468 0 0 0-63.57 57.937 108.632 108.632 0 0 0 0 30.578v380.615a80.468 80.468 0 0 0 55.523 80.469 106.218 106.218 0 0 0 34.601 5.632h654.208a80.468 80.468 0 0 0 76.444-47.476 112.656 112.656 0 0 0 8.047-53.109v-354.06a135.187 135.187 0 0 0 0-38.625 80.468 80.468 0 0 0-52.304-54.719 129.554 129.554 0 0 0-49.89-7.242H254.22a268.764 268.764 0 0 0-37.82 0z m0 0" fill="#20B0E3" ></path><path d="M348.369 447.404a80.468 80.468 0 0 1 55.523 18.507 80.468 80.468 0 0 1 28.164 59.547v80.468a80.468 80.468 0 0 1-16.094 51.5 80.468 80.468 0 0 1-131.968-9.656 104.609 104.609 0 0 1-10.46-54.719v-80.468a80.468 80.468 0 0 1 70.007-67.593z m416.02 0a80.468 80.468 0 0 1 86.102 75.64v80.468a94.148 94.148 0 0 1-12.07 53.11 80.468 80.468 0 0 1-132.773 0 95.757 95.757 0 0 1-12.875-57.133V519.02a80.468 80.468 0 0 1 70.007-70.812z m0 0" fill="#20B0E3" ></path></symbol><symbol id="icon-yinle" viewBox="0 0 1024 1024"><path d="M512.2976 0a531.2 531.2 0 0 0-512 548.48V960h128V548.48a398.72 398.72 0 0 1 384-411.52 398.72 398.72 0 0 1 384 411.52V960h128V548.48A531.2 531.2 0 0 0 512.2976 0z" fill="#5c8add" ></path><path d="M64.2976 576l256 0 0 448-256 0 0-448Z" fill="#5c8add" ></path><path d="M704.2976 576l256 0 0 448-256 0 0-448Z" fill="#5c8add" ></path></symbol><symbol id="icon-icon-test-copy" viewBox="0 0 1024 1024"><path d="M512 512m-229.517241 0a229.517241 229.517241 0 1 0 459.034482 0 229.517241 229.517241 0 1 0-459.034482 0Z" fill="#5c8add" ></path><path d="M512 1024A512 512 0 1 1 1024 512 512 512 0 0 1 512 1024z m0-141.241379A370.758621 370.758621 0 1 0 141.241379 512 370.758621 370.758621 0 0 0 512 882.758621z" fill="#5c8add" ></path></symbol><symbol id="icon-V" viewBox="0 0 1024 1024"><path d="M1012.47774251 492.58192592L544.94137566 87.22962963a49.96686561 49.96686561 0 0 0-65.88275132 0L11.63784127 492.6975097c-21.03624691 18.26223633-23.3479224 49.93219048-5.08568606 70.96843739 18.03106878 21.03624691 49.93219048 23.3479224 70.96843738 5.08568607L512 191.83294532l434.71057495 376.91868784c9.47786949 8.20644797 21.26741446 12.25188008 32.82579189 12.13629629 14.10122046 0 27.97127337-5.77918871 38.02706173-17.33756613 18.14665256-20.92066314 15.95056084-52.70620106-5.08568606-70.9684374z" fill="#5c8add" ></path><path d="M109.30613051 567.59579541V896.89396825c0 42.53482892 34.90629982 77.44112875 77.44112875 77.44112875h220.76500882V666.30433862c0-25.54401411 20.92066314-46.46467725 46.46467724-46.46467724h116.16169313c25.54401411 0 46.46467725 20.92066314 46.46467725 46.46467724V974.335097h220.76500882c42.53482892 0 77.44112875-34.90629982 77.44112874-77.44112875l0.11558377-329.29817284L512 218.18604586 109.30613051 567.59579541zM848.00203175 197.49655027h-63.91782716c-12.82979894 0-23.23233862 10.40253968-23.23233863 23.23233862v24.27259259l110.49808818 95.70336508V220.72888889h-0.11558377c0-12.82979894-10.40253968-23.23233862-23.23233862-23.23233862zM905.44716754 83.18419754s-34.90629982 56.86721693-89.11508994 100.32671603c152.68616579 13.98563668 127.83565432-133.26809171 127.83565432-133.2680917-134.07717813-10.28695591-132.92134039 102.29164021-131.072 127.83565432 20.92066314-20.92066314 49.70102293-62.64640564 92.35143562-94.89427865zM798.53217637 174.61096297c-19.64924162-16.52847972-40.56990476-43.45949912-51.203612-53.97762258 0 0 32.94137566 20.57391182 56.40488184 49.3542716 2.42725926-18.37782011 6.47269135-93.3916896-93.16052205-85.3008254 0 0-13.98563668 104.71889947 87.95925221 89.92417638z" fill="#5c8add" ></path></symbol><symbol id="icon-zhifeiji" viewBox="0 0 1167 1024"><path d="M41.201759 463.52493L1110.665064 30.117647c10.32605-4.159104 21.942857 0.860504 26.101961 11.043137 1.434174 3.728852 1.864426 7.744538 1.003921 11.616807L949.033691 978.823529c-2.151261 10.89972-12.764146 17.927171-23.663865 15.632493-2.72493-0.573669-5.306443-1.721008-7.601121-3.298599L634.80624 789.79944l-163.065546 133.951821c-16.492997 13.62465-40.87395 11.186555-54.498599-5.306443-3.011765-3.728852-5.306443-7.887955-6.884034-12.477311l-102.973669-313.080112-265.178712-91.787115c-10.469468-3.585434-16.062745-15.058824-12.333893-25.528291 1.864426-5.44986 6.023529-9.895798 11.329972-12.047059z" fill="#FCFDFC" ></path><path d="M929.385512 1023.569748c-3.155182 0-6.453782-0.286835-9.752381-1.003922-6.740616-1.434174-12.907563-4.015686-18.50084-8.031372L635.953579 825.940616l-146.142297 120.040336c-13.911485 11.473389-31.408403 16.779832-49.335574 15.058824-17.927171-1.721008-34.133333-10.32605-45.463305-24.237535-5.306443-6.453782-9.322129-13.768067-11.903642-21.79944l-98.527731-299.598879-251.697479-87.19776c-12.333894-4.302521-22.229692-13.05098-27.966386-24.811204s-6.453782-24.954622-2.151261-37.288515c4.589356-13.337815 14.771989-23.9507 27.82297-29.257143L1099.908761 3.585434c24.954622-10.039216 53.351261 2.007843 63.533894 26.819048 3.585434 8.891877 4.445938 18.644258 2.581513 28.109804L977.143495 984.560224c-4.732773 23.090196-25.098039 39.009524-47.757983 39.009524z m-294.579272-233.770308l282.962465 201.357983c2.294678 1.577591 4.87619 2.72493 7.601121 3.298599 10.89972 2.151261 21.512605-4.87619 23.663865-15.632493L1137.914364 52.777591c0.860504-3.872269 0.430252-7.887955-1.003922-11.616807-4.159104-10.32605-15.919328-15.202241-26.101961-11.043137L41.201759 463.52493c-5.306443 2.151261-9.465546 6.597199-11.47339 12.047059-1.721008 5.019608-1.434174 10.469468 0.860505 15.345658 2.294678 4.87619 6.453782 8.461625 11.473389 10.182633l265.178711 91.787115L410.214644 905.967507c1.434174 4.589356 3.872269 8.748459 6.884033 12.477311 6.597199 8.031373 15.919328 12.907563 26.101961 13.911485 10.32605 1.003922 20.365266-2.007843 28.396639-8.605042l163.208963-133.951821z" fill="#4A4A4A" ></path><path d="M307.097557 592.743978l105.698599 316.091876c6.310364 18.787675 26.532213 28.970308 45.319888 22.659944 4.159104-1.434174 7.887955-3.442017 11.186555-6.166946l164.786555-133.951821-165.360224-118.892997c297.017367-287.982073 447.462185-433.980952 451.191036-437.853222 0.573669-0.573669 2.581513-3.442017 0.430252-7.027451-1.290756-1.577591-3.298599-3.298599-7.027451-2.15126-202.218487 120.327171-404.293557 242.805602-606.22521 367.291877z" fill="#CAE0EE" ></path><path d="M446.786072 934.794398c-5.736695 0-11.329972-1.290756-16.636414-3.872269-8.891877-4.445938-15.632493-12.047059-18.787675-21.512605L305.376549 592.313725l1.003921-0.573669C507.308201 467.684034 711.391114 344.058263 912.60568 224.161345l0.286835-0.143418c3.585434-1.147339 6.310364-0.286835 8.605042 2.581513l0.143417 0.143417c2.438095 4.015686 0.573669 7.457703-0.573669 8.74846-3.872269 4.015686-155.177591 150.87507-450.043698 436.705882l165.503642 119.036414-166.220728 135.09916c-3.442017 2.868347-7.457703 5.019608-11.760225 6.453782-3.728852 1.290756-7.744538 2.007843-11.760224 2.007843z m-137.967507-341.333334l105.268348 314.944538c2.868347 8.748459 9.035294 15.77591 17.210084 19.935014 8.17479 4.159104 17.496919 4.732773 26.245378 1.864426 3.872269-1.290756 7.60112-3.298599 10.756302-5.880112l163.352381-132.804482L466.434252 672.627451l1.290756-1.147339C763.308201 384.932213 915.043775 237.642577 918.772627 233.626891c0 0 2.007843-2.294678 0.286835-5.306443-1.003922-1.290756-2.438095-2.438095-5.306443-1.577591-200.784314 119.610084-404.293557 242.94902-604.934454 366.718207z" fill="#CAE0EE" ></path><path d="M460.840974 924.898599l7.457703-253.561904 165.933894 119.896918-168.658824 135.959664c-1.290756 1.003922-3.011765 0.860504-4.015686-0.430252-0.430252-0.430252-0.717087-1.147339-0.717087-1.864426z" fill="#94C3E2" ></path><path d="M463.709322 929.344538c-1.290756 0-2.438095-0.573669-3.2986-1.577591-0.573669-0.860504-1.003922-1.864426-1.003921-2.868348l7.60112-256.286834 169.519328 122.621848-1.434174 1.147339-168.658823 135.959664c-0.860504 0.717087-1.721008 1.003922-2.72493 1.003922z m6.023529-255.282913l-7.457703 250.836974c0 0.286835 0.143417 0.717087 0.286835 1.003922 0.430252 0.573669 1.434174 0.717087 2.007843 0.286835l167.22465-134.812325-162.061625-117.315406z" fill="#94C3E2" ></path></symbol><symbol id="icon-lianjie" viewBox="0 0 1079 1024"><path d="M695.355535 432.666896c-0.553495-1.10699-0.885592-2.186305-1.383737-3.265619-0.193723-0.193723-0.193723-0.359772-0.359771-0.719543-12.508983-26.318678-39.436506-43.366319-69.325226-41.013966-39.076734 3.265619-68.439634 39.021384-65.312388 79.841627 0.857917 10.516401 3.653066 20.147211 7.998 28.83708 19.78744 46.659613 11.097571 103.448181-25.377737 141.750022l-191.094085 199.950001a118.088119 118.088119 0 0 1-171.998513 0c-47.434506-49.537786-47.434506-130.098956 0-179.636742l71.234782-74.389703-0.52582-0.553494a75.911814 75.911814 0 0 0 24.326097-61.880721c-3.127246-40.820243-37.3609-71.51153-76.437634-68.24591a69.463599 69.463599 0 0 0-46.908685 23.966325l-0.166049-0.193723-72.618519 75.856464c-103.226783 107.793115-103.226783 282.36538 0 390.158495 103.171433 107.793115 270.299193 107.793115 373.498301 0l191.619904-200.1714c80.256748-83.992838 97.636485-208.307773 52.83108-310.289193z" fill="#5c8add" ></path><path d="M1002.047012 80.865592c-103.226783-107.82079-270.382217-107.82079-373.581325 0l-191.619905 200.199075c-80.284423 83.854464-97.66416 208.197074-52.997128 310.233843 0.52582 1.079315 0.857917 2.15863 1.383737 3.26562 0.166048 0.166048 0.166048 0.359772 0.332097 0.719543 12.536658 26.291004 39.46418 43.366319 69.3529 41.013966 39.076734-3.265619 68.439634-39.021384 65.312388-79.869302a78.679288 78.679288 0 0 0-7.998-28.864755c-19.78744-46.631938-11.097571-103.448181 25.377737-141.750022l191.287808-199.839302a118.088119 118.088119 0 0 1 172.026188 0c47.434506 49.537786 47.434506 130.126631 0 179.692091l-71.234782 74.417378 0.52582 0.553495a75.939489 75.939489 0 0 0-24.353772 61.88072c3.15492 40.847917 37.3609 71.51153 76.465309 68.245911a69.463599 69.463599 0 0 0 46.908685-23.938651l0.166049 0.166048 72.646194-75.856464c103.03306-107.82079 103.03306-282.642127 0-390.269194z" fill="#5c8add" ></path></symbol><symbol id="icon-liaotian" viewBox="0 0 1171 1024"><path d="M1068.71699 0.243751H102.193768C46.228437 0.243751 0.500666 45.045267 0.500666 99.74309v696.251622c0 54.697824 45.727771 99.450589 101.693102 99.450589h329.113198l120.851966 114.465677a48.652788 48.652788 0 0 0 66.641644 0l120.851966-114.465677h329.064448c55.965331 0 101.741852-44.752765 101.741852-99.450589V99.74309C1170.458842 45.045267 1124.682321 0.243751 1068.71699 0.243751z m-439.776354 596.849784h-370.989696c-27.933915 0-50.846551-22.425133-50.846551-49.774045 0-27.348912 22.912636-49.725294 50.846551-49.725294h370.989696c27.933915 0 50.846551 22.376382 50.846551 49.725294 0 27.348912-22.912636 49.774045-50.846551 49.774045z m287.18795-211.381252H254.782171a50.456549 50.456549 0 0 1-50.846551-49.725294c0-27.397662 22.912636-49.774045 50.846551-49.774045h661.346415c27.933915 0 50.846551 22.376382 50.846551 49.774045 0 27.348912-22.912636 49.725294-50.846551 49.725294z" fill="#5C8ADD" ></path></symbol><symbol id="icon-xinfeng" viewBox="0 0 1400 1024"><path d="M1301.63733163 214.78520234a207.81921797 207.81921797 0 0 1 7.02423018 52.42036465v489.73590176a205.10753818 205.10753818 0 0 1-205.05853125 205.05853125H283.05853124A205.15654424 205.15654424 0 0 1 77.99999999 756.79444971V267.20556699a201.36672685 201.36672685 0 0 1 7.02423106-52.42036465L586.24393329 562.1905874c69.44187217 51.96297217 146.36536612 49.13694404 214.1736961 0zM1103.60303056 62.0000167H283.05853124A204.50312753 204.50312753 0 0 0 106.37462518 163.41030547l489.71956641 335.75823018c62.43397646 50.77048623 127.85733457 50.31309463 194.62019765 0L1280.28693749 163.41030547A204.68281729 204.68281729 0 0 0 1103.60303056 62.0000167z m0 0" fill="#5c8add" ></path></symbol><symbol id="icon-QQ1" viewBox="0 0 1024 1024"><path d="M0 512a512 512 0 1 0 1024 0A512 512 0 1 0 0 512z" fill="#18ACFC" ></path><path d="M500.113 228.39c118.396-1.518 178.924 61.004 201 156 3.497 15.048 0.15 34.807 0 50 27.143 5.682 33.087 60.106 10 75v1h1c8.26 14.33 19.04 28.125 26 44 7.332 16.723 9.306 35.16 14 55 4.024 17.01-2.287 51.505-10 57-0.771 0.683-2.231 1.312-3 2-14.601-3.016-30.377-16.865-38-27-3.065-4.074-5.275-9.672-10-12-0.395 21.568-12.503 41.15-22 55-3.514 5.123-14.073 13.217-14 18 3.691 2.836 8.305 2.956 13 5 10.513 4.577 25.449 13.168 32 22 2.334 3.146 5.548 7.555 7 11 16.193 38.414-36.527 48.314-63 54-27.185 5.839-77.818-10.224-92-19-8.749-5.414-16.863-18.573-29-19-3.666 2.389-14.438 1.132-20 1-16.829 32.804-101.913 47.868-148 31-14.061-5.146-43.398-17.695-38-40 4.437-18.327 19.947-29.224 35-37 5.759-2.975 18.915-4.419 22-10-13.141-8.988-24.521-28.659-31-44-3.412-8.077-4.193-25.775-9-32-7.789 12.245-32.097 36.91-52 33-3.071-4.553-7.213-9.097-9-15-4.792-15.835-1.81-40.379 2-54 8.117-29.02 16.965-50.623 32-72 4.672-6.643 11.425-12.135 16-19-8.945-9.733-6.951-37.536-1-49 4.002-7.709 9.701-7.413 10-20-1.92-3.022-0.071-8.604-1-13-4.383-20.75 3.273-47.552 9-63 19.8-53.421 53.712-90.466 105-112 11.986-5.033 25.833-7.783 39-11 5.322-1.3 11.969 0.518 16-2z" fill="#FFFFFF" ></path></symbol><symbol id="icon-rss" viewBox="0 0 1024 1024"><path d="M749.61196492 908.06119793C749.61196492 560.41848146 463.58151854 274.36328126 115.93880207 274.36328126V115.93880207c434.50388795 0 792.12239584 357.61850789 792.12239586 792.12239586zM224.55858562 690.72261555a108.91682943 108.91682943 0 0 1 108.69404499 108.74355267C333.25263061 859.29616292 284.24005737 908.06119793 224.31104736 908.06119793 164.48105265 908.06119793 115.96355592 859.41993206 115.96355592 799.46616822s48.69077351-108.71879883 108.61978351-108.74355267zM641.01693522 908.06119793h-153.96879069c0-203.60020956-167.50913289-371.13409627-371.10934246-371.13409629v-153.96879068c288.03550619 0 525.07813313 237.11688843 525.07813315 525.10288697z" fill="#FFA500" ></path></symbol><symbol id="icon-youxiang" viewBox="0 0 1024 1024"><path d="M583.60666667 972h-68.08c-8.43333333 0-15.33333333-6.9-15.33333334-15.33333333V609.52c0-8.43333333 6.9-15.33333333 15.33333334-15.33333333h68.08c8.43333333 0 15.33333333 6.9 15.33333333 15.33333333V956.66666667c0 8.43333333-6.9 15.33333333-15.33333333 15.33333333z" fill="#629FF9" ></path><path d="M294.42 167c-113.62 0-205.77333333 92-205.77333333 205.31333333v336.72h411.39333333V372.31333333c0.15333333-113.31333333-92-205.31333333-205.62-205.31333333z" fill="#2166CC" ></path><path d="M519.97333333 627H216.98666667c-25.45333333 0-46-20.54666667-46-46V393.78c0-25.45333333 20.54666667-46 46-46h302.98666666c25.45333333 0 46 20.54666667 46 46V581c0 25.45333333-20.54666667 46-46 46z" fill="#D2E4FF" ></path><path d="M565.97333333 397a49.22 49.22 0 0 0-49.37333333-49.22H220.36c-27.29333333 0-49.37333333 22.08-49.37333333 49.22v10.27333333l179.4 94.60666667c11.34666667 5.98 24.84 5.98 36.18666666 0l179.4-94.60666667v-10.27333333z" fill="#FFFFFF" ></path><path d="M730.5 167h-427.8v0.46c109.78666667 4.29333333 197.49333333 94.3 197.49333333 205.00666667v336.72h411.39333334c27.29333333 0 49.37333333-22.08 49.37333333-49.22V397c0-126.96-103.19333333-230-230.46-230z" fill="#4E8DF6" ></path><path d="M845.80666667 52H681.12666667c-9.04666667 0-16.40666667 7.36-16.40666667 16.40666667v336.72a24.67133333 24.67133333 0 1 0 49.37333333 0V134.18666667h131.71333334c9.04666667 0 16.40666667-7.36 16.40666666-16.40666667V68.40666667c0-9.04666667-7.36-16.40666667-16.40666666-16.40666667z" fill="#2166CC" ></path><path d="M896.25333333 659.81333333h-35.11333333c-8.43333333 0-15.33333333-6.9-15.33333333-15.33333333v-35.11333333c0-8.43333333 6.9-15.33333333 15.33333333-15.33333334h35.11333333c8.43333333 0 15.33333333 6.9 15.33333334 15.33333334v35.11333333c0 8.58666667-6.9 15.33333333-15.33333334 15.33333333z" fill="#FFFFFF" ></path><path d="M88.8 709.18666667l-24.22666667 131.40666666c-9.66 54.43333333 26.83333333 98.59333333 81.26666667 98.59333334h213.9c54.58666667 0 106.56666667-44.16 116.22666667-98.59333334l23.15333333-131.40666666H88.8z" fill="#2974CE" ></path></symbol><symbol id="icon-gitHub" viewBox="0 0 1049 1024"><path d="M523.6581816 52C262.83923907 52 52 262.8401375 52 523.6581816c0 208.49703047 135.09433812 384.97758117 322.50789391 447.44906532 23.42658172 4.68531653 32.01647887-10.15136894 32.01647796-22.64584583 0-10.93210574-0.78163433-48.41463703-0.78163433-87.45953855-131.18885996 28.11189824-158.5200223-56.22379738-158.52002231-56.22379739-21.08437312-54.66232469-52.3201152-68.71827336-52.3201152-68.71827335-42.94858371-28.89353348 3.12384382-28.89353348 3.12384384-28.89353348 47.63479867 3.12384382 72.62285398 48.41643391 72.62285398 48.4164339 42.16784782 71.84121875 110.10538527 51.53758242 137.43654672 39.04400399 3.90457972-30.45500618 16.3990566-51.5393793 29.67427028-63.25222094-104.64023039-10.93300418-214.74561566-51.53848086-214.74561657-232.70524742 0-51.53848086 18.74126609-93.70632867 48.4164339-126.50444187-4.68621496-11.71284164-21.08527156-60.12837711 4.6844181-124.94207075 0 0 39.82563922-12.49447688 129.62738726 48.41463704 37.48253129-10.15136894 78.08980484-15.61742227 117.91454562-15.61742137s80.43201433 5.46605242 117.91454473 15.61742137c89.80264648-60.90911391 129.62828571-48.41463703 129.62828571-48.41463704 25.76879122 64.81369363 9.37063305 113.22922911 4.68531651 124.94207075 30.45410773 32.79721477 48.41463703 74.96506258 48.41463703 126.50444187 0 181.16676656-110.10538527 220.99150644-215.52545401 232.70524742 17.1797934 14.83668547 32.01647887 42.94858371 32.01647886 87.45953946 0 63.25222094-0.78163433 114.009965-0.78163523 129.62738636 0 12.49447688 8.59079468 27.33116234 32.01737731 22.64584583 187.41265734-62.4705866 322.50699547-238.95203574 322.50699546-447.44996375C995.31636231 262.8401375 783.69369203 52 523.6581816 52z" fill="#663399" ></path><path d="M230.82365863 729.03136735c-0.7807359 2.34310703-4.68531653 3.12384382-7.80916035 1.56237113s-5.46605242-4.68531653-3.90368129-7.02842356c0.7807359-2.34220859 4.68531653-3.12384382 7.80826192-1.56147269s4.68531653 4.68531653 3.90457972 7.02752512z m18.7412661 21.08437312c-2.34220859 2.34220859-7.02752512 0.78163433-9.37063305-2.34310703-3.12294539-3.12294539-3.90457972-7.80826192-1.5614727-10.15136894 2.34220859-2.34220859 6.24678922-0.7807359 9.37063305 2.34310702 3.12384382 3.90457972 3.90457972 8.58899782 1.5614727 10.15136895zM268.30618992 777.44690281c-3.12294539 2.34220859-7.80826192 0-10.15136895-3.90457972-3.12384382-3.90457972-3.12384382-9.37063305 0-10.93210574 3.12384382-2.34310703 7.80916035 0 10.15226739 3.90457972 3.12294539 3.90368129 3.12294539 8.58899782 0 10.93210574z m25.76968965 26.55042555c-2.34220859 3.12294539-7.80916035 2.34220859-12.49447688-1.56237113-3.90457972-3.90368129-5.46605242-9.37063305-2.34220859-11.71284164 2.34220859-3.12384382 7.80826192-2.34310703 12.49447687 1.56147269 3.90368129 3.12384382 4.68531653 8.58989625 2.3422086 11.71374008z m35.1403227 14.83668637c-0.78163433 3.90457972-6.24768766 5.46605242-11.71374008 3.90457972-5.46605242-1.5614727-8.58899782-6.24768766-7.80916036-9.37063305 0.78163433-3.90457972 6.24768766-5.46605242 11.71374009-3.90457972 5.46605242 1.5614727 8.58899782 5.46605242 7.80916035 9.37063305z m38.26416562 3.12384382c0 3.90457972-4.68621496 7.02752512-10.15226738 7.02752512-5.46605242 0-10.15226738-3.12294539-10.15226739-7.02752512s4.68621496-7.02842356 10.15226739-7.02842445c5.46605242 0 10.15226738 3.12384382 10.15226738 7.02842445z m35.92016106-6.24768766c0.78163433 3.90457972-3.12384382 7.80916035-8.58899872 8.58989625-5.46695086 0.78163433-10.15226738-1.5614727-10.93390172-5.46605241-0.77983747-3.90457972 3.12384382-7.80916035 8.5907947-8.58899872 5.46605242-0.78163433 10.15136894 1.56057426 10.93210574 5.46515488z m0 0" fill="#663399" ></path></symbol><symbol id="icon-bilibili" viewBox="0 0 1024 1024"><path d="M832.61667555 181.33447111h-164.32545185l74.45617778-74.45617778c12.84020148-12.84020148 12.84020148-30.8140563 0-43.65425778-12.84020148-12.84020148-30.8140563-12.84020148-43.65425778 0L573.2882963 189.04101925H450.04420741L324.2272237 63.23617185c-10.26730667-12.84020148-25.68040297-15.40096-41.08136295-7.70654815-2.57289482 0-2.57289482 2.57289482-5.13365334 5.13365333-12.84020148 12.84020148-12.84020148 30.8140563 0 43.65425779l77.02907259 77.02907259h-164.32545185c-89.86927408 0-164.32545185 74.45617778-164.32545185 164.32545184v408.24073483c0 87.29637925 74.45617778 161.75255703 164.32545185 161.75255703h25.68040296c0 30.8140563 25.68040297 53.92156445 53.92156444 53.92156444s53.92156445-25.68040297 53.92156445-53.92156444H704.23893333c2.57289482 30.8140563 28.24116148 53.92156445 59.05521778 51.34866964 28.24116148-2.57289482 48.78791111-23.10750815 51.34866964-51.34866964h20.53461333c89.86927408 0 164.32545185-74.45617778 164.32545184-164.32545186V343.09916445c-2.56075852-89.86927408-77.02907259-161.76469333-166.88621037-161.76469334z m-5.13365333 634.19429926H200.99527111c-33.37481482 0-59.05521778-28.24116148-61.61597629-61.61597629l-2.57289482-415.94728297c0-33.37481482 28.24116148-61.6159763 61.6159763-61.61597629h626.48775111c33.37481482 0 59.05521778 28.24116148 61.61597629 61.61597629l2.57289482 415.94728297c-2.57289482 35.93557333-28.24116148 61.6159763-61.6159763 61.61597629z" fill="#ff7299" ></path><path d="M403.82919111 417.55534222l15.40096 77.0290726-205.40681481 38.50846815-15.40096-77.0290726 205.40681481-38.50846815z m197.70026667 77.0290726l15.40096-77.0290726 205.40681481 38.50846815-15.40096 77.0290726-205.40681481-38.50846815z m41.08136297 161.75255703c0 2.57289482 0 7.70654815-2.57289483 10.26730667-12.84020148 28.24116148-41.08136297 46.2150163-74.45617777 48.78791111-20.53461333 0-41.08136297-10.26730667-53.92156445-25.68040296-15.40096 15.40096-33.37481482 25.68040297-53.92156445 25.68040296-30.8140563-2.57289482-59.05521778-20.53461333-74.45617777-48.78791111 0-2.57289482-2.57289482-5.13365333-2.57289481-10.26730667 0-10.26730667 7.70654815-17.97385482 17.97385481-20.53461333h2.57289482c7.70654815 0 12.84020148 2.57289482 15.40096 10.26730666 0 0 20.53461333 28.24116148 38.50846815 28.24116149 35.94770963 0 35.94770963-30.8140563 56.48232296-53.92156445 23.10750815 25.68040297 23.10750815 53.92156445 56.48232296 53.92156445 23.10750815 0 38.50846815-28.24116148 38.50846815-28.24116149 2.57289482-5.13365333 10.26730667-10.26730667 15.40096-10.26730666 10.26730667-2.57289482 17.97385482 5.13365333 20.53461333 15.40096v5.13365333h0.0364089z" fill="#ff7299" ></path></symbol></svg>',      o = (o = document.getElementsByTagName("script"))[o.length - 1].getAttribute("data-injectcss"),      p = function (c, l) {        l.parentNode.insertBefore(c, l);      };    if (o && !c.__iconfont__svg__cssinject__) {      c.__iconfont__svg__cssinject__ = !0;      try {        document.write(          "<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>"        );      } catch (c) {        console && console.log(c);      }    }    function d() {      i || ((i = !0), a());    }    function m() {      try {        t.documentElement.doScroll("left");      } catch (c) {        return void setTimeout(m, 50);      }      d();    }    (l = function () {      var c,        l = document.createElement("div");      (l.innerHTML = v),        (v = null),        (l = l.getElementsByTagName("svg")[0]) &&          (l.setAttribute("aria-hidden", "true"),          (l.style.position = "absolute"),          (l.style.width = 0),          (l.style.height = 0),          (l.style.overflow = "hidden"),          (l = l),          (c = document.body).firstChild ? p(l, c.firstChild) : c.appendChild(l));    }),      document.addEventListener        ? ~["complete", "loaded", "interactive"].indexOf(document.readyState)          ? setTimeout(l, 0)          : ((h = function () {              document.removeEventListener("DOMContentLoaded", h, !1), l();            }),            document.addEventListener("DOMContentLoaded", h, !1))        : document.attachEvent &&          ((a = l),          (t = c.document),          (i = !1),          m(),          (t.onreadystatechange = function () {            "complete" == t.readyState && ((t.onreadystatechange = null), d());          }));  })(window);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/font.css"/>
      <url>/css/font.css</url>
      
        <content type="html"><![CDATA[@font-face {    font-family: "iconfont"; /* Project id 4705831 */    src: url('//at.alicdn.com/t/c/font_4705831_qwyhob6w6g.woff2?t=1728531515667') format('woff2'),         url('//at.alicdn.com/t/c/font_4705831_qwyhob6w6g.woff?t=1728531515667') format('woff'),         url('//at.alicdn.com/t/c/font_4705831_qwyhob6w6g.ttf?t=1728531515667') format('truetype');  }    .iconfont {    font-family: "iconfont" !important;    font-size: 20px;    font-style: normal;    -webkit-font-smoothing: antialiased;    -moz-osx-font-smoothing: grayscale;  }    .icon-bilibili:before {    content: "\eb78";  }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友情链接</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/mouse.css"/>
      <url>/css/mouse.css</url>
      
        <content type="html"><![CDATA[body {    cursor: url(https://gcore.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/default.cur),        default;}a,img {    cursor: url(https://gcore.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/pointer.cur),        default;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[    <div id="aplayer-eLBbJKZN" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="12622671053" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="true" data-mutex="false" data-listmaxheight="400px" data-preload="none" data-theme="#ad7a86"    ></div>]]></content>
      
    </entry>
    
    
  
</search>
